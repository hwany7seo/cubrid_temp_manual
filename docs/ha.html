

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>CUBRID HA &mdash; CUBRID 11.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'11.3.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CUBRID Security" href="security.html" />
    <link rel="prev" title="DDL Audit Log" href="admin/ddl_audit.html" />

    <!-- meta-tags -->
      
      
      
        
        
          
        
        
          
        
      

      <!-- keywords & description -->
      <meta name="keywords" content="CUBRID HA, CUBRID 11.3.0 documentation, high availability, cubrid node, cubrid replication, cubrid slave, database replication, database slave" />
      <meta name="description" content = "CUBRID HA &mdash; CUBRID 11.3.0 documentation. CUBRID HA is an implementation of High Availability. CUBRID HA ensures database synchronization among multiple servers when providing service. When an unexpected failure occurs in the system which is operating services, this feature minimizes the service down time by allowing the other system to carry out the service automatically. " />
    
      <!-- og -->
      <meta property="og:title" content="CUBRID HA &mdash; CUBRID 11.3.0 documentation"/>
      <meta property="og:keywords" content="CUBRID HA, CUBRID 11.3.0 documentation, high availability, cubrid node, cubrid replication, cubrid slave, database replication, database slave" />
      <meta property="og:description" content = "CUBRID HA &mdash; CUBRID 11.3.0 documentation. CUBRID HA is an implementation of High Availability. CUBRID HA ensures database synchronization among multiple servers when providing service. When an unexpected failure occurs in the system which is operating services, this feature minimizes the service down time by allowing the other system to carry out the service automatically. " />
      <meta property="og:type" content="website"/>
      <meta property="og:site" content="CUBRID HA &mdash; CUBRID 11.3.0 documentation"/>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CUBRID
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="toc.html">Introduction to Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="toc.html#manual-contents">Manual Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="toc.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="toc.html#manual-conventions">Manual Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="toc.html#version-name-and-version-string-conventions">Version Name and Version String Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to CUBRID</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#system-architecture">System Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="intro.html#process-structure">Process Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html#database-volume-structure">Database Volume Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="intro.html#permanent-volume">Permanent Volume</a></li>
<li class="toctree-l4"><a class="reference internal" href="intro.html#temporary-volume">Temporary Volume</a></li>
<li class="toctree-l4"><a class="reference internal" href="intro.html#backup-volume">Backup Volume</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="intro.html#database-server">Database Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html#broker">Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html#interface-module">Interface Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#cubrid-characteristics">CUBRID Characteristics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install_upgrade.html">Installing and Upgrading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html">Installing and Running CUBRID</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#supported-platforms-and-system-requirements">Supported Platforms and System Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#compatibility">Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#installing-and-running-cubrid-on-linux">Installing and Running CUBRID on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#installing-and-running-cubrid-on-windows">Installing and Running CUBRID on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#installing-with-a-compressed-package">Installing with a Compressed Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="install.html#installing-cubrid-with-tar-gz-on-linux">Installing CUBRID with tar.gz on Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="install.html#installing-cubrid-with-zip-on-windows">Installing CUBRID with zip on Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="env.html">Configuring Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="env.html#cubrid-environment-variables">CUBRID Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#os-environment-and-java-environment-variables">OS Environment and Java Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#configuring-the-environment-variable">Configuring the Environment Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#language-charset-setting">Language &amp; Charset Setting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="env.html#port-setting">Port Setting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="env.html#default-ports-for-cubrid">Default Ports for CUBRID</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#ports-for-cubrid-ha">Ports for CUBRID HA</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#ports-for-cubrid-manager-server">Ports for CUBRID Manager Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#ports-for-cubrid-java-stored-procedure-server">Ports for CUBRID Java Stored Procedure Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#cautions-during-upgrade">Cautions during upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#upgrading-from-cubrid-9-2-9-3-10-0-10-1-10-2-11-0-11-2-to-cubrid-11-3">Upgrading from CUBRID 9.2/9.3/10.0/10.1/10.2/11.0/11.2 to CUBRID 11.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#db-migration">DB migration</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#parameter-configuration">Parameter configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#upgrading-from-cubrid-9-1-to-cubrid-11-3">Upgrading from CUBRID 9.1 to CUBRID 11.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#migration-from-91">DB migration</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#conf-from-91">Parameter configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#upgrading-from-cubrid-2008-r4-1-r4-3-r4-4-to-cubrid-11-3">Upgrading From CUBRID 2008 R4.1/R4.3/R4.4 To CUBRID 11.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#migration-from-41">DB migration</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#conf-from-41">Parameter configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#upgrading-from-cubrid-2008-r4-0-or-earlier-versions-to-cubrid-11-3">Upgrading From CUBRID 2008 R4.0 or Earlier Versions To CUBRID 11.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#id6">DB migration</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrade.html#id7">Parameter configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html#database-migration-under-ha-environment">Database Migration under HA Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#ha-migration-from-cubrid-2008-r2-2-or-higher-to-cubrid-11-3">HA migration from CUBRID 2008 R2.2 or higher to CUBRID 11.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#ha-migration-from-cubrid-2008-r2-0-r2-1-to-cubrid-11-3">HA Migration from CUBRID 2008 R2.0/R2.1 to CUBRID 11.3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="uninstall.html">Uninstalling CUBRID</a><ul>
<li class="toctree-l3"><a class="reference internal" href="uninstall.html#uninstalling-cubrid-in-linux">Uninstalling CUBRID in Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="uninstall.html#uninstalling-cubrid-in-windows">Uninstalling CUBRID in Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html">Starting the CUBRID Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#shell-command">Shell Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#cubridservice-or-cubrid-service-tray">CUBRIDService or CUBRID Service Tray</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#creating-databases">Creating Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick_start.html#starting-database">Starting Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qrytool.html">Query Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="qrytool.html#csql-interpreter">CSQL Interpreter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qrytool.html#management-tools">Management Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="qrytool.html#running-sql-with-cubrid-manager">Running SQL with CUBRID Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="qrytool.html#migrating-schema-data-with-cubrid-migration-toolkit">Migrating schema/data with CUBRID Migration Toolkit</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qrytool.html#drivers">Drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="csql.html">CSQL Interpreter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="csql.html#introduction-to-the-csql-interpreter">Introduction to the CSQL Interpreter</a></li>
<li class="toctree-l2"><a class="reference internal" href="csql.html#executing-csql">Executing CSQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="csql.html#csql-execution-mode">CSQL Execution Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="csql.html#using-csql-syntax">Using CSQL (Syntax)</a></li>
<li class="toctree-l3"><a class="reference internal" href="csql.html#csql-options">CSQL Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="csql.html#session-commands">Session Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sql/index.html">CUBRID SQL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sql/syntax.html">Writing Rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/identifier.html">Identifier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/identifier.html#guidelines-for-creating-identifiers">Guidelines for Creating Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/identifier.html#legal-identifiers">Legal Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/identifier.html#illegal-identifiers">Illegal Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/identifier.html#the-maximum-length-of-an-identifier-name">The maximum length of an identifier name</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/keyword.html">Reserved Words</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/comment.html">Comment</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/literal.html">Literal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/literal.html#number">Number</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/literal.html#date-time">Date/Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/literal.html#bit-string">Bit String</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/literal.html#character-string">Character String</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/literal.html#collection">Collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/literal.html#null">NULL</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/datatype_index.html">Data Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/datatype.html">Data Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#numeric-types">Numeric Types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#int-integer">INT/INTEGER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#short-smallint">SHORT/SMALLINT</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#bigint">BIGINT</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#numeric-decimal">NUMERIC/DECIMAL</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#float-real">FLOAT/REAL</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#double-double-precision">DOUBLE/DOUBLE PRECISION</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#date-time-types">Date/Time Types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#date">DATE</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#time">TIME</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#timestamp">TIMESTAMP</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#datetime">DATETIME</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#casting-a-string-to-date-time-type">CASTing a String to Date/Time Type</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#date-time-types-with-timezone">Date/Time Types with Timezone</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#timezone-configuration">Timezone Configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#timezone-function">Timezone Function</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#functions-with-a-timezone-type">Functions with a Timezone Type</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#conversion-functions-for-timezone-types">Conversion Functions for Timezone Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#iana-timezone">IANA Timezone</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#bit-strings">Bit Strings</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#bit-n">BIT(n)</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#bit-varying-n">BIT VARYING(n)</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#character-strings">Character Strings</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#char-n">CHAR(n)</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#varchar-n-char-varying-n">VARCHAR(n)/CHAR VARYING(n)</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#string">STRING</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#escape-special-characters">Escape Special Characters</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#comparison-rules">Comparison Rules</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#enum-data-type">ENUM Data Type</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#enum-type-comparisons">ENUM Type Comparisons</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#enum-type-ordering">ENUM Type Ordering</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#blob-clob-data-types">BLOB/CLOB Data Types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#blob">BLOB</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#clob">CLOB</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#to-create-and-alter-lob">To Create and alter LOB</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#to-store-and-update-lob">To store and update LOB</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#to-access-lob">To access LOB</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#functions-and-operators-for-lob">Functions and Operators for LOB</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#to-create-and-manage-lob-storage">To create and manage LOB storage</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#transaction-and-recovery">Transaction and Recovery</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#collection-types">Collection Types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#set">SET</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#multiset">MULTISET</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#list-sequence">LIST/SEQUENCE</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#json-data-type">JSON Data Type</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#creating-json-data">Creating JSON data</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#json-validation">JSON Validation</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#json-value-types">JSON Value Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#json-data-conversions">JSON Data Conversions</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#json-paths">JSON Paths</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#json-pointers">JSON Pointers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/datatype.html#implicit-type-conversion">Implicit Type Conversion</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/datatype.html#conversion-rules">Conversion Rules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/schema/index.html">Data Definition Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/table_stmt.html">TABLE DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/table_stmt.html#create-table">CREATE TABLE</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#table-definition">Table Definition</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#column-definition">Column Definition</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#on-update">ON UPDATE</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#id2">Constraint Definition</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#column-option">Column Option</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#table-option">Table Option</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#create-table-like">CREATE TABLE LIKE</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#create-table-as-select">CREATE TABLE AS SELECT</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/table_stmt.html#alter-table">ALTER TABLE</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#add-column-clause">ADD COLUMN Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#add-constraint-clause">ADD CONSTRAINT Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#add-index-clause">ADD INDEX Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#alter-column-set-default-clause">ALTER COLUMN … SET DEFAULT Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#auto-increment-clause">AUTO_INCREMENT Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#change-modify-clauses">CHANGE/MODIFY Clauses</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#column-s-comment">Column’s COMMENT</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#rename-column-clause">RENAME COLUMN Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#drop-column-clause">DROP COLUMN Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#drop-constraint-clause">DROP CONSTRAINT Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#drop-index-clause">DROP INDEX Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#drop-primary-key-clause">DROP PRIMARY KEY Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/table_stmt.html#drop-foreign-key-clause">DROP FOREIGN KEY Clause</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/table_stmt.html#drop-table">DROP TABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/table_stmt.html#rename-table">RENAME TABLE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/index_stmt.html">INDEX DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/index_stmt.html#create-index">CREATE INDEX</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/index_stmt.html#comment-of-index">COMMENT of Index</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/index_stmt.html#online-index-creation">Online index creation</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/index_stmt.html#displaying-online-index-from-other-transactions">Displaying online index from other transactions</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/index_stmt.html#online-unique-index-while-other-transactions-inserts-violates-uniqueness">Online unique index while other transactions inserts violates uniqueness</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/index_stmt.html#deduplicate">DEDUPLICATE</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/index_stmt.html#alter-index">ALTER INDEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/index_stmt.html#drop-index">DROP INDEX</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/view_stmt.html">VIEW DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/view_stmt.html#create-view">CREATE VIEW</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#condition-for-creating-updatable-view">Condition for Creating Updatable VIEW</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#view-s-comment">View’s COMMENT</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/view_stmt.html#alter-view">ALTER VIEW</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#add-query-clause">ADD QUERY Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#as-select-clause">AS SELECT Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#change-query-clause">CHANGE QUERY Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#drop-query-clause">DROP QUERY Clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/view_stmt.html#comment-clause">COMMENT Clause</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/view_stmt.html#drop-view">DROP VIEW</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/view_stmt.html#rename-view">RENAME VIEW</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/serial_stmt.html">SERIAL DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/serial_stmt.html#create-serial">CREATE SERIAL</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/serial_stmt.html#comment-of-serial">COMMENT of Serial</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/serial_stmt.html#alter-serial">ALTER SERIAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/serial_stmt.html#drop-serial">DROP SERIAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/serial_stmt.html#accessing-serial">Accessing Serial</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/serial_stmt.html#pseudocolumns">Pseudocolumns</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/serial_stmt.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/synonym_stmt.html">SYNONYM DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/synonym_stmt.html#create-synonym">CREATE SYNONYM</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#private-synonym">1. Private synonym</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#synonym-information">2. Synonym information</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#synonym-name">3. Synonym name</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#synonym-for-synonym">4. Synonym for synonym</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#creating-schema-specified-synonyms">5. Creating schema-specified synonyms</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/synonym_stmt.html#alter-synonym">ALTER SYNONYM</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#change-target-object">Change target object</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#change-comment">Change comment</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/synonym_stmt.html#drop-synonym">DROP SYNONYM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/synonym_stmt.html#rename-synonym">RENAME SYNONYM</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#cannot-change-schema">1. Cannot change schema</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#name-already-in-use">2. Name already in use</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/synonym_stmt.html#use-synonym">USE SYNONYM</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#use-synonyms-from-other-schemas">1. Use synonyms from other schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/synonym_stmt.html#statements-where-synonyms-cannot-be-used">2. Statements where synonyms cannot be used</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/server_stmt.html">SERVER DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/server_stmt.html#create-server">CREATE SERVER</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/server_stmt.html#server-definition">Server Definition</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/server_stmt.html#rename-server">RENAME SERVER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/server_stmt.html#drop-server">DROP SERVER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/server_stmt.html#alter-server">ALTER SERVER</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/server_stmt.html#owner-to-clause">OWNER TO clause</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/server_stmt.html#change-clause">CHANGE clause</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/schema/stored_routine_stmt.html">STORED FUNCTION/PROCEDURE DEFINITION STATEMENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#create-procedure">CREATE PROCEDURE</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#comment-of-java-stored-procedure">COMMENT of Java Stored Procedure</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#checking-the-published-java-stored-procedure-information">Checking the Published Java Stored Procedure Information</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#drop-procedure">DROP PROCEDURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#create-function">CREATE FUNCTION</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#comment-of-java-stored-function">COMMENT of Java Stored Function</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#checking-the-published-java-stored-function-information">Checking the Published Java Stored Function Information</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#drop-function">DROP FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#java-call-specification">Java Call Specification</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/schema/stored_routine_stmt.html#data-type-mapping">Data Type Mapping</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/function/index.html">Operators and Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/function/logical_op.html">Logical Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/comparison_op.html">Comparison Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/arithmetic_op.html">Arithmetic Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/arithmetic_op.html#arithmetic-operations-and-type-casting-of-numeric-data-types">Arithmetic Operations and Type Casting of Numeric Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/arithmetic_op.html#arithmetic-operations-and-type-casting-of-date-time-data-types">Arithmetic Operations and Type Casting of DATE/TIME Data Types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/function/arithmetic_op.html#behavior-related-to-timezone-parameters">Behavior related to timezone parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/set_op.html">Set Arithmetic Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/set_op.html#set-multiset-list">SET, MULTISET, LIST</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/function/set_op.html#assigning-collection-value-to-variable">Assigning Collection Value to Variable</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/stmt_set_op.html">Statement Set Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/stmt_set_op.html#union-difference-intersection">UNION, DIFFERENCE, INTERSECTION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/containment_op.html">Containment Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/containment_op.html#seteq">SETEQ</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/containment_op.html#setneq">SETNEQ</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/containment_op.html#superset">SUPERSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/containment_op.html#superseteq">SUPERSETEQ</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/containment_op.html#subset">SUBSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/containment_op.html#subseteq">SUBSETEQ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/bit_fn.html">BIT Functions and Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/bit_fn.html#bitwise-operator">Bitwise Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/bit_fn.html#bit-and">BIT_AND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/bit_fn.html#bit-or">BIT_OR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/bit_fn.html#bit-xor">BIT_XOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/bit_fn.html#bit-count">BIT_COUNT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/string_fn.html">String Functions and Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#concatenation-operator">Concatenation Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#ascii">ASCII</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#bin">BIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#bit-length">BIT_LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#char-length-character-length-lengthb-length">CHAR_LENGTH, CHARACTER_LENGTH, LENGTHB, LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#chr">CHR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#concat">CONCAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#concat-ws">CONCAT_WS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#elt">ELT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#field">FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#find-in-set">FIND_IN_SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#from-base64">FROM_BASE64</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#insert">INSERT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#instr">INSTR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#lcase-lower">LCASE, LOWER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#left">LEFT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#locate">LOCATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#lpad">LPAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#ltrim">LTRIM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#mid">MID</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#octet-length">OCTET_LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#position">POSITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#repeat">REPEAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#replace">REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#reverse">REVERSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#right">RIGHT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#rpad">RPAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#rtrim">RTRIM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#space">SPACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#strcmp">STRCMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#substr">SUBSTR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#substring">SUBSTRING</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#substring-index">SUBSTRING_INDEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#to-base64">TO_BASE64</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#translate">TRANSLATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#trim">TRIM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/string_fn.html#ucase-upper">UCASE, UPPER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/regex_fn.html">Regular Expressions Functions and Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regular-expressions-pattern-syntax">Regular Expressions Pattern Syntax</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/function/regex_fn.html#special-pattern-characters">Special Pattern Characters</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/function/regex_fn.html#quantifiers">Quantifiers</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/function/regex_fn.html#groups">Groups</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/function/regex_fn.html#assertions">Assertions</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/function/regex_fn.html#alternatives">Alternatives</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/function/regex_fn.html#character-classes">Character classes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regexp-rlike">REGEXP, RLIKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regexp-count">REGEXP_COUNT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regexp-instr">REGEXP_INSTR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regexp-like">REGEXP_LIKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regexp-replace">REGEXP_REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/regex_fn.html#regexp-substr">REGEXP_SUBSTR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/numeric_fn.html">Numeric/Mathematical Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#abs">ABS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#acos">ACOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#asin">ASIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#atan">ATAN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#atan2">ATAN2</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#ceil">CEIL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#conv">CONV</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#cos">COS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#cot">COT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#crc32">CRC32</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#degrees">DEGREES</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#drandom-drand">DRANDOM, DRAND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#exp">EXP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#floor">FLOOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#hex">HEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#ln">LN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#log2">LOG2</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#log10">LOG10</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#mod">MOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#pi">PI</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#pow-power">POW, POWER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#radians">RADIANS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#random-rand">RANDOM, RAND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#round">ROUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#sign">SIGN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#sin">SIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#sqrt">SQRT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#tan">TAN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#trunc-truncate">TRUNC, TRUNCATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/numeric_fn.html#width-bucket">WIDTH_BUCKET</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/datetime_fn.html">Date/Time Functions and Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#adddate-date-add">ADDDATE, DATE_ADD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#addtime">ADDTIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#add-months">ADD_MONTHS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#curdate-current-date">CURDATE, CURRENT_DATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#current-datetime-now">CURRENT_DATETIME, NOW</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#curtime-current-time">CURTIME, CURRENT_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#current-timestamp-localtime-localtimestamp">CURRENT_TIMESTAMP, LOCALTIME, LOCALTIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#date">DATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#datediff">DATEDIFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#date-sub-subdate">DATE_SUB, SUBDATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#day-dayofmonth">DAY, DAYOFMONTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#dayofweek">DAYOFWEEK</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#dayofyear">DAYOFYEAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#extract">EXTRACT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#from-days">FROM_DAYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#from-tz">FROM_TZ</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#from-unixtime">FROM_UNIXTIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#hour">HOUR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#last-day">LAST_DAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#makedate">MAKEDATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#maketime">MAKETIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#minute">MINUTE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#month">MONTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#months-between">MONTHS_BETWEEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#new-time">NEW_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#quarter">QUARTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#round">ROUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#sec-to-time">SEC_TO_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#second">SECOND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#sys-date-sysdate">SYS_DATE, SYSDATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#sys-datetime-sysdatetime">SYS_DATETIME, SYSDATETIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#sys-time-systime">SYS_TIME, SYSTIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#sys-timestamp-systimestamp">SYS_TIMESTAMP, SYSTIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#time">TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#time-to-sec">TIME_TO_SEC</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#timediff">TIMEDIFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#timestamp">TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#to-days">TO_DAYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#trunc">TRUNC</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#tz-offset">TZ_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#unix-timestamp">UNIX_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#utc-date">UTC_DATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#utc-time">UTC_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#week">WEEK</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#weekday">WEEKDAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/datetime_fn.html#year">YEAR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/json_fn.html">JSON functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#introduction-to-json-functions">Introduction to JSON functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-array">JSON_ARRAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-object">JSON_OBJECT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-keys">JSON_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-depth">JSON_DEPTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-length">JSON_LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-valid">JSON_VALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-type">JSON_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-quote">JSON_QUOTE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-unquote">JSON_UNQUOTE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-pretty">JSON_PRETTY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-search">JSON_SEARCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-extract">JSON_EXTRACT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#fn-json-arrow">-&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#fn-json-double-arrow">-&gt;&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-contains-path">JSON_CONTAINS_PATH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-contains">JSON_CONTAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-merge-patch">JSON_MERGE_PATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-merge-preserve">JSON_MERGE_PRESERVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-merge">JSON_MERGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-array-append">JSON_ARRAY_APPEND</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-array-insert">JSON_ARRAY_INSERT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-insert">JSON_INSERT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-set">JSON_SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-replace">JSON_REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-remove">JSON_REMOVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/json_fn.html#json-table">JSON_TABLE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/lob_fn.html">LOB Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#bit-to-blob">BIT_TO_BLOB</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#blob-from-file">BLOB_FROM_FILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#blob-length">BLOB_LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#blob-to-bit">BLOB_TO_BIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#char-to-blob">CHAR_TO_BLOB</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#char-to-clob">CHAR_TO_CLOB</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#clob-from-file">CLOB_FROM_FILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#clob-length">CLOB_LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/lob_fn.html#clob-to-char">CLOB_TO_CHAR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/typecast_fn.html">Data Type Casting Functions and Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#cast">CAST</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#date-format">DATE_FORMAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#format">FORMAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#str-to-date">STR_TO_DATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#time-format">TIME_FORMAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-char-date-time">TO_CHAR(date_time)</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-char-number">TO_CHAR(number)</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-date">TO_DATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-datetime">TO_DATETIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-datetime-tz">TO_DATETIME_TZ</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-number">TO_NUMBER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-time">TO_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-timestamp">TO_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/typecast_fn.html#to-timestamp-tz">TO_TIMESTAMP_TZ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/analysis_fn.html">Aggregate/Analytic Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#aggregate-vs-analytic">Aggregate vs. Analytic</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#analytic-functions-which-order-by-clause-must-be-specified-in-over-function">Analytic functions which “ORDER BY” clause must be specified in OVER function</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#avg">AVG</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#count">COUNT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#cume-dist">CUME_DIST</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#dense-rank">DENSE_RANK</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#first-value">FIRST_VALUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#group-concat">GROUP_CONCAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#lag">LAG</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#last-value">LAST_VALUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#lead">LEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#max">MAX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#median">MEDIAN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#min">MIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#nth-value">NTH_VALUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#ntile">NTILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#percent-rank">PERCENT_RANK</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#percentile-cont">PERCENTILE_CONT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#percentile-disc">PERCENTILE_DISC</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#rank">RANK</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#row-number">ROW_NUMBER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#stddev-stddev-pop">STDDEV, STDDEV_POP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#stddev-samp">STDDEV_SAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#sum">SUM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#variance-var-pop">VARIANCE, VAR_POP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#var-samp">VAR_SAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#json-arrayagg">JSON_ARRAYAGG</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/analysis_fn.html#json-objectagg">JSON_OBJECTAGG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/clickcounter_fn.html">Click Counter Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/clickcounter_fn.html#incr-decr">INCR, DECR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/rownum_fn.html">ROWNUM Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/rownum_fn.html#rownum-inst-num">ROWNUM, INST_NUM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/rownum_fn.html#orderby-num">ORDERBY_NUM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/rownum_fn.html#groupby-num">GROUPBY_NUM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/information_fn.html">Information Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#charset">CHARSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#coercibility">COERCIBILITY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#collation">COLLATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#current-user-user">CURRENT_USER, USER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#database-schema">DATABASE, SCHEMA</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#dbtimezone">DBTIMEZONE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#default">DEFAULT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#disk-size">DISK_SIZE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#index-cardinality">INDEX_CARDINALITY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#inet-aton">INET_ATON</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#inet-ntoa">INET_NTOA</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#last-insert-id">LAST_INSERT_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#list-dbs">LIST_DBS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#row-count">ROW_COUNT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#sessiontimezone">SESSIONTIMEZONE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#user-system-user">USER, SYSTEM_USER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/information_fn.html#version">VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/encryption_fn.html">Encryption Function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/encryption_fn.html#md5">MD5</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/encryption_fn.html#sha1">SHA1</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/encryption_fn.html#sha2">SHA2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/condition_op.html">Comparison Expression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#simple-comparison-expression">Simple Comparison Expression</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#any-some-all-quantifiers">ANY/SOME/ALL quantifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#between">BETWEEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#exists">EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#in">IN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#is-null">IS NULL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#like">LIKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_op.html#case">CASE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/condition_fn.html">Comparison Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#coalesce">COALESCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#decode">DECODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#greatest">GREATEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#if">IF</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#ifnull-nvl">IFNULL, NVL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#isnull">ISNULL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#least">LEAST</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#nullif">NULLIF</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/condition_fn.html#nvl2">NVL2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/function/other_fn.html">Other functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/function/other_fn.html#sleep">SLEEP</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/function/other_fn.html#sys-guid">SYS_GUID</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/query/index.html">Data Manipulation Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/query/select.html">SELECT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#from-clause">FROM Clause</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#derived-table">Derived Table</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#subquery-derived-table">Subquery Derived Table</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#remote-table">Remote Table</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#dblink">DBLINK</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#where-clause">WHERE Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#group-by-having-clause">GROUP BY … HAVING Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#order-by-clause">ORDER BY Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#limit-clause">LIMIT Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#join-query">Join Query</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#inner-join">Inner Join</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#outer-join">Outer Join</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#cross-join">Cross Join</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#natural-join">Natural Join</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#subquery">Subquery</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#single-row-subquery">Single-Row Subquery</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/select.html#multiple-row-subquery">Multiple-Row Subquery</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#values">VALUES</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/select.html#for-update">FOR UPDATE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/hq.html">Hierarchical Query</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#start-with-clause">START WITH Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#connect-by-clause">CONNECT BY Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#hierarchical-query-execution">Hierarchical Query Execution</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#hierarchical-query-for-table-join">Hierarchical Query for Table Join</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#query-results">Query Results</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#ordering-data-with-the-hierarchical-query">Ordering Data with the Hierarchical Query</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#pseudo-columns-for-hierarchical-query">Pseudo Columns for Hierarchical Query</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#level">LEVEL</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#connect-by-isleaf">CONNECT_BY_ISLEAF</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#connect-by-iscycle">CONNECT_BY_ISCYCLE</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#operators-for-hierarchical-query">Operators for Hierarchical Query</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#connect-by-root">CONNECT_BY_ROOT</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#prior">PRIOR</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#functions-for-hierarchical-query">Functions for Hierarchical Query</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/hq.html#sys-connect-by-path">SYS_CONNECT_BY_PATH</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#examples-of-hierarchical-query">Examples of Hierarchical Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/hq.html#performance-of-hierarchical-query">Performance of Hierarchical Query</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/insert.html">INSERT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/insert.html#insert-select-statement">INSERT … SELECT Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/insert.html#insert-into-remote-table-spec-select-statement">INSERT INTO &lt;remote-table-spec&gt;… SELECT statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/insert.html#on-duplicate-key-update-clause">ON DUPLICATE KEY UPDATE Clause</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/update.html">UPDATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/replace.html">REPLACE</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/delete.html">DELETE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/delete.html#caution">Caution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/merge.html">MERGE</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/truncate.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/prepare.html">PREPARED STATEMENT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/prepare.html#prepare-statement">PREPARE Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/prepare.html#execute-statement">EXECUTE Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/prepare.html#deallocate-prepare-drop-prepare-statements">DEALLOCATE PREPARE/DROP PREPARE Statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/do.html">DO</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/cte.html">CTE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/cte.html#cte-column-names">CTE column names</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/cte.html#recursive-clause">RECURSIVE clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/cte.html#cte-usage-in-dmls-and-create">CTE Usage in DMLs and CREATE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/call.html">CALL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/tuning_index.html">Query Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html">Updating Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#checking-statistics-information">Checking Statistics Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#viewing-query-plan">Viewing Query Plan</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#query-profiling">Query Profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#using-sql-hint">Using SQL Hint</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#index-hint">Index Hint</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#using-index">USING INDEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#use-force-ignore-index">USE, FORCE, IGNORE INDEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#examples-of-index-hint">Examples of index hint</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#special-indexes">Special Indexes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#filtered-index">Filtered Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#function-based-index">Function-based Index</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#optimization-using-indexes">Optimization Using Indexes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#covering-index">Covering Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#optimizing-order-by-clause">Optimizing ORDER BY Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#index-scan-in-descending-order">Index Scan in Descending Order</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#optimizing-group-by-clause">Optimizing GROUP BY Clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#multiple-key-ranges-optimization">Multiple Key Ranges Optimization</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#index-skip-scan">Index Skip Scan</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#loose-index-scan">Loose Index Scan</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#in-memory-sort">In Memory Sort</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#sort-limit-optimization">SORT-LIMIT optimization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#optimization-using-rewrite">Optimization Using Rewrite</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#join-elimination-optimization">Join Elimination Optimization</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/tuning.html#eliminating-inner-join">Eliminating <strong>INNER JOIN</strong></a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/tuning.html#eliminating-left-outer-join">Eliminating <strong>LEFT OUTER JOIN</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#view-merging-optimization">View Merging Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#predicate-push">Predicate Push</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/tuning.html#query-cache">QUERY CACHE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/tuning.html#subquery-cache-correlated">SUBQUERY CACHE (correlated)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/partition_index.html">Partitioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/partition.html">Partitioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#partitioning-key">Partitioning key</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#range-partitioning">Range Partitioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#hash-partitioning">Hash Partitioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#list-partitioning">List Partitioning</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#comment-of-partition">COMMENT of Partition</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#partition-pruning">Partition Pruning</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#partitioning-management">Partitioning Management</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#modifying-a-partitioned-table-into-a-regular-table">Modifying a Partitioned Table into a Regular Table</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#partition-reorganization">Partition Reorganization</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#adding-partitions">Adding Partitions</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#dropping-partitions">Dropping Partitions</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#hash-partitioning-reorganization">Hash Partitioning Reorganization</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#partition-promotion">Partition Promotion</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#indexes-on-partitioned-tables">Indexes on Partitioned Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/partition.html#notes-on-partitioning">Notes on Partitioning</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#statistics-on-partitioning-tables">Statistics on Partitioning Tables</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#restrictions-on-partitioned-tables">Restrictions on Partitioned Tables</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/partition.html#partitioning-key-and-charset-collation">Partitioning Key and Charset, Collation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/i18n_index.html">Globalization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html">An Overview of Globalization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#character-data">Character data</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#related-terms">Related Terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#locale-attributes">Locale Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#collation-properties">Collation Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#collation-naming-rules">Collation Naming Rules</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#cubrid-collation">CUBRID Collation</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#files-for-locale-setting">Files For Locale Setting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#locale-setting">Locale Setting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#step-1-selecting-a-locale">Step 1: Selecting a Locale</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#step-2-compiling-locale">Step 2: Compiling Locale</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#step-3-setting-cubrid-to-use-a-specific-locale">Step 3: Setting CUBRID to Use a Specific Locale</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#built-in-locale-and-library-locale">Built-in Locale and Library Locale</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#the-month-day-in-korean-and-turkish-characters-for-iso-8859-1-charset">The Month/Day in Korean and Turkish Characters for ISO-8859-1 Charset</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#step-4-creating-a-database-with-the-selected-locale-setting">Step 4: Creating a Database with the Selected Locale Setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#step-5-optional-manually-verifying-the-locale-file">Step 5 (optional): Manually Verifying the Locale File</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#step-6-starting-cubrid-related-processes">Step 6: Starting CUBRID-Related Processes</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#synchronization-of-database-collations-with-system-collations">Synchronization of Database Collations with System Collations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#collation">Collation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#charset-and-collation-of-column">Charset and Collation of Column</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#charset">Charset</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#string-check">String Check</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#charset-conversion">Charset Conversion</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#collation-setting">Collation</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#charset-and-collate-modifier">CHARSET and COLLATE modifier</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#how-to-determine-collation-among-columns-with-different-collation">How to Determine Collation among Columns with Different Collation</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#charset-and-collation-of-an-enum-type-column">Charset and Collation of an ENUM type column</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#charset-and-collation-of-tables">Charset and Collation of Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#charset-and-collation-of-string-literals">Charset and Collation of String Literals</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#set-names-statement">SET NAMES Statement</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#charset-introducer">Charset Introducer</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#charset-and-collation-of-expressions">Charset and Collation of Expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#charset-and-collation-of-system-data">Charset and Collation of System Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#impact-of-charset-specified-when-creating-db">Impact of Charset Specified When Creating DB</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#casing-and-identifiers">Casing and identifiers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#string-literal-input-and-output">String literal input and output</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#text-conversion-for-csql">Text Conversion for CSQL</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#unicode-normalization">Unicode Normalization</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#contraction-and-expansion-of-collation">Contraction and Expansion of Collation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#contraction">Contraction</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#expansion">Expansion</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#operations-requiring-collation-and-charset">Operations Requiring Collation and Charset</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#id14">Charset</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#id15">Collation</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#id16">Charset conversion</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#collation-settings-impacting-cubrid-features">Collation settings impacting CUBRID features</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#like-conditional-optimization">LIKE Conditional Optimization</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#index-covering">Index Covering</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#summary-of-cubrid-features-for-each-collation">Summary of CUBRID Features for Each Collation</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#viewing-collation-information">Viewing Collation Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#using-i18n-characters-with-jdbc">Using i18n characters with JDBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#timezone-setting">Timezone Setting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#compiling-timezone-library">Compiling Timezone Library</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#windows">Windows</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#linux">Linux</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#timezone-library-and-database-compatibility">Timezone library and database compatibility</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/i18n.html#usage-of-timezone-data-types-with-jdbc">Usage of timezone data types with JDBC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#configuration-guide-for-characters">Configuration Guide for Characters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#locale">Locale</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#char-and-varchar">CHAR and VARCHAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#choosing-charset">Choosing Charset</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#choosing-collation">Choosing Collation</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#normalization">Normalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#cast-vs-collate">CAST vs COLLATE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#remark">Remark</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/i18n.html#guide-for-adding-locales-and-collations">Guide for Adding Locales and Collations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#ldml-calendar-information">LDML Calendar Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#ldml-numbers-information">LDML Numbers information</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#ldml-alphabet">LDML Alphabet</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#ldml-console-conversion">LDML Console Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/i18n.html#ldml-collation">LDML Collation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/transaction_index.html">Transaction and Lock</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html">Database Transaction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#transaction-commit">Transaction Commit</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#transaction-rollback">Transaction Rollback</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#savepoint-and-partial-rollback">Savepoint and Partial Rollback</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html#cursor-holdability">Cursor Holdability</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html#database-concurrency">Database Concurrency</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html#multiversion-concurrency-control">Multiversion Concurrency Control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#versioning-visibility-and-snapshot">Versioning, visibility and snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#vacuum">VACUUM</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/transaction.html#vacuum-parallel-execution">VACUUM Parallel Execution</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/transaction.html#vacuum-data">VACUUM Data</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/transaction.html#vacuum-jobs">VACUUM jobs</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/transaction.html#tracking-dropped-files">Tracking dropped files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html#lock-protocol">Lock Protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#granularity-locking">Granularity Locking</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#lock-mode-types-and-compatibility">Lock Mode Types And Compatibility</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/transaction.html#examples-using-locks">Examples using locks</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#locking-to-protect-unique-constraint">Locking to protect unique constraint</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#transaction-deadlock">Transaction Deadlock</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#transaction-lock-timeout">Transaction Lock Timeout</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html#transaction-isolation-level">Transaction Isolation Level</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#set-transaction-isolation-level">SET TRANSACTION ISOLATION LEVEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#get-transaction-isolation-level">GET TRANSACTION ISOLATION LEVEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#read-committed-isolation-level">READ COMMITTED Isolation Level</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/transaction.html#read-committed-update-re-evaluation">READ COMMITTED UPDATE RE-EVALUATION</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#repeatable-read-isolation-level">REPEATABLE READ Isolation Level</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#serializable-isolation-level">SERIALIZABLE Isolation Level</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#how-to-handle-dirty-record">How to Handle Dirty Record</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/transaction.html#transaction-termination-and-restoration">Transaction Termination and Restoration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/transaction.html#restarting-database">Restarting Database</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/trigger.html">Trigger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#create-trigger">CREATE TRIGGER</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#guidelines-for-trigger-definition">Guidelines for Trigger Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-definition">Trigger Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#event-time">Event Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-type">Trigger Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-event-type">Trigger Event Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-event-target">Trigger Event Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#combination-of-event-type-and-target">Combination of Event Type and Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-condition">Trigger Condition</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#correlation-name">Correlation Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-action">Trigger Action</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#trigger-s-comment">Trigger’s COMMENT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#alter-trigger">ALTER TRIGGER</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#id7">Trigger’s COMMENT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#drop-trigger">DROP TRIGGER</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#rename-trigger">RENAME TRIGGER</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#deferred-condition-and-action">Deferred Condition and Action</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#executing-deferred-condition-and-action">Executing Deferred Condition and Action</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#dropping-deferred-condition-and-action">Dropping Deferred Condition and Action</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#granting-trigger-authorization">Granting Trigger Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#trigger-on-replace-and-insert-on-duplicate-key-update">Trigger on REPLACE and INSERT … ON DUPLICATE KEY UPDATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#trigger-debugging">Trigger Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#viewing-trigger-execution-log">Viewing Trigger Execution Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/trigger.html#limiting-nested-trigger">Limiting Nested Trigger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/trigger.html#trigger-example">Trigger Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/jsp.html">Java Stored Function/Procedure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#introduction-to-java-stored-function-procedure">Introduction to Java Stored Function/Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#check-the-cubrid-conf-file">Check the cubrid.conf file</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#start-java-sp-server">Start Java SP Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#how-to-write-and-load-java-stored-function-procedure">How to Write and Load Java Stored Function/Procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#write-the-java-source-code">Write the Java source code</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#compile-the-java-source-code">Compile the Java source code</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#load-the-compiled-java-class-into-cubrid">Load the compiled Java class into CUBRID</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#publish-the-loaded-java-class">Publish the loaded Java class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#call-the-java-stored-function-procedure">Call the Java stored function/procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#using-call-statement">Using CALL Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#calling-from-sql-statement">Calling from SQL Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#calling-from-java-application">Calling from Java Application</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#using-server-side-internal-jdbc-driver">Using Server-side Internal JDBC Driver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#creating-connection">Creating Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#executing-sql-statements">Executing SQL Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#the-example-of-executing-statements">The example of executing statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#out-parameters-of-primitive-types">OUT Parameters of Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#out-parameters-of-set-types">OUT Parameters of Set Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#out-parameters-of-cubrid-oid-type">OUT Parameters of CUBRID OID type</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#returning-java-sql-resultset-in-java-stored-procedure">Returning java.sql.ResultSet in Java Stored Procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#getting-information-about-connection-client">Getting information about connection client</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#connecting-to-other-databases">Connecting to Other Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#java-native-interface-jni-support">Java Native Interface (JNI) Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#loadjava-utility">loadjava Utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#caution">Caution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#limitations-on-the-precision-of-in-out-parameters-and-a-return-value">Limitations on the precision of IN/OUT parameters and a return value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/jsp.html#appendix">Appendix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/jsp.html#table-of-supproting-jdbc-api">Table of Supproting JDBC API</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/jsp.html#java-sql-connection">java.sql.Connection</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/jsp.html#java-sql-statement">java.sql.Statement</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/jsp.html#java-sql-preparedstatement">java.sql.PreparedStatement</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/jsp.html#java-sql-callablestatement">java.sql.CallableStatement</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/jsp.html#java-sql-resultset">java.sql.ResultSet</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/jsp.html#java-sql-resultsetmetadata">java.sql.ResultSetMetaData</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/dblink.html">CUBRID DBLink</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#introduction-to-cubrid-dblink">Introduction to CUBRID DBLink</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#cubrid-dblink-diagram">CUBRID DBLink diagram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#homogeneous-dblink-diagram">Homogeneous DBLink diagram</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#heterogeneous-dblink-diagram">Heterogeneous DBLink diagram</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#gateway">GATEWAY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#cub-cas-cgw">cub_cas_cgw</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#cub-gateway">cub_gateway</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#shared-memory">Shared memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#start-gateway">Start GATEWAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#restarting-gateway">Restarting GATEWAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#checking-gateway-status">Checking GATEWAY Status</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#starting-the-gateway-together-when-the-cubrid-service-starts">Starting the GATEWAY together when the CUBRID service starts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#cubrid-dblink-settings">CUBRID DBLINK settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#heterogeneous-dblink-setting">Heterogeneous DBLink Setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#gateway-configuration-file">Gateway configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#gateway-parameter">GATEWAY Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#install-unixodbc">Install unixODBC</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#odbc-driver-information-setting">ODBC Driver information setting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#oracle-setting-for-dblink">Oracle Setting for DBLink</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#oracle-environment-configuration">Oracle Environment Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#mysql-configuration-for-dblink">MySQL Configuration for DBLink</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#mysql-environment-configuration">MySQL Environment Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#mariadb-configuration-for-dblink">MariaDB Configuration for DBLink</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#mariadb-environment-configuration">MariaDB Environment Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#how-to-use-cubrid-dblink">How to use Cubrid DBLink</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#notice">Notice</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/dblink.html#constraints">Constraints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#common-constraints">Common Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/dblink.html#cubrid-constraints">CUBRID Constraints</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/method.html">Method</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/method.html#method-type">Method Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/method.html#call-statement">CALL Statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/oodb.html">Class Inheritance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/oodb.html#class-attribute-and-method">Class Attribute and Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/oodb.html#order-rule-for-inheritance">Order Rule for Inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/oodb.html#inherit-clause">INHERIT Clause</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/oodb.html#add-superclass-clause">ADD SUPERCLASS Clause</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/oodb.html#drop-superclass-clause">DROP SUPERCLASS Clause</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/oodb.html#class-conflict-resolution">Class Conflict Resolution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/oodb.html#resolution-specifier">Resolution Specifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/oodb.html#superclass-conflict">Superclass Conflict</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#adding-a-super-class">Adding a super class</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#deleting-a-super-class">Deleting a super class</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#compatible-domains">Compatible Domains</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/oodb.html#sub-class-conflict">Sub class Conflict</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#adding-attributes-and-methods">Adding Attributes and Methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#dropping-attributes-and-methods">Dropping Attributes and Methods</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/oodb.html#schema-invariant">Schema Invariant</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#invariant-of-class-hierarchy">Invariant of class hierarchy</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#invariant-of-name">Invariant of name</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#invariant-of-inheritance">Invariant of inheritance</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#invariant-of-consistency">Invariant of consistency</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/oodb.html#rule-for-schema-changes">Rule for Schema Changes</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#conflict-resolution-rules">Conflict-Resolution Rules</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#domain-change-rules">Domain-Change Rules</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/oodb.html#class-hierarchy-rules">Class-Hierarchy Rules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/db_admin.html">Database Administration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/authorization.html">User Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#database-user">Database User</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#create-user">CREATE USER</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/authorization.html#user-s-comment">User’s COMMENT</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#alter-user">ALTER USER</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/authorization.html#user-s-comment-change">User’s COMMENT Change</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#drop-user">DROP USER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#grant">GRANT</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#revoke">REVOKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#alter-owner">ALTER … OWNER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/authorization.html#user-authorization-management-method">User Authorization Management METHOD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/set.html">SET</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/set.html#system-parameter">System Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/set.html#user-variables">User Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/kill.html">KILL</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/query/show.html">SHOW</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#desc-describe">DESC, DESCRIBE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#explain">EXPLAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-tables">SHOW TABLES</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-columns">SHOW COLUMNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-index">SHOW INDEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-collation">SHOW COLLATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-timezones">SHOW TIMEZONES</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-grants">SHOW GRANTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-create-table">SHOW CREATE TABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-create-view">SHOW CREATE VIEW</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-access-status">SHOW ACCESS STATUS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#show-exec-statistics">SHOW EXEC STATISTICS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/query/show.html#diagnostics">Diagnostics</a><ul>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-volume-header">SHOW VOLUME HEADER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-log-header">SHOW LOG HEADER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-archive-log-header">SHOW ARCHIVE LOG HEADER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-heap-header">SHOW HEAP HEADER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-heap-capacity">SHOW HEAP CAPACITY</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-slotted-page-header">SHOW SLOTTED PAGE HEADER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-slotted-page-slots">SHOW SLOTTED PAGE SLOTS</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-index-header">SHOW INDEX HEADER</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-index-capacity">SHOW INDEX CAPACITY</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-critical-sections">SHOW CRITICAL SECTIONS</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-transaction-tables">SHOW TRANSACTION TABLES</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-threads">SHOW THREADS</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-job-queues">SHOW JOB QUEUES</a></li>
<li class="toctree-l5"><a class="reference internal" href="sql/query/show.html#show-page-buffer-status">SHOW PAGE BUFFER STATUS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql/user_schema.html">User Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql/catalog.html">System Catalog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql/catalog.html#system-catalog-classes">System Catalog Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-class">_db_class</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-attribute">_db_attribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-domain">_db_domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-charset">_db_charset</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-collation">_db_collation</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-method">_db_method</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-meth-sig">_db_meth_sig</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-meth-arg">_db_meth_arg</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-meth-file">_db_meth_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-query-spec">_db_query_spec</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-index">_db_index</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-index-key">_db_index_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-auth">_db_auth</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-data-type">_db_data_type</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-partition">_db_partition</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-stored-procedure">_db_stored_procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-stored-procedure-args">_db_stored_procedure_args</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-server">_db_server</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-synonym">_db_synonym</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-user">db_user</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-authorization">db_authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-serial">db_serial</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-trigger">db_trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-ha-apply-info">db_ha_apply_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#dual">dual</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/catalog.html#system-catalog-virtual-class">System Catalog Virtual Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id26">DB_CLASS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-direct-super-class">DB_DIRECT_SUPER_CLASS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-vclass">DB_VCLASS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id30">DB_ATTRIBUTE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-attr-setdomain-elm">DB_ATTR_SETDOMAIN_ELM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id33">DB_CHARSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id35">DB_COLLATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id37">DB_METHOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id39">DB_METH_ARG</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-meth-arg-setdomain-elm">DB_METH_ARG_SETDOMAIN_ELM</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id42">DB_METH_FILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id44">DB_INDEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id46">DB_INDEX_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id48">DB_AUTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#db-trig">DB_TRIG</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id51">DB_PARTITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id53">DB_STORED_PROCEDURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id55">DB_STORED_PROCEDURE_ARGS</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id57">DB_SERVER</a></li>
<li class="toctree-l4"><a class="reference internal" href="sql/catalog.html#id59">DB_SYNONYM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sql/catalog.html#catalog-class-virtual-class-authorization">Catalog Class/Virtual Class Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql/catalog.html#querying-on-catalog">Querying on Catalog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="admin/index.html">CUBRID Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html">Controlling CUBRID Processes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-cubrid-service">Controlling CUBRID Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-database-server">Controlling Database Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-broker">Controlling Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-gateway">Controlling Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-cubrid-manager-server">Controlling CUBRID Manager Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-cubrid-ha">Controlling CUBRID HA</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#controlling-cubrid-java-stored-procedure-server">Controlling CUBRID Java Stored Procedure Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html#cubrid-services">CUBRID Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#registering-services">Registering Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-services">Starting Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#stopping-services">Stopping Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#restarting-services">Restarting Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#managing-service-status">Managing Service Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#cubrid-utility-logging">cubrid Utility Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html#database-server">Database Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-database-server">Starting Database Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#stopping-database-server">Stopping Database Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#restarting-database-server">Restarting Database Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#checking-database-server-status">Checking Database Server Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#limiting-database-server-access">Limiting Database Server Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#database-server-log">Database Server Log</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#error-log">Error Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#event-log">Event Log</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#database-server-errors">Database Server Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html#broker">Broker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-broker">Starting Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#stopping-broker">Stopping Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#restarting-broker">Restarting Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#checking-broker-status">Checking Broker Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#limiting-broker-access">Limiting Broker Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#packet-encryption">Packet Encryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#managing-a-specific-broker">Managing a Specific Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#dynamically-changing-broker-parameters">Dynamically Changing Broker Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#broker-configuration-information">Broker configuration information</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#check-cubrid-shard-id">Check CUBRID SHARD ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#broker-to-db-connection-test">Broker to DB Connection Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#broker-logs">Broker Logs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#checking-the-access-log">Checking the Access Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#checking-the-error-log">Checking the Error Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#managing-the-sql-log">Managing the SQL Log</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/control.html#broker-log-top">broker_log_top</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/control.html#cubrid-replay">cubrid_replay</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#cas-error">CAS Error</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html#gateway">Gateway</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-gateway">Starting Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#stopping-gateway">Stopping Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#restarting-gateway">Restarting Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#checking-gateway-status">Checking Gateway Status</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html#cubrid-manager-server">CUBRID Manager Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-the-cubrid-manager-server">Starting the CUBRID Manager Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#stopping-the-cubrid-manager-server">Stopping the CUBRID Manager Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#cubrid-manager-server-log">CUBRID Manager Server Log</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#configuring-cubrid-manager-server">Configuring CUBRID Manager Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#cubrid-manager-user-management-console">CUBRID Manager User Management Console</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/control.html#cubrid-java-stored-procedure-server">CUBRID Java Stored Procedure Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-cubrid-java-sp-server">Starting CUBRID Java SP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#stopping-cubrid-java-sp-server">Stopping CUBRID Java SP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#restarting-cubrid-java-sp-server">Restarting CUBRID Java SP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#checking-cubrid-java-sp-server-status">Checking CUBRID Java SP Server Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#starting-the-cubrid-java-sp-server-together-when-the-database-server-starts">Starting the CUBRID Java SP Server together when the database server starts</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#configuring-for-cubrid-java-sp-server">Configuring for CUBRID Java SP Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#environment-configuration-for-java-stored-function-procedure">Environment Configuration for Java Stored Function/Procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#java-sp-server-system-parameters">Java SP Server System Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#cubrid-java-sp-server-log">CUBRID Java SP Server Log</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#id12">Error Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/control.html#java-log">Java Log</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/control.html#cubrid-java-sp-server-errors">CUBRID Java SP Server Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/db_manage.html">Database Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/db_manage.html#database-users">Database Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/db_manage.html#databases-txt-file">databases.txt File</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/db_manage.html#database-volume">Database Volume</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/admin_utils.html">cubrid Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#cubrid-utility-logging">cubrid Utility Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#createdb">createdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#addvoldb">addvoldb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#deletedb">deletedb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#renamedb">renamedb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#alterdbhost">alterdbhost</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#copydb">copydb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#installdb">installdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#backupdb">backupdb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#backup-strategy-and-method">Backup Strategy and Method</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#managing-backup-files">Managing Backup Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#managing-archive-logs">Managing Archive Logs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#restoredb">restoredb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#restoring-strategy-and-procedure">Restoring Strategy and Procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#restoring-database-to-different-server">Restoring Database to Different Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#unloaddb">unloaddb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#loaddb">loaddb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#how-to-write-files-to-load-database">How to Write Files to Load Database</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/admin_utils.html#comment">Comment</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/admin_utils.html#command-line">Command Line</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/admin_utils.html#data-line">Data Line</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#migrating-database">Migrating Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#spacedb">spacedb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#compactdb">compactdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#optimizedb">optimizedb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#plandump">plandump</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#statdump">statdump</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#lockdb">lockdb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/admin_utils.html#output-contents">Output Contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#tranlist">tranlist</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#killtran">killtran</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#checkdb">checkdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#diagdb">diagdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#paramdump">paramdump</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#tde">tde</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#vacuumdb">vacuumdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#flashback">flashback</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#ha-commands">HA Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#locale-commands">Locale Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/admin_utils.html#timezone-commands">Timezone Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/config.html">System Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/config.html#configuring-the-database-server">Configuring the Database Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#scope-of-database-server-configuration">Scope of Database Server Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#changing-database-server-configuration">Changing Database Server Configuration</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#editing-the-configuration-file">Editing the Configuration File</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#using-sql-statements">Using SQL Statements</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#using-session-commands-of-the-csql-interpreter">Using Session Commands of the CSQL Interpreter</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#cubrid-conf-configuration-file-and-default-parameters">cubrid.conf Configuration File and Default Parameters</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#database-server-system-parameters">Database Server System Parameters</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#section-by-parameter">Section by Parameter</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#default-parameters">Default Parameters</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#connection-related-parameters">Connection-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#memory-related-parameters">Memory-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#disk-related-parameters">Disk-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#error-message-related-parameters">Error Message-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#concurrency-lock-related-parameters">Concurrency/Lock-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#logging-related-parameters">Logging-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#transaction-processing-related-parameters">Transaction Processing-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#statement-type-related-parameters">Statement/Type-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#thread-related-parameters">Thread-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#timezone-parameter">Timezone Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#query-plan-cache-related-parameters">Query Plan Cache-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#query-cache-related-parameters">Query Cache-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#utility-related-parameters">Utility-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#ha-related-parameters">HA-Related Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#other-parameters">Other Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/config.html#broker-configuration">Broker Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#cubrid-broker-conf-configuration-file-and-default-parameters">cubrid_broker.conf Configuration File and Default Parameters</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#broker-system-parameters">Broker System Parameters</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#id3">Default Parameters</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#broker-configuration-file-related-environment-variables">Broker Configuration File Related Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#common-parameters">Common Parameters</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#access">Access</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#logging">Logging</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#broker-server-cub-broker">Broker Server(cub_broker)</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="admin/config.html#parameter-by-broker">Parameter by Broker</a><ul>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#id5">Access</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#broker-app-server-cas">Broker App. Server(CAS)</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#transaction-query">Transaction &amp; Query</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#id6">Logging</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#shard">SHARD</a></li>
<li class="toctree-l5"><a class="reference internal" href="admin/config.html#etc">Etc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/config.html#ha-configuration">HA Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/config.html#shard-configuration">SHARD Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/systemtap.html">SystemTap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/systemtap.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/systemtap.html#installing-systemtap">Installing SystemTap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#checking-installation">Checking Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#version">Version</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/systemtap.html#related-terms">Related Terms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#marker">Marker</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#probe">Probe</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#asynchronous-events">Asynchronous Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/systemtap.html#using-systemtap-in-cubrid">Using SystemTap in CUBRID</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#building-cubrid-source">Building CUBRID source</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#running-systemtap-script">Running SystemTap script</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#printing-results">Printing Results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/systemtap.html#cubrid-markers">CUBRID markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#connection-markers">Connection markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#query-markers">Query markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#object-operation-markers">Object operation markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#index-operation-markers">Index operation markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#locking-markers">Locking markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#transaction-markers">Transaction markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#i-o-markers">I/O markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/systemtap.html#other-markers">Other markers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/scripts.html">cubrid scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/scripts.html#unloaddb-sh-script">unloaddb.sh script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/troubleshoot.html">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/troubleshoot.html#checking-sql-log">Checking SQL Log</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#sql-log-of-cas">SQL log of CAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#function-getting-cas-information">Function getting CAS information</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#application-log">Application log</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#slow-query">Slow query</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/troubleshoot.html#server-error-log">Server Error Log</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#detecting-overflow-keys-or-overflow-pages">Detecting Overflow Keys or Overflow Pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#detecting-log-recovery-time">Detecting log recovery time</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#detecting-a-deadlock">Detecting a Deadlock</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/troubleshoot.html#detecting-the-change-of-ha-status">Detecting the change of HA status</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#detecting-ha-split-brain">Detecting HA split-brain</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#detecting-fail-over-fail-back">Detecting Fail-over, Fail-back</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin/troubleshoot.html#failure-on-ha-start">Failure on HA Start</a><ul>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#typical-unrestorable-failure">Typical Unrestorable Failure</a></li>
<li class="toctree-l4"><a class="reference internal" href="admin/troubleshoot.html#how-to-fix-when-a-failure-on-ha-start">How to fix when a Failure on HA start</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="admin/ddl_audit.html">DDL Audit Log</a><ul>
<li class="toctree-l3"><a class="reference internal" href="admin/ddl_audit.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/ddl_audit.html#ddl-audit-log-file-name-convention">DDL Audit Log file name convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/ddl_audit.html#ddl-audit-logfile-format-of-cas">DDL Audit Logfile format of CAS</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/ddl_audit.html#ddl-audit-logfile-format-of-csql">DDL Audit Logfile format of CSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin/ddl_audit.html#ddl-audit-log-format-of-loaddb">DDL Audit Log format of LOADDB</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CUBRID HA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cubrid-ha-concept">CUBRID HA Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nodes-and-groups">Nodes and Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processes">Processes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#servers">Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#heartbeat-message">heartbeat Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#failover-and-failback">failover and failback</a></li>
<li class="toctree-l3"><a class="reference internal" href="#broker-mode">Broker Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cubrid-ha-features">CUBRID HA Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#duplexing-servers">Duplexing Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#duplexing-brokers">Duplexing Brokers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-multiplexing">Log Multiplexing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparation">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-databases-and-configuring-servers">Creating Databases and Configuring Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-and-verifying-cubrid-ha">Starting and Verifying CUBRID HA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-and-starting-broker-and-verifying-the-broker-status">Configuring and Starting Broker, and Verifying the Broker Status</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#environment-configuration">Environment Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cubrid-conf">cubrid.conf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ha-or-not">HA or Not</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access">Access</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cubrid-ha-conf">cubrid_ha.conf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#node">Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replication">Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sql-logging">SQL Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cubrid-broker-conf">cubrid_broker.conf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#access-target">Access Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-order">Access Order</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-limitation">Access Limitation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reconnection">Reconnection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#databases-txt">databases.txt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jdbc-configuration">JDBC Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cci-configuration">CCI Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#php-configuration">PHP Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-a-broker-to-db">Connecting a Broker to DB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#connection-process">Connection Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples-on-behaviours-by-configuration">Examples on Behaviours by Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-and-monitoring">Running and Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cubrid-heartbeat-utility">cubrid heartbeat Utility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#start">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stop">stop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copylogdb">copylogdb</a></li>
<li class="toctree-l4"><a class="reference internal" href="#applylogdb">applylogdb</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reload">reload</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replication-or-repl-start">replication(or repl) start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replication-or-repl-stop">replication(or repl) stop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#registering-ha-to-cubrid-service">Registering HA to cubrid service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applyinfo">applyinfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cubrid-changemode">cubrid changemode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monitoring-cubrid-manager-ha">Monitoring CUBRID Manager HA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#structures-of-ha">Structures of HA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-structure-of-ha">Basic Structure of HA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-slave-node-structure">Multiple-Slave Node Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-balancing-structure">Load Balancing Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-standby-server-structure">Multiple-Standby Server Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ha-constraints">HA Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operational-scenarios">Operational Scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#operation-scenario-during-read-write-service">Operation Scenario during Read/Write Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operation-scenario-during-read-service">Operation Scenario during Read Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operation-scenario-after-stopping-a-service">Operation Scenario after Stopping a Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-replica-replication-delay">Setting Replica Replication Delay</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-replication">Building Replication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#restoreslave">restoreslave</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-scenarios-of-building-replication">Example Scenarios of Building Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-slave-after-stopping-a-service">Add a Slave after Stopping a Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-another-slave-during-ha-service">Build Another Slave during HA Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-a-slave-during-service">Remove a Slave during Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-replica-during-service">Add a Replica during Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rebuild-a-slave-during-service">Rebuild a Slave during Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#detection-of-replication-mismatch">Detection of Replication Mismatch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-detect-replication-mismatch">How to Detect Replication Mismatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checksumdb">checksumdb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ha-error-messages">HA Error Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cas-process-cub-cas">CAS process(cub_cas)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replication-log-copy-process-copylogdb">Replication Log Copy Process(copylogdb)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replication-log-reflection-process-applylogdb">Replication Log Reflection Process(applylogdb)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rebuilding-replication-script">Rebuilding Replication Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ha-make-slavedb-sh-script">ha_make_slavedb.sh Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">CUBRID Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="security.html#packet-encryption">Packet Encryption</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security.html#requirements-of-secure-communication">Requirements of secure communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#packet-encryption-method">Packet encryption method</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#server-setup-for-packet-encryption">Server setup for packet encryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#supported-driver">Supported driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="security.html#acl-access-control-list">ACL (Access Control List)</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#authorization">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#tde-transparent-data-encryption">TDE (Transparent Data Encryption)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security.html#cubrid-tde-concept">CUBRID TDE Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#key-management">Key Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="security.html#level-key-management">2-Level Key Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#file-based-master-key-management">File-based Master Key Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="security.html#encryption-target">Encryption Target</a><ul>
<li class="toctree-l4"><a class="reference internal" href="security.html#permanent-data-encryption">Permanent Data Encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#temporary-data-encryption">Temporary Data Encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#log-data-encryption">Log Data Encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#dwb-encryption">DWB Encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#backup-encryption">Backup Encryption</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="security.html#encryption-algorithm">Encryption Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#table-encryption-checking">Table Encryption Checking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="security.html#show-create-table">SHOW CREATE TABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#inquiry-to-db-class">Inquiry to db_class</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#using-cubrid-diagdb-utility">Using cubrid diagdb utility</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="security.html#tde-on-ha">TDE on HA</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#when-tde-is-unavailable">When TDE is unavailable</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#tde-restriction">TDE Restriction</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shard.html">CUBRID SHARD</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shard.html#database-sharding">Database Sharding</a></li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#cubrid-shard-terminologies">CUBRID SHARD Terminologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#cubrid-shard-main-features">CUBRID SHARD Main Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="shard.html#middleware-structure">Middleware Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#selecting-a-shard-db-through-the-shard-sql-hint">Selecting a Shard DB through the Shard SQL Hint</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#transaction-support">Transaction Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="shard.html#configuration-example">Configuration Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#changing-the-shard-configurations">Changing the shard Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#starting-service-and-monitoring">Starting Service and Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#writing-a-sample">Writing a Sample</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#architecture-and-configuration">Architecture and Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="shard.html#architecture">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="shard.html#cubrid-broker-conf">cubrid_broker.conf</a></li>
<li class="toctree-l4"><a class="reference internal" href="shard.html#shard-connection-file-shard-connection-file">Shard Connection File(SHARD_CONNECTION_FILE)</a></li>
<li class="toctree-l4"><a class="reference internal" href="shard.html#shard-key-file-shard-key-file">Shard key file(SHARD_KEY_FILE)</a></li>
<li class="toctree-l4"><a class="reference internal" href="shard.html#setting-user-defined-hash-function">Setting User-Defined Hash Function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#running-and-monitoring">Running and Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#configuration-test">Configuration Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#cubrid-shard-log">CUBRID SHARD Log</a><ul>
<li class="toctree-l3"><a class="reference internal" href="shard.html#shard-proxy-log">SHARD PROXY Log</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#shard-cas-log">SHARD CAS Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shard.html#constraints">Constraints</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/jdbc.html">JDBC Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/jdbc.html#jdbc-overview">JDBC Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/jdbc.html#installing-and-configuring-jdbc">Installing and Configuring JDBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/jdbc.html#jdbc-programming">JDBC Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#configuration-connection">Configuration Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#connecting-with-datasource">Connecting with DataSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#checking-sql-log">Checking SQL LOG</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#checking-foreign-key-information">Checking Foreign Key Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#using-object-identifiers-oids-and-collections">Using Object Identifiers (OIDs) and Collections</a><ul>
<li class="toctree-l5"><a class="reference internal" href="api/jdbc.html#using-oids">Using OIDs</a></li>
<li class="toctree-l5"><a class="reference internal" href="api/jdbc.html#using-collections">Using Collections</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#getting-auto-increment-column-value">Getting Auto Increment Column Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#using-blob-clob">Using BLOB/CLOB</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#setboolean">setBoolean</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/jdbc.html#jdbc-error-codes-and-error-messages">JDBC Error Codes and Error Messages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/jdbc.html#jdbc-sample-program">JDBC Sample Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/jdbc.html#jdbc-api">JDBC API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/cci_index.html">CCI Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/cci.html">CCI Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/cci.html#cci-programming">CCI Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/cci.html#writing-cci-applications">Writing CCI Applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cci.html#configuring-library">Configuring Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cci.html#using-blob-clob">Using BLOB/CLOB</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cci.html#cci-error-codes-and-error-messages">CCI Error Codes and Error Messages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/cci.html#cci-sample-program">CCI Sample Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/cciapi.html">CCI API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-bind-param">cci_bind_param</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-bind-param-array">cci_bind_param_array</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-bind-param-array-size">cci_bind_param_array_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-bind-param-ex">cci_bind_param_ex</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-blob-free">cci_blob_free</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-blob-new">cci_blob_new</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-blob-read">cci_blob_read</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-blob-size">cci_blob_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-blob-write">cci_blob_write</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-cancel">cci_cancel</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-clob-free">cci_clob_free</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-clob-new">cci_clob_new</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-clob-read">cci_clob_read</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-clob-size">cci_clob_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-clob-write">cci_clob_write</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-close-query-result">cci_close_query_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-close-req-handle">cci_close_req_handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-get">cci_col_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-seq-drop">cci_col_seq_drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-seq-insert">cci_col_seq_insert</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-seq-put">cci_col_seq_put</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-set-add">cci_col_set_add</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-set-drop">cci_col_set_drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-col-size">cci_col_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-connect">cci_connect</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-connect-ex">cci_connect_ex</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-connect-with-url">cci_connect_with_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-connect-with-url-ex">cci_connect_with_url_ex</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-cursor-update">cci_cursor_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-datasource-borrow">cci_datasource_borrow</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-datasource-change-property">cci_datasource_change_property</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-datasource-create">cci_datasource_create</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-datasource-destroy">cci_datasource_destroy</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-datasource-release">cci_datasource_release</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-disconnect">cci_disconnect</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-end-tran">cci_end_tran</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-escape-string">cci_escape_string</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-execute">cci_execute</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-execute-array">cci_execute_array</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-execute-batch">cci_execute_batch</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-execute-result">cci_execute_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-fetch">cci_fetch</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-fetch-buffer-clear">cci_fetch_buffer_clear</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-fetch-sensitive">cci_fetch_sensitive</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-fetch-size">cci_fetch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-autocommit">cci_get_autocommit</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-bind-num">cci_get_bind_num</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-cas-info">cci_get_cas_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-class-num-objs">cci_get_class_num_objs</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-collection-domain">CCI_GET_COLLECTION_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-cur-oid">cci_get_cur_oid</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-data">cci_get_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-db-parameter">cci_get_db_parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-db-version">cci_get_db_version</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-err-msg">cci_get_err_msg</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-error-msg">cci_get_error_msg</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-holdability">cci_get_holdability</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-last-insert-id">cci_get_last_insert_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-login-timeout">cci_get_login_timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-query-plan">cci_get_query_plan</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-query-info-free">cci_query_info_free</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-query-timeout">cci_get_query_timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info">cci_get_result_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-attr-name">CCI_GET_RESULT_INFO_ATTR_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-class-name">CCI_GET_RESULT_INFO_CLASS_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-is-non-null">CCI_GET_RESULT_INFO_IS_NON_NULL</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-name">CCI_GET_RESULT_INFO_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-precision">CCI_GET_RESULT_INFO_PRECISION</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-scale">CCI_GET_RESULT_INFO_SCALE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-result-info-type">CCI_GET_RESULT_INFO_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-is-set-type">CCI_IS_SET_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-is-multiset-type">CCI_IS_MULTISET_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-is-sequence-type">CCI_IS_SEQUENCE_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-is-collection-type">CCI_IS_COLLECTION_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-get-version">cci_get_version</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-init">cci_init</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-is-holdable">cci_is_holdable</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-is-updatable">cci_is_updatable</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-next-result">cci_next_result</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-oid">cci_oid</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-oid-get">cci_oid_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-oid-get-class-name">cci_oid_get_class_name</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-oid-put">cci_oid_put</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-oid-put2">cci_oid_put2</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-prepare">cci_prepare</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-prepare-and-execute">cci_prepare_and_execute</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-property-create">cci_property_create</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-property-destroy">cci_property_destroy</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-property-get">cci_property_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-property-set">cci_property_set</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-query-result-free">cci_query_result_free</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-query-result-err-no">CCI_QUERY_RESULT_ERR_NO</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-query-result-err-msg">CCI_QUERY_RESULT_ERR_MSG</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-query-result-result">CCI_QUERY_RESULT_RESULT</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-query-result-stmt-type">CCI_QUERY_RESULT_STMT_TYPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-register-out-param">cci_register_out_param</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-row-count">cci_row_count</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-savepoint">cci_savepoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-schema-info">cci_schema_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-allocators">cci_set_allocators</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-autocommit">cci_set_autocommit</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-db-parameter">cci_set_db_parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-element-type">cci_set_element_type</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-free">cci_set_free</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-get">cci_set_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-holdability">cci_set_holdability</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-isolation-level">cci_set_isolation_level</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-lock-timeout">cci_set_lock_timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-login-timeout">cci_set_login_timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-make">cci_set_make</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-max-row">cci_set_max_row</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-query-timeout">cci_set_query_timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/cciapi.html#cci-set-size">cci_set_size</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/php.html">PHP Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/php.html#installing-and-configuring-php">Installing and Configuring PHP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#for-linux">For Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#for-windows">For Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/php.html#building-cubrid-php-driver-from-source-code">Building CUBRID PHP Driver from Source Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#id1">For Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#id2">For Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/php.html#php-programming">PHP Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#connecting-to-a-database">Connecting to a Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#transactions-and-auto-commit">Transactions and Auto-Commit</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/php.html#processing-queries">Processing Queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/php.html#php-api">PHP API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/pdo.html">PDO Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/pdo.html#installing-and-configuring-pdo">Installing and Configuring PDO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/pdo.html#building-cubrid-php-driver-from-source-code">Building CUBRID PHP Driver from Source Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/pdo.html#pdo-programming">PDO Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#data-source-name-dsn">Data Source Name (DSN)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#predefined-constants">Predefined Constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/pdo.html#pdo-sample-program">PDO Sample Program</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#verifying-cubrid-pdo-driver-version">Verifying CUBRID PDO Driver Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#connecting-to-cubrid">Connecting to CUBRID</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#executing-a-select-statement">Executing a SELECT Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#executing-an-update-statement">Executing an UPDATE Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#using-prepare-and-bind">Using prepare and bind</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#using-the-pdo-getattribute-function">Using the PDO::getAttribute() Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/pdo.html#cubrid-pdo-extensions">CUBRID PDO Extensions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/pdo.html#pdo-api">PDO API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/odbc.html">ODBC Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/odbc.html#configuring-and-environment-odbc">Configuring and Environment ODBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/odbc.html#odbc-programming">ODBC Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/odbc.html#configuring-connection-string">Configuring Connection String</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/odbc.html#asp-sample-program">ASP Sample Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/odbc.html#odbc-api">ODBC API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/oledb.html">OLE DB Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/oledb.html#installing-and-configuring-ole-db">Installing and Configuring OLE DB</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/oledb.html#ole-db-programming">OLE DB Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/oledb.html#using-data-link-properties-dialog-box">Using Data Link Properties Dialog Box</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/oledb.html#configuring-connection-string">Configuring Connection String</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/oledb.html#multi-threaded-programming-in-net-environment">Multi-Threaded Programming in .NET Environment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/oledb.html#ole-db-api">OLE DB API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/adodotnet.html">ADO.NET Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/adodotnet.html#installing-and-configuring-ado-net">Installing and Configuring ADO.NET</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/adodotnet.html#ado-net-programming">ADO.NET Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#a-simple-query-retrieve-code">A Simple Query/Retrieve Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#batch-commands">batch Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#connection-string">Connection String</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#cubrid-collections">CUBRID Collections</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#cubrid-blob-clob">CUBRID BLOB/CLOB</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#cubrid-metadata-support">CUBRID Metadata Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#datatable-support">DataTable Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#transactions">Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#working-with-parameters">Working with Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/adodotnet.html#error-codes-and-messages">Error Codes and Messages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/adodotnet.html#ado-net-api">ADO.NET API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/perl.html">Perl Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/perl.html#installing-and-configuring-perl">Installing and Configuring Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/perl.html#perl-api">Perl API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/python.html">Python Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/python.html#installing-and-configuring-python">Installing and Configuring Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/python.html#linux-unix">Linux/UNIX</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/python.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/python.html#python-programming">Python Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/python.html#python-sample-program">Python Sample Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/python.html#python-api">Python API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/ruby.html">Ruby Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/ruby.html#installing-and-configuring-ruby">Installing and Configuring Ruby</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/ruby.html#ruby-sample-program">Ruby Sample Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/ruby.html#ruby-api">Ruby API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/node_js.html">Node.js Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/node_js.html#installing-node-js">Installing Node.js</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/node_js.html#cubrid-node-js-api">CUBRID Node.js API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_note/index.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_note/release_note_latest_ver.html">11.3 Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release_note/release_note_latest_ver.html#release-notes-information">Release Notes Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_note/release_note_latest_ver.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release_note/release_note_latest_ver.html#driver-compatibility">Driver Compatibility</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="release_note/release_note_latest_ver.html#changes">11.3 Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_note/release_note_latest_ver.html#cautions">Cautions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release_note/release_note_latest_ver.html#new-cautions">New Cautions</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_note/release_note_latest_ver.html#existing-cautions">Existing Cautions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release_note/index.html#general-information">General Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release_note/index.html#revision-history">Revision history</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_note/index.html#bug-reports-and-user-feedback">Bug Reports and User Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_note/index.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_note/index.html#additional-information">Additional Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_note/index.html#note-on-drivers">Note on Drivers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CUBRID</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>CUBRID HA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/ha.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cubrid-ha">
<h1>CUBRID HA<a class="headerlink" href="#cubrid-ha" title="Permalink to this headline">¶</a></h1>
<p>High Availability (HA) refers to a feature to provide uninterrupted service in the event of hardware, software, or network failure. This ability is a critical element in the network computing area where services should be provided 24/7. An HA system consists of more than two server systems, each of which provides uninterrupted services, even when a failure occurs in one of them.</p>
<p>CUBRID HA is an implementation of High Availability. CUBRID HA ensures database synchronization among multiple servers when providing service. When an unexpected failure occurs in the system which is operating services, this feature minimizes the service down time by allowing the other system to carry out the service automatically.</p>
<p>CUBRID HA is in a shared-nothing structure. To synchronize data from an active server to a standby server, CUBRID HA executes the following two steps.</p>
<ol class="arabic simple">
<li>Transaction log multiplexing: Replicates the transaction logs created by an active server to another node in real time.</li>
<li>Transaction log reflection: Analyzes replicated transaction logs in real time and reflects the data to a standby server.</li>
</ol>
<p>CUBRID HA executes the steps described above in order to always maintain data synchronization between an active server and a standby server. For this reason, if an active server is not working properly because of a failure occurring in the master node that had been providing service, the standby server of the slave node provides service instead of the failed server. CUBRID HA monitors the status of the system and CUBRID in real time. It uses heartbeat messages to execute an automatic failover when a failure occurs.</p>
<img alt="_images/image13.png" src="_images/image13.png" />
<div class="section" id="cubrid-ha-concept">
<h2>CUBRID HA Concept<a class="headerlink" href="#cubrid-ha-concept" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nodes-and-groups">
<h3>Nodes and Groups<a class="headerlink" href="#nodes-and-groups" title="Permalink to this headline">¶</a></h3>
<p>A node is a logical unit that makes up CUBRID HA. It can become one of the following nodes according to its status: master node, slave node, or replica node.</p>
<ul class="simple">
<li><strong>Master node</strong> : A node to be replicated. It provides all services which are read, write, etc. using an active server.</li>
<li><strong>Slave node</strong> : A node that has the same information as a master node. Changes made in the master node are automatically reflected to the slave node. It provides the read service using a standby server, and a failover will occur when the master node fails.</li>
<li><strong>Replica node</strong> : A node that has the same information as a master node. Changes made in the master node are automatically reflected to the replica node. It provides the read service using a standby server, and no failover will occur when the master node fails.</li>
</ul>
<p>The CUBRID HA group consists of the nodes described above. You can configure the members of this group by using the <strong>ha_node_list</strong> and <strong>ha_replica_list</strong> in the <strong>cubrid_ha.conf</strong> file. Nodes in a group have the same information. They exchange status checking messages periodically and a failover will occurs when the master node fails.</p>
<p>A node includes the master process (cub_master), the database server process (cub_server), the replication log copy process (copylogdb), the replication log reflection process (applylogdb), etc.</p>
<img alt="_images/image14.png" src="_images/image14.png" />
</div>
<div class="section" id="processes">
<h3>Processes<a class="headerlink" href="#processes" title="Permalink to this headline">¶</a></h3>
<p>A CUBRID HA node consists of one master process (cub_master), one or more database server processes (cub_server), one or more replication log copy processes (copylogdb), and one or more replication log reflection processes (applylogdb). When a database is configured, database server processes, replication log copy processes, and replication log reflection processes will start. Because copy and reflection of a replication log are executed by different processes, the delay in replicating reflections does not affect the transaction that is being executed.</p>
<ul class="simple">
<li><strong>Master process (cub_master)</strong> : Exchanges heartbeat messages to control the internal management processes of CUBRID HA.</li>
<li><strong>Database server process (cub_server)</strong> : Provides services such as read or write to the user. For details, see <a class="reference internal" href="#ha-server"><span class="std std-ref">Servers</span></a>.</li>
<li><strong>Replication log copy process (copylogdb)</strong> : Copies all transaction logs in a group. When the replication log copy process requests a transaction log from the database server process of the target node, the database server process returns the corresponding log. The location of copied transaction logs can be configured in the <strong>ha_copy_log_base</strong> of <strong>cubrid_ha.conf</strong>. Use <a class="reference internal" href="#cubrid-applyinfo"><span class="std std-ref">applyinfo</span></a> utility to verify the information of copied replication logs. The replication log copy process has following two modes: SYNC and ASYNC. You can configure it with the <strong>ha_copy_sync_mode</strong> of <strong>cubrid_ha.conf</strong>. For details on these modes, see <a class="reference internal" href="#log-multiplexing"><span class="std std-ref">Log Multiplexing</span></a>.</li>
</ul>
<img alt="_images/image15.png" src="_images/image15.png" />
<ul class="simple">
<li><strong>Replication log reflection process (applylogdb)</strong> : Reflects the log that has been copied by the replication log copy process to a node. The information of reflected replications is stored in the internal catalog (db_ha_apply_info). You can use the <a class="reference internal" href="#cubrid-applyinfo"><span class="std std-ref">applyinfo</span></a> utility to verify this information.</li>
</ul>
<img alt="_images/image16.png" src="_images/image16.png" />
</div>
<div class="section" id="servers">
<span id="ha-server"></span><h3>Servers<a class="headerlink" href="#servers" title="Permalink to this headline">¶</a></h3>
<p>Here, the word “server” is a logical representation of database server processes. Depending on its status, a server can be either an active server or a standby server.</p>
<ul class="simple">
<li><strong>Active server</strong> : A server that belongs to a master node; the status is active. An active server provides all services, including read, write, etc. to the user.</li>
<li><strong>Standby server</strong> : A standby server that belongs to a non-master node; the status is standby. A standby server provides only the read service to the user.</li>
</ul>
<p>The server status changes based on the status of the node. You can use the <a class="reference internal" href="#cubrid-changemode"><span class="std std-ref">cubrid changemode</span></a> utility to verify server status. The maintenance mode exists for operational convenience and you can change it by using the <strong>cubrid changemode</strong> utility.</p>
<img alt="_images/image17.png" src="_images/image17.png" />
<ul class="simple">
<li><strong>active</strong> : The status of servers that run on a master node is usually active. In this status, all services including read, write, etc. are provided.</li>
<li><strong>standby</strong> : The status of servers that run on a slave node or a replica node is standby. In this status, only the read service is provided.</li>
<li><strong>maintenance</strong> : The status of servers can be manually changed for operational convenience is maintenance. In this status, only a csql can access and no service is provided to the user.</li>
<li><strong>to-be-active</strong> : The status in which a standby server will become active for reasons such as failover, etc. is to-be-active. In this status, servers prepare to become active by reflecting transaction logs from the existing master node to its own server. The node in this status can accept only SELECT query.</li>
<li>Other : This status is internally used.</li>
</ul>
<p>When the node status is changed, on cub_master process log and cub_server process log, following error messages are saved. But, they are saved only when the value of <strong>error_log_level</strong> in <strong>cubrid.conf</strong> is <strong>error</strong> or less.</p>
<ul>
<li><p class="first">The following log information of cub_master process is saved on <strong>$CUBRID/log/</strong><em>&lt;hostname&gt;</em><strong>_master.err</strong> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HA</span> <span class="n">generic</span><span class="p">:</span> <span class="n">Send</span> <span class="n">changemode</span> <span class="n">request</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span><span class="o">.</span> <span class="p">(</span><span class="n">state</span><span class="p">:</span><span class="mi">1</span><span class="p">[</span><span class="n">active</span><span class="p">],</span> <span class="n">args</span><span class="p">:[</span><span class="n">cub_server</span> <span class="n">demodb</span> <span class="p">],</span> <span class="n">pid</span><span class="p">:</span><span class="mi">25728</span><span class="p">)</span><span class="o">.</span>
<span class="n">HA</span> <span class="n">generic</span><span class="p">:</span> <span class="n">Receive</span> <span class="n">changemode</span> <span class="n">response</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">server</span><span class="o">.</span> <span class="p">(</span><span class="n">state</span><span class="p">:</span><span class="mi">1</span><span class="p">[</span><span class="n">active</span><span class="p">],</span> <span class="n">args</span><span class="p">:[</span><span class="n">cub_server</span> <span class="n">demodb</span> <span class="p">],</span> <span class="n">pid</span><span class="p">:</span><span class="mi">25728</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p class="first">The following log information of cub_server is saved on <strong>$CUBRID/log/server/</strong><em>&lt;db_name&gt;_&lt;date&gt;_&lt;time&gt;</em><strong>.err</strong> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Server</span> <span class="n">HA</span> <span class="n">mode</span> <span class="ow">is</span> <span class="n">changed</span> <span class="kn">from</span> <span class="s1">&#39;to-be-active&#39;</span> <span class="n">to</span> <span class="s1">&#39;active&#39;</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="heartbeat-message">
<h3>heartbeat Message<a class="headerlink" href="#heartbeat-message" title="Permalink to this headline">¶</a></h3>
<p>As a core element to provide HA, it is a message exchanged among master, slave, and replica nodes to monitor the status of other nodes. A master process periodically exchanges heartbeat messages with all other master processes in the group. A heartbeat message is exchanged through the UDP port configured in the <strong>ha_port_id</strong> parameter of <strong>cubrid_ha.conf</strong>. The exchange interval of heartbeat messages is determined by an internally configured value.</p>
<p>When the master node fails, a failover occurs to a slave node.</p>
<img alt="_images/image18.png" src="_images/image18.png" />
</div>
<div class="section" id="failover-and-failback">
<h3>failover and failback<a class="headerlink" href="#failover-and-failback" title="Permalink to this headline">¶</a></h3>
<p>A failover means that the highest priority slave node automatically becomes a new master node when the original master node fails to provide services due to a failure. A master process calculates scores for all nodes in the CUBRID HA group based on the collected information, promotes slave nodes to master modes when it is necessary, and then notifies the management process of the changes it has made.</p>
<p>A failback means that the previously failed master node automatically becomes a master node back after the failure node is restored. The CUBRID HA does not currently support this functionality.</p>
<img alt="_images/image19.png" src="_images/image19.png" />
<p>If a heartbeat message fails to deliver, a failover will occur. For this reason, servers with unstable connection may experience failover even though no actual failures occur. To prevent a failover from occurring in the situation described above, configure <strong>ha_ping_hosts</strong>. Configuring <strong>ha_ping_hosts</strong> will send a ping message to the hosts specified in <strong>ha_ping_hosts</strong> in order to verify whether the network is stable or not when a heartbeat message fails to deliver. For details on configuring <strong>ha_ping_hosts</strong>, see <a class="reference internal" href="#cubrid-ha-conf"><span class="std std-ref">cubrid_ha.conf</span></a>.</p>
</div>
<div class="section" id="broker-mode">
<span id="id1"></span><h3>Broker Mode<a class="headerlink" href="#broker-mode" title="Permalink to this headline">¶</a></h3>
<p>A broker can access a server with one of the following modes: <strong>Read Write</strong>, <strong>Read Only</strong> or <strong>Standby Only</strong>. This configuration value is determined by a user.</p>
<p>A broker finds and connects to a suitable DB server by trying to establish a connection in the order of DB server connections; this is, if it fails to establish a connection, it tries another connection to the next DB server defined until it reaches the last DB server. If no connection is made even after trying all servers, the broker fails to connect to a DB server.</p>
<p>For details on how to configure broker mode, see <a class="reference internal" href="#ha-cubrid-broker-conf"><span class="std std-ref">cubrid_broker.conf</span></a>.</p>
<p>DB connection is affected by <strong>PREFERRED_HOSTS</strong>, <strong>CONNECT_ORDER</strong> and <strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong> parameters in <strong>cubrid_broker.conf</strong>. See <a class="reference internal" href="#ha-connect-broker-db"><span class="std std-ref">Connecting a Broker to DB</span></a> for further information.</p>
<p>The below is the description if the above parameters are not specified.</p>
<p><strong>Read Write</strong></p>
<p>“ACCESS_MODE=RW”</p>
<p>A broker that provides read and write services. This broker is usually connected to an active server. If there is no active server, this broker will be connected to a standby server temporarily. Therefore, a Read Write broker can be temporarily connected to a standby server.</p>
<p>When the broker temporarily establishes a connection to a standby server, it will disconnect itself from the standby server at the end of every transaction so that it can attempt to find an active server at the beginning of the next transaction. When it is connected to the standby server, only read service is available. Any write requests will result in a server error.</p>
<p>The following picture shows how a broker connects to the host through the <strong>db-host</strong> configuration.</p>
<img alt="_images/image20.png" src="_images/image20.png" />
<p>The broker tries to connect as the order of <em>B</em>, <em>C</em>, <em>A</em> because db-host in databases.txt is “node B:node C:node A”. At this time, “node B:node C:node A” specified in db-host is the real host names defined in the /etc/hosts file.</p>
<ul class="simple">
<li>Example 1.  <em>node B</em> is crashed, <em>node C</em> is in standby status, and <em>node A</em> is in active status. Therefore, at last, the broker connects to <em>node A</em>.</li>
<li>Example 2.  <em>node B</em> is crashed, and <em>node C</em> is in active status. Therefore, at last, the broker connects to <em>node C</em>.</li>
</ul>
<p><strong>Read Only</strong></p>
<p>“ACCESS_MODE=RO”</p>
<p>A broker that provides the read service. This broker is connected to a standby server if possible. Therefore, the Read Only broker can be connected to an active server temporarily.</p>
<p>Once it establishes a connection with an active server, it will maintain that connection until the time specified by <a class="reference internal" href="admin/config.html#reconnect-time"><span class="std std-ref">RECONNECT_TIME</span></a>. After RECONNECT_TIME, the broker tries to reconnect as disconnecting the old connection. Or you can reconnect to the standby server by running <strong>cubrid broker reset</strong>. If a write request is delivered to the Read Only broker, an error occurs in the broker; therefore, only the read service will be available even if it is connected to an active server.</p>
<p>The following picture shows how a broker connects to the host through the <strong>db-host</strong> configuration.</p>
<img alt="_images/image21.png" src="_images/image21.png" />
<p>The broker tries to connect as the order of <em>A</em>, <em>B</em>, <em>C</em> because db-host in databases.txt is “node A:node B:node C”. At this time, “node A:node B:node C” specified in db-host is the real host names defined in the /etc/hosts file.</p>
<ul class="simple">
<li>Example 1.  <em>node A</em> is in active status, <em>node B</em> is in standby status. Therefore, at last, the broker connects to <em>node B</em>.</li>
<li>Example 2.  <em>node A</em> is in active status, <em>node B</em> is crashed, and <em>node C</em> is in standby status. Therefore, at last, the broker connects to <em>node C</em>.</li>
<li>Example 3.  <em>node A</em> is in active status, <em>node B</em> and <em>node C</em> are crashed. Therefore, at last, the broker connects to <em>node A</em>.</li>
</ul>
<p><strong>Standby Only</strong></p>
<p>“ACCESS_MODE=SO”</p>
<p>A broker that provides the read service. This broker can only be connected to a standby server. If no standby server exists, no service will be provided.</p>
<p>The following picture shows how a broker connects to the host through the <strong>db-host</strong> configuration.</p>
<img alt="_images/image22.png" src="_images/image22.png" />
<p>The broker tries to connect as the order of <em>A</em>, <em>B</em>, <em>C</em> because db-host in databases.txt is “node A:node B:node C”. At this time, “node A:node B:node C” specified in db-host is the real host names defined in the /etc/hosts file.</p>
<ul class="simple">
<li>Example 1.  <em>node A</em> is in active status, <em>node B</em> is in standby status. Therefore, at last, the broker connects to <em>node B</em>.</li>
<li>Example 2.  <em>node A</em> is in active status, <em>node B</em> is crashed, and <em>node C</em> is in standby status. Therefore, at last, the broker connects to <em>node C</em>.</li>
<li>Example 3.  <em>node A</em> is in active status, <em>node B</em> and <em>node C</em> are crashed. Therefore, at last, the broker does not connect to any node. This is the difference with Read Only broker.</li>
</ul>
</div>
</div>
<div class="section" id="cubrid-ha-features">
<h2>CUBRID HA Features<a class="headerlink" href="#cubrid-ha-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="duplexing-servers">
<h3>Duplexing Servers<a class="headerlink" href="#duplexing-servers" title="Permalink to this headline">¶</a></h3>
<p>Duplexing servers is building a system by configuring duplicate hardware equipment to provide CUBRID HA. This method will prevent any interruptions in a server in case of occurring a hardware failure.</p>
<p><strong>Server failover</strong></p>
<p>A broker defines server connection order and connects to a server according to the defined order. If the connected server fails, the broker connects to the server with the next highest priority. This requires no processing in the application side. The actions taken when the broker connects to another server may differ according to the current mode of the broker. For details on the server connection order and configuring broker mode, see <a class="reference internal" href="#ha-cubrid-broker-conf"><span class="std std-ref">cubrid_broker.conf</span></a>.</p>
<img alt="_images/image24.png" src="_images/image24.png" />
<p><strong>Server failback</strong></p>
<p>CUBRID HA does not automatically support server failback. Therefore, to manually apply failback, restore the master node that has been abnormally terminated and run it as a slave node, terminate the node that has become the master from the slave due to failover, and finally, change the role of each node again.</p>
<p>For example, when <em>nodeA</em> is the master and <em>nodeB</em> is the slave, <em>nodeB</em> becomes the master and <em>nodeA</em> becomes the slave after a failover. After terminating <em>nodeB</em> (<strong>cubrid heartbeat stop</strong>) check (<strong>cubrid heartbeat status</strong>) whether the status of <em>nodeA</em> has become active. Start (<strong>cubrid heartbeat start</strong>) <em>nodeB</em> and it will become the slave.</p>
</div>
<div class="section" id="duplexing-brokers">
<span id="id2"></span><h3>Duplexing Brokers<a class="headerlink" href="#duplexing-brokers" title="Permalink to this headline">¶</a></h3>
<p>As a 3-tier DBMS, CUBRID has middleware called the broker which relays applications and database servers. To provide HA, the broker also requires duplicate hardware equipment. This method will prevent any interruptions in a broker in case of occurring a hardware failure.</p>
<p>The configuration of broker redundancy is not determined by the configuration of server redundancy; it can be user-defined. In addition, it can be separated by piece of individual equipment.</p>
<p>To use the failover and failback functionalities of a broker, the <strong>altHosts</strong> attribute must be added to the connection URL of the JDBC, CCI, or PHP. For a description of this, see JDBC Configuration, CCI Configuration and PHP Configuration.</p>
<p>To set a broker, configure the <strong>cubrid_broker.conf</strong> file. To set the order of failovers of a database server, configure the <strong>databases.txt</strong> file. For more information, see <a class="reference internal" href="#quick-broker-config"><span class="std std-ref">Configuring and Starting Broker, and Verifying the Broker Status</span></a>.</p>
<p>The following is an example in which two Read Write (RW) brokers are configured. When the first connection broker of the application URL is set to <em>broker B1</em> and the second connection broker to <em>broker B2</em>, the application connects to <em>broker B2</em> when it cannot connect to <em>broker B1</em>. When <em>broker B1</em> becomes available again, the application reconnects to <em>broker B1</em>.</p>
<img alt="_images/image25.png" src="_images/image25.png" />
<p>The following is an example in which the Read Write (RW) broker and the Read Only (RO) broker are configured in each piece of equipment of the master node and the slave node. First, the <em>app1</em> and the <em>app2</em> URL connect to <em>broker A1</em> (RW) and <em>broker B2</em> (RO), respectively. The second connection (altHosts) is made to <em>broker A2</em> (RO) and <em>broker B1</em> (RW). When equipment that includes <em>nodeA</em> fails, app1 and the app2 connect to the broker that includes <em>nodeB</em>.</p>
<img alt="_images/image26.png" src="_images/image26.png" />
<p>The following is an example of a configuration in which broker equipment includes one Read Write broker (master node) and two Preferred Host Read Only brokers (slave nodes). The Preferred Host Read Only brokers are connected to nodeB and nodeC to distribute the reading load.</p>
<img alt="_images/image27.png" src="_images/image27.png" />
<p><strong>Broker failover</strong></p>
<p>The broker failover is not automatically failed over by the settings of system parameters. It is available in the JDBC, CCI, and PHP applications only when broker hosts are configured in the <strong>altHosts</strong> of the connection URL. Applications connect to the broker with the highest priority. When the connected broker fails, the application connects to the broker with the next highest priority. Configuring the <strong>altHosts</strong> of the connection URL is the only necessary action, and it is processed in the JDBC, CCI, and PHP drivers.</p>
<p><strong>Broker failback</strong></p>
<p>If the failed broker is recovered after a failover, the connection to the existing broker is terminated and a new connection is established with the recovered broker which has the highest priority. This requires no processing in the application side as it is processed within the JDBC, CCI, and PHP drivers. Execution time of failback depends on the value configured in JDBC connection URL. For details, see <a class="reference internal" href="#ha-jdbc-conf"><span class="std std-ref">JDBC Configuration</span></a>.</p>
</div>
<div class="section" id="log-multiplexing">
<span id="id3"></span><h3>Log Multiplexing<a class="headerlink" href="#log-multiplexing" title="Permalink to this headline">¶</a></h3>
<p>CUBRID HA keeps every node in the CUBRID HA group with the identical structure by copying and reflecting transaction logs to all nodes included in the CUBRID HA group. As the log copy structure of CUBRID HA is a mutual copy between the master and the slave nodes, it has a disadvantage of increasing the size of a log volume. However, it has an advantage of flexibility in terms of configuration and failure handling, comparing to the chain-type copy structure.</p>
<img alt="_images/image28.png" src="_images/image28.png" />
<p>The transaction log copy modes include <strong>SYNC</strong> and <strong>ASYNC</strong>. This value can be configured by the user in <a class="reference internal" href="#cubrid-ha-conf"><span class="std std-ref">cubrid_ha.conf</span></a> file.</p>
<p><strong>SYNC Mode</strong></p>
<p>When transactions are committed, the created transaction logs are copied to the slave node and stored as a file. The transaction commit is complete after receiving a notice on its success. Although the time to execute commit in this mode may take longer than that in <strong>ASYNC</strong> mode, this is the safest method because the copied transaction logs are always guaranteed to be reflected to the standby server even if a failover occurs.</p>
<p><strong>ASYNC Mode</strong></p>
<p>When transactions are committed, commit is complete without verifying the transfer of transaction logs to a slave node. Therefore, it is not guaranteed that committed transactions are reflected to a slave node in a master node side.</p>
<p>Although <strong>ASYNC</strong> mode provides a better performance as it has almost no delay when executing commit, there may be data inconsistency in its nodes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>SEMISYNC</strong> mode is deprecated, and this operates in the same way as <strong>SYNC</strong> mode.</p>
</div>
</div>
</div>
<div class="section" id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>This chapter simply explains how to build a master node and a slave node as 1:1 from DB creation. For details of various replication building methods, see <a class="reference internal" href="#building-replication"><span class="std std-ref">Building Replication</span></a>.</p>
<div class="section" id="preparation">
<h3>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h3>
<p><strong>Structure Diagram</strong></p>
<p>The diagram below aims to help users who are new to CUBRID HA, by explaining a simple procedure of the CUBRID HA configuration.</p>
<img alt="_images/image29.png" src="_images/image29.png" />
<p><strong>Specifications</strong></p>
<p>Linux and CUBRID version 2008 R2.2 or later must be installed on the equipment to be used as the master and the slave nodes. CUBRID HA does not support Windows operating system.</p>
<p><strong>Specifications of Configuring the CUBRID HA Equipment</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="51%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">CUBRID Version</th>
<th class="head">OS</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>For master nodes</td>
<td>CUBRID 2008 R2.2 or later</td>
<td>Linux</td>
</tr>
<tr class="row-odd"><td>For slave nodes</td>
<td>CUBRID 2008 R2.2 or later</td>
<td>Linux</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This document describes the HA configuration in CUBRID 9.2 or later versions. Note that the previous versions have different settings. For example, <strong>cubrid_ha.conf</strong> is only available in CUBRID 2008 R4.0 or later. <strong>ha_make_slavedb.sh</strong> is introduced from CUBRID 2008 R4.1 Patch 2 or later.</p>
</div>
</div>
<div class="section" id="creating-databases-and-configuring-servers">
<span id="quick-server-config"></span><h3>Creating Databases and Configuring Servers<a class="headerlink" href="#creating-databases-and-configuring-servers" title="Permalink to this headline">¶</a></h3>
<p><strong>Creating Databases</strong></p>
<p>Create databases to be included in CUBRID HA at each node of the CUBRID HA in the same manner. Modify the options for database creation as needed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cd $CUBRID_DATABASES
[nodeA]$ mkdir testdb
[nodeA]$ cd testdb
[nodeA]$ mkdir log
[nodeA]$ cubrid createdb -L ./log testdb en_US
Creating database with 512.0M size. The total amount of disk space needed is 1.5G.

CUBRID 10.0

[nodeA]$
</pre></div>
</div>
<p><strong>cubrid.conf</strong></p>
<p>Ensure <strong>ha_mode</strong> of <strong>$CUBRID/conf/cubrid.conf</strong> in every CUBRID HA node has the same value. Especially, take caution when configuring the <strong>log_max_archives</strong> and <strong>force_remove_log_archives</strong> parameters (logging parameters) and the <strong>ha_mode</strong> parameter (HA parameter).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Service parameters</span>
<span class="p">[</span><span class="n">service</span><span class="p">]</span>
<span class="n">service</span><span class="o">=</span><span class="n">server</span><span class="p">,</span><span class="n">broker</span><span class="p">,</span><span class="n">manager</span>

<span class="c1"># Common section</span>
<span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="n">service</span><span class="o">=</span><span class="n">server</span><span class="p">,</span><span class="n">broker</span><span class="p">,</span><span class="n">manager</span>

<span class="c1"># Server parameters</span>
<span class="n">server</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">data_buffer_size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>
<span class="n">log_buffer_size</span><span class="o">=</span><span class="mi">4</span><span class="n">M</span>
<span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">2</span><span class="n">M</span>
<span class="n">max_clients</span><span class="o">=</span><span class="mi">100</span>
<span class="n">cubrid_port_id</span><span class="o">=</span><span class="mi">1523</span>
<span class="n">db_volume_size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>
<span class="n">log_volume_size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>

<span class="c1"># Adds when configuring HA (Logging parameters)</span>
<span class="n">log_max_archives</span><span class="o">=</span><span class="mi">100</span>
<span class="n">force_remove_log_archives</span><span class="o">=</span><span class="n">no</span>

<span class="c1"># Adds when configuring HA (HA mode)</span>
<span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
<p><strong>cubrid_ha.conf</strong></p>
<p>Ensure <strong>ha_port_id</strong>, <strong>ha_node_list</strong>, <strong>ha_db_list</strong> of <strong>$CUBRID/conf/cubrid_ha.conf</strong> in every CUBRID HA node has the same value. In the example below, we assume that the host name of a master node is <em>nodeA</em> and that of a slave node is <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
<span class="n">ha_apply_max_mem_size</span><span class="o">=</span><span class="mi">500</span>
</pre></div>
</div>
<p><strong>databases.txt</strong></p>
<p>Ensure that you must configure the host names (<em>nodeA:nodeB</em>) of master and slave nodes in db-host of <strong>$CUBRID_DATABASES/databases.txt</strong>; if <strong>$CUBRID_DATABASES</strong> is not configured, do it in <strong>$CUBRID/databases/databases.txt</strong>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name vol-path db-host log-path lob-base-path</span>
<span class="n">testdb</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span> <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
</div>
<div class="section" id="starting-and-verifying-cubrid-ha">
<h3>Starting and Verifying CUBRID HA<a class="headerlink" href="#starting-and-verifying-cubrid-ha" title="Permalink to this headline">¶</a></h3>
<p><strong>Starting CUBRID HA</strong></p>
<p>Execute the <strong>cubrid heartbeat</strong> <strong>start</strong> at each node in the CUBRID HA group. Note that the node executing <strong>cubrid heartbeat start</strong> first will become a master node. In the example below, we assume that the host name of a master node is <em>nodeA</em> and that of a slave node is <em>nodeB</em>.</p>
<ul>
<li><p class="first">Master node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat start
</pre></div>
</div>
</li>
<li><p class="first">Slave node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat start
</pre></div>
</div>
</li>
</ul>
<p><strong>Verifying CUBRID HA Status</strong></p>
<p>Execute <strong>cubrid heartbeat status</strong> at each node in the CUBRID HA group to verify its configuration status.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[cubrid@nodeA]$ cubrid heartbeat status
@ cubrid heartbeat list
 HA-Node Info (current nodeA, state master)
   Node nodeB-node-name (priority 2, state slave)
   Node nodeA-node-name (priority 1, state master)
 HA-Process Info (nodeA 9289, state nodeA)
   Applylogdb testdb@localhost:/home1/cubrid1/DB/testdb_nodeB (pid 9423, state registered)
   Copylogdb testdb@nodeB-node-name:/home1/cubrid1/DB/testdb_nodeB (pid 9418, state registered)
   Server testdb (pid 9306, state registered_and_active)

[nodeA]$
</pre></div>
</div>
<p>Use the <strong>cubrid changemode</strong> utility at each node in the CUBRID HA group to verify the status of the server.</p>
<ul>
<li><p class="first">Master node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid changemode testdb@localhost
The server &#39;testdb@localhost&#39;&#39;s current HA running mode is active.
</pre></div>
</div>
</li>
<li><p class="first">Slave node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid changemode testdb@localhost
The server &#39;testdb@localhost&#39;&#39;s current HA running mode is standby.
</pre></div>
</div>
</li>
</ul>
<p><strong>Verifying the CUBRID HA Operation</strong></p>
<p>Verify that action is properly applied to standby server of the slave node after performing write in an active server of the master node. To make a success connection via the CSQL Interpreter in HA environment, you must specify the host name to be connected after the database name like “&#64;&lt;<em>host_name</em>&gt;”). If you specify a host name as localhost, it is connected to local node.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Ensure that primary key must exist when creating a table to have replication successfully processed.</p>
</div>
<ul>
<li><p class="first">Master node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ csql -u dba testdb@localhost -c &quot;create table abc(a int, b int, c int, primary key(a));&quot;
[nodeA]$ csql -u dba testdb@localhost -c &quot;insert into abc values (1,1,1);&quot;
[nodeA]$
</pre></div>
</div>
</li>
<li><p class="first">Slave node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ csql -u dba testdb@localhost -l -c &quot;select * from abc;&quot;
=== &lt;Result of SELECT Command in Line 1&gt; ===
&lt;00001&gt; a: 1
        b: 1
        c: 1
[nodeB]$
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="configuring-and-starting-broker-and-verifying-the-broker-status">
<span id="quick-broker-config"></span><h3>Configuring and Starting Broker, and Verifying the Broker Status<a class="headerlink" href="#configuring-and-starting-broker-and-verifying-the-broker-status" title="Permalink to this headline">¶</a></h3>
<p><strong>Configuring the Broker</strong></p>
<p>To provide normal service during a database failover, it is necessary to configure an available database node in the <strong>db-host</strong> of <strong>databases.txt</strong>. And <strong>ACCESS_MODE</strong> in the <strong>cubrid_broker.conf</strong> file must be specified; if it is omitted, the default value is configured to Read Write mode. If you want to divide into a separate device, you must configure <strong>cubrid_broker.conf</strong> and <strong>databases.txt</strong> in the broker device.</p>
<ul>
<li><p class="first">databases.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name        vol-path                db-host         log-path        lob-base-path</span>
<span class="n">testdb</span>          <span class="o">/</span><span class="n">home1</span><span class="o">/</span><span class="n">cubrid1</span><span class="o">/</span><span class="n">CUBRID</span><span class="o">/</span><span class="n">testdb</span>  <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span>        <span class="o">/</span><span class="n">home1</span><span class="o">/</span><span class="n">cubrid1</span><span class="o">/</span><span class="n">CUBRID</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home1</span><span class="o">/</span><span class="n">cubrid1</span><span class="o">/</span><span class="n">CUBRID</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
</li>
<li><p class="first">cubrid_broker.conf</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">%</span><span class="n">testdb_RWbroker</span><span class="p">]</span>
<span class="n">SERVICE</span>                 <span class="o">=</span><span class="n">ON</span>
<span class="n">BROKER_PORT</span>             <span class="o">=</span><span class="mi">33000</span>
<span class="n">MIN_NUM_APPL_SERVER</span>     <span class="o">=</span><span class="mi">5</span>
<span class="n">MAX_NUM_APPL_SERVER</span>     <span class="o">=</span><span class="mi">40</span>
<span class="n">APPL_SERVER_SHM_ID</span>      <span class="o">=</span><span class="mi">33000</span>
<span class="n">LOG_DIR</span>                 <span class="o">=</span><span class="n">log</span><span class="o">/</span><span class="n">broker</span><span class="o">/</span><span class="n">sql_log</span>
<span class="n">ERROR_LOG_DIR</span>           <span class="o">=</span><span class="n">log</span><span class="o">/</span><span class="n">broker</span><span class="o">/</span><span class="n">error_log</span>
<span class="n">SQL_LOG</span>                 <span class="o">=</span><span class="n">ON</span>
<span class="n">TIME_TO_KILL</span>            <span class="o">=</span><span class="mi">120</span>
<span class="n">SESSION_TIMEOUT</span>         <span class="o">=</span><span class="mi">300</span>
<span class="n">KEEP_CONNECTION</span>         <span class="o">=</span><span class="n">AUTO</span>
<span class="n">CCI_DEFAULT_AUTOCOMMIT</span>  <span class="o">=</span><span class="n">ON</span>

<span class="c1"># broker mode parameter</span>
<span class="n">ACCESS_MODE</span>             <span class="o">=</span><span class="n">RW</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Starting Broker and Verifying its Status</strong></p>
<p>A broker is used to access applications such as JDBC, CCI or PHP. Therefore, to simply test server redundancy, execute the CSQL interpreter that is directly connected to the server processes, without having to start a broker. To start a broker, execute <strong>cubrid broker start</strong>. To stop it, execute <strong>cubrid broker stop</strong>.</p>
<p>The following example shows how to execute a broker from the master node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid broker start
@ cubrid broker start
++ cubrid broker start: success
[nodeA]$ cubrid broker status
@ cubrid broker status
% testdb_RWbroker
---------------------------------------------------------
ID   PID   QPS   LQS PSIZE STATUS
---------------------------------------------------------
 1  9532     0     0  48120  IDLE
</pre></div>
</div>
<p><strong>Configuring Applications</strong></p>
<p>Specifies the host name (<em>nodeA_broker</em>, <em>nodeB_broker</em>) and port for an application to connect in the connection URL. The <strong>altHosts</strong> attribute defines the broker where the next connection will be made when the connection to a broker fails. The following is an example of a JDBC program. For more information on CCI and PHP, see <a class="reference internal" href="#ha-cci-conf"><span class="std std-ref">CCI Configuration</span></a> and <a class="reference internal" href="#ha-php-conf"><span class="std std-ref">PHP Configuration</span></a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="s">&quot;jdbc:CUBRID:nodeA_broker:33000:testdb:::?charSet=utf-8&amp;altHosts=nodeB_broker:33000&quot;</span><span class="p">,</span> <span class="s">&quot;dba&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="environment-configuration">
<span id="ha-configuration"></span><h2>Environment Configuration<a class="headerlink" href="#environment-configuration" title="Permalink to this headline">¶</a></h2>
<p>The below is the description for setting the HA environment. See <a class="reference internal" href="#ha-connect-broker-db"><span class="std std-ref">Connecting a Broker to DB</span></a> for further information regarding the process connecting between a broker and a DB server.</p>
<div class="section" id="cubrid-conf">
<h3>cubrid.conf<a class="headerlink" href="#cubrid-conf" title="Permalink to this headline">¶</a></h3>
<p>The <strong>cubrid.conf</strong> file that has general information on configuring CUBRID is located in the <strong>$CUBRID/conf</strong> directory. This page provides information about <strong>cubrid.conf</strong> parameters used by CUBRID HA.</p>
<div class="section" id="ha-or-not">
<h4>HA or Not<a class="headerlink" href="#ha-or-not" title="Permalink to this headline">¶</a></h4>
<p><strong>ha_mode</strong></p>
<p><strong>ha_mode</strong> is a parameter used to configure whether to use CUBRID HA. The default value is <strong>off</strong>. CUBRID HA does not support Windows; it supports Linux only.</p>
<ul class="simple">
<li><strong>off</strong> : CUBRID HA is not used.</li>
<li><strong>on</strong> : CUBRID HA is used. Failover is supported for its node.</li>
<li><strong>replica</strong> : CUBRID HA is used. Failover is not supported for its node.</li>
</ul>
<p>If <strong>ha_mode</strong> is <strong>on</strong>, the CUBRID HA values are configured by reading <strong>cubrid_ha.conf</strong>.</p>
<p>This parameter cannot be modified dynamically. To modify the value of this parameter, you must restart it.</p>
</div>
<div class="section" id="logging">
<h4>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h4>
<p id="ha-log-max-archives"><strong>log_max_archives</strong></p>
<p><strong>log_max_archives</strong> is a parameter used to configure the minimum number of archive log files to be archived. The minimum value is 0 and the default is <strong>INT_MAX</strong> (2147483647). When CUBRID has installed for the first time, this value is set to 0 in the <strong>cubrid.conf</strong> file. The behavior of the parameter is affected by <strong>force_remove_log_archives</strong>.</p>
<p>If the value of <strong>force_remove_log_archives</strong> is set to <strong>no</strong>, the existing archive log files to which the activated transaction refers or the archive log files of the master node not reflected to the slave node in HA environment will not be deleted. For details, see the following <strong>force_remove_log_archives</strong>.</p>
<p>For details about <strong>log_max_archives</strong>, see <a class="reference internal" href="admin/config.html#logging-parameters"><span class="std std-ref">Logging-Related Parameters</span></a>.</p>
<p id="ha-force-remove-log-archives"><strong>force_remove_log_archives</strong></p>
<p>It is recommended to configure <strong>force_remove_log_archives</strong> to <strong>no</strong> so that archive logs to be used by HA-related processes always can be maintained to set up HA environment by configuring <strong>ha_mode</strong> to <strong>on</strong>.</p>
<p>If you configure the value for <strong>force_remove_log_archives</strong> to yes, the archive log files which will be used in the HA-related process can be deleted, and this may lead to an inconsistency between replicated databases. If you want to maintain free disk space even though doing this could lead to risk, you can configure the value to yes.</p>
<p>For details about <strong>force_remove_log_archives</strong>, see <a class="reference internal" href="admin/config.html#logging-parameters"><span class="std std-ref">Logging-Related Parameters</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">From 2008 R4.3 in replica mode, it will be always deleted except for archive logs as many as specified in the <strong>log_max_archives</strong> parameter, regardless the <strong>force_remove_log_archives</strong> value specified.</p>
</div>
</div>
<div class="section" id="access">
<h4>Access<a class="headerlink" href="#access" title="Permalink to this headline">¶</a></h4>
<p><strong>max_clients</strong></p>
<p><strong>max_clients</strong> is a parameter used to configure the maximum number of clients to be connected to a database server simultaneously. The default is <strong>100</strong>.</p>
<p>Because the replication log copy and the replication log reflection processes start by default if CUBRID HA is used, you must configure the value to twice the number of all nodes in the CUBRID HA group, except the corresponding node. Furthermore, you must consider the case in which a client that is connected to another node at the time of failover attempts to connect to that node.</p>
<p>For details about <strong>max_clients</strong>, see <a class="reference internal" href="admin/config.html#connection-parameters"><span class="std std-ref">Connection-Related Parameters</span></a>.</p>
<p><strong>The Parameters That Must Have the Same Value for All Nodes</strong></p>
<ul class="simple">
<li><strong>log_buffer_size</strong> : The size of a log buffer. This must be same for all nodes, as it affects the protocol between <strong>copylogdb</strong> that duplicate the server and logs.</li>
<li><strong>log_volume_size</strong> : The size of a log volume. In CUBRID HA, the format and contents of a transaction log are the same as that of the replica log. Therefore, the parameter must be same for all nodes. If each node creates its own DB, the <strong>cubrid createdb</strong> options (<strong>–db-volume-size</strong>, <strong>–db-page-size</strong>, <strong>–log-volume-size</strong>, <strong>–log-page-size</strong>, etc.) must be the same.</li>
<li><strong>cubrid_port_id</strong> : The TCP port number for creating a server connection. It must be same for all nodes in order to connect <strong>copylogdb</strong> that duplicate the server and logs.</li>
<li><strong>HA-related parameters</strong> : HA parameters included in <strong>cubrid_ha.conf</strong> must be identical by default. However, the following parameters can be set differently according to the node.</li>
</ul>
<p><strong>The Parameters That Can be Different Among Nodes</strong></p>
<blockquote>
<div><ul class="simple">
<li>The <strong>ha_mode</strong> parameter in replica node</li>
<li>The <strong>ha_copy_sync_mode</strong> parameter</li>
<li>The <strong>ha_ping_hosts</strong> parameter</li>
<li>The <strong>ha_tcp_ping_hosts</strong> parameter</li>
</ul>
</div></blockquote>
<p><strong>Example</strong></p>
<p>The following example shows how to configure <strong>cubrid.conf</strong>. Please take caution when configuring <strong>log_max_archives</strong> and <strong>force_remove_log_archives</strong> (logging-related parameters), and <strong>ha_mode</strong> (an HA-related parameter).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Service Parameters</span>
<span class="p">[</span><span class="n">service</span><span class="p">]</span>
<span class="n">service</span><span class="o">=</span><span class="n">server</span><span class="p">,</span><span class="n">broker</span><span class="p">,</span><span class="n">manager</span>

<span class="c1"># Server Parameters</span>
<span class="n">server</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">data_buffer_size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>
<span class="n">log_buffer_size</span><span class="o">=</span><span class="mi">4</span><span class="n">M</span>
<span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">2</span><span class="n">M</span>
<span class="n">max_clients</span><span class="o">=</span><span class="mi">200</span>
<span class="n">cubrid_port_id</span><span class="o">=</span><span class="mi">1523</span>
<span class="n">db_volume_size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>
<span class="n">log_volume_size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>

<span class="c1"># Adds when configuring HA (Logging parameters)</span>
<span class="n">log_max_archives</span><span class="o">=</span><span class="mi">100</span>
<span class="n">force_remove_log_archives</span><span class="o">=</span><span class="n">no</span>

<span class="c1"># Adds when configuring HA (HA mode)</span>
<span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
<span class="n">log_max_archives</span><span class="o">=</span><span class="mi">100</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cubrid-ha-conf">
<span id="id4"></span><h3>cubrid_ha.conf<a class="headerlink" href="#cubrid-ha-conf" title="Permalink to this headline">¶</a></h3>
<p>The <strong>cubrid_ha.conf</strong> file that has generation information on CUBRID HA is located in the <strong>$CUBRID/conf</strong> directory. CUBRID HA does not support Windows; it supports Linux only.</p>
<p>See <a class="reference internal" href="#ha-connect-broker-db"><span class="std std-ref">Connecting a Broker to DB</span></a> for further information regarding the process connecting between a broker and a DB server.</p>
<div class="section" id="node">
<h4>Node<a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h4>
<p><strong>ha_node_list</strong></p>
<p><strong>ha_node_list</strong> is a parameter used to configure the group name to be used in the CUBRID HA group and the host name of member nodes in which failover is supported. The group name is separated by &#64;. The name before &#64; is for the group, and the names after &#64; are for host names of member nodes. A comma(,) or colon(:) is used to separate individual host names. The default is <strong>localhost&#64;localhost</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The host name of the member nodes specified in this parameter cannot be replaced with the IP. You should use the host names which are registered in <strong>/etc/hosts</strong>.</p>
<p>If the host name is not specified properly, the below message is written into the server.err error log file.</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Time</span><span class="p">:</span> <span class="mi">04</span><span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">12</span> <span class="mi">17</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mf">45.030</span> <span class="o">-</span> <span class="n">ERROR</span> <span class="o">***</span> <span class="n">file</span> <span class="o">../../</span><span class="n">src</span><span class="o">/</span><span class="n">connection</span><span class="o">/</span><span class="n">tcp</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">line</span> <span class="mi">121</span> <span class="n">ERROR</span> <span class="n">CODE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">353</span> <span class="n">Tran</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CLIENT</span> <span class="o">=</span> <span class="p">(</span><span class="n">unknown</span><span class="p">):(</span><span class="n">unknown</span><span class="p">)(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">EID</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">Cannot</span> <span class="n">make</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">master</span> <span class="n">server</span> <span class="n">on</span> <span class="n">host</span> <span class="s2">&quot;Wrong_HOST_NAME&quot;</span><span class="o">....</span> <span class="n">Connection</span> <span class="n">timed</span> <span class="n">out</span>
</pre></div>
</div>
</div>
<p>A node in which the <strong>ha_mode</strong> value is set to <strong>on</strong> must be specified in <strong>ha_node_list</strong>. The value of the <strong>ha_node_list</strong> of all nodes in the CUBRID HA group must be identical. When a failover occurs, a node becomes a master node in the order specified in the parameter.</p>
<p>This parameter can be modified dynamically. If you modify the value of this parameter, you must execute <a class="reference internal" href="#cubrid-heartbeat"><span class="std std-ref">cubrid heartbeat reload</span></a> to apply the changes.</p>
<p><strong>ha_replica_list</strong></p>
<p><strong>ha_replica_list</strong> is a parameter used to configure the group name, which is used in the CUBRID HA group, and the replica nodes, which are host names of member nodes in which failover is not supported. There is no need to specify this if you do not construct replica nodes. The group name is separated by &#64;. The name before &#64; is for the group, and the names after &#64; are for host names of member nodes. A comma(,) or colon(:) is used to separate individual host names. The default is <strong>NULL</strong>.</p>
<p>The group name must be identical to the name specified in <strong>ha_replica_list</strong>. The host names of member nodes and the host names of nodes specified in this parameter must be registered in <strong>/etc/hosts</strong>. A node in which the <strong>ha_mode</strong> value is set to <strong>replica</strong> must be specified in <strong>ha_replica_list</strong>. The <strong>ha_replica_list</strong> values of all nodes in the CUBRID HA group must be identical.</p>
<p>This parameter can be modified dynamically. If you modify the value of this parameter, you must execute <a class="reference internal" href="#cubrid-heartbeat"><span class="std std-ref">cubrid heartbeat reload</span></a> to apply the changes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The host name of the member nodes specified in this parameter cannot be replaced with the IP. You should use the host names which are registered in <strong>/etc/hosts</strong>.</p>
</div>
<p><strong>ha_db_list</strong></p>
<p><strong>ha_db_list</strong> is a parameter used to configure the name of the database that will run in CUBRID HA mode. The default is <strong>NULL</strong>. You can specify multiple databases by using a comma (,).</p>
</div>
<div class="section" id="id5">
<h4>Access<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p><strong>ha_port_id</strong></p>
<p><strong>ha_port_id</strong> is a parameter used to configure the UDP port number; the UDP port is used to detect failure when exchanging heartbeat messages. The default is <strong>59,901</strong>.</p>
<p>If a firewall exists in the service environment, the firewall must be configured to allow the configured port to pass through it.</p>
<p><strong>ha_ping_hosts</strong></p>
<p><strong>ha_ping_hosts</strong> is a parameter used to configure the host which verifies whether or not a failover occurs due to unstable network when a failover has started in a slave node. The default is <strong>NULL</strong>. A comma(,) or colon(:) is used to separate individual host names.</p>
<p>The host name of the member nodes specified in this parameter can be replaced with the IP. When a host name is used, the name must be registered in <strong>/etc/hosts</strong>.</p>
<p>CUBRID checks hosts specified in <strong>ha_ping_hosts</strong> every hour; if there is a problem on a host, “ping check” is paused temporarily and checks every 5 minutes if the host is normalized or not.</p>
<p>Configuring this parameter can prevent split-brain, a phenomenon in which two master nodes simultaneously exist as a result of the slave node erroneously detecting an abnormal termination of the master node due to unstable network status and then promoting itself as the new master.</p>
<p>However, the “ping check” does not work if the ICMP protocol is disabled. CUBRID provides <strong>ha_tcp_ping_hosts</strong> as an alternative to address this.</p>
<p><strong>ha_tcp_ping_hosts</strong></p>
<p><strong>ha_tcp_ping_hosts</strong> is a parameter that can be used as an alternative to <strong>ha_ping_hosts</strong> when the ICMP protocol is disabled. <strong>ha_tcp_ping_hosts</strong> works like <strong>ha_ping_hosts</strong> except that the TCP layer is used instead of the IP layer for the “ping check”. The default is <strong>NULL</strong>. A comma(,) is used to separate individual host names, and a colon(:) is used to separate a host name and a port number. So, the format of this parameter is like “ha_tcp_ping_hosts=host1:port1,host2:port2”. In order to use the TCP ping properly, a TCP socket that can receive the requests must be opened in advance with the port number on the host specified in <strong>ha_tcp_ping_hosts</strong> and the firewall must not block the requests. <strong>ha_tcp_ping_hosts</strong> is ignored if the <strong>ha_ping_hosts</strong> is also set.</p>
</div>
<div class="section" id="replication">
<h4>Replication<a class="headerlink" href="#replication" title="Permalink to this headline">¶</a></h4>
<p><strong>ha_copy_sync_mode</strong></p>
<p><strong>ha_copy_sync_mode</strong> is a parameter used to configure the mode of storing the replication log, which is a copy of transaction log. The default is <strong>SYNC</strong>.</p>
<p>The value can be one of the following: <strong>SYNC</strong> and <strong>ASYNC</strong>. The number of values must be the same as the number of nodes specified in <strong>ha_node_list</strong>. They must be ordered by the specified value. You can specify multiple modes by using a comma(,) or colon(:). The replica node is always working in <strong>ASNYC</strong> mode regardless of this value.</p>
<p>For details, see <a class="reference internal" href="#log-multiplexing"><span class="std std-ref">Log Multiplexing</span></a>.</p>
<p><strong>ha_copy_log_base</strong></p>
<p>Specifies the parent path for saving replication logs. The default value is the directory path set in the $CUBRID_DATABASES environment variable.
Replication logs are stored in a subdirectory of &lt;db_name&gt;_&lt;host_name&gt;, depending on the server and database name.</p>
<p>The replication log path can be set to either a relative or absolute path.
The following are examples of each setting.</p>
<p>ex1) ha_copy_log_base=copylog: Considered a relative path and stores replication logs in $CUBRID_DATABASES/copylog.
ex2) ha_copy_log_base=/log/copy_log: Saves replication logs in /log/copy_log as an absolute path.</p>
<p id="ha-copy-log-max-archives"><strong>ha_copy_log_max_archives</strong></p>
<p><strong>ha_copy_log_max_archives</strong> is a parameter used to configure the maximum number of keeping replication log files. The default is 1. However, even if the number of replication log files exceeds the specified number of replication log files, they are not deleted if they are not applied to the database.</p>
<p>To prevent wasting needless disk space, it is recommended to keep this value as 1, the default.</p>
<p><strong>ha_apply_max_mem_size</strong></p>
<p><strong>ha_apply_max_mem_size</strong> is a parameter used to configure the value of maximum memory that the replication log reflection process of CUBRID HA can use. The default value is <strong>500</strong> (unit: MB) and the maximum value is <strong>INT_MAX</strong> (2147483647). When the value is larger than the size allowed by the system, memory allocation fails and the HA replication reflection process may malfunction. For this reason, you must check whether or not the memory resource can handle the specified value before setting it.</p>
<p><strong>ha_applylogdb_ignore_error_list</strong></p>
<p><strong>ha_applylogdb_ignore_error_list</strong> is a parameter used to configure for proceeding replication in CUBRID HA process by ignoring an error occurrence. The error codes to be ignored are separated by a comma (,). This value has a high priority. Therefore, when this value is the same as the value of the <strong>ha_applylogdb_retry_error_list</strong> parameter or the error code of “List of Retry Errors,” the values of the <strong>ha_applylogdb_retry_error_list</strong> parameter or the error code of “List of Retry Errors” are ignored and the tasks that cause the error are not retried. For “List of Retry Errors,” see the description of <strong>ha_applylogdb_retry_error_list</strong> below.</p>
<p><strong>ha_applylogdb_retry_error_list</strong></p>
<p><strong>ha_applylogdb_retry_error_list</strong> is a parameter used to configure for retrying tasks that caused an error in the replication log reflection process of CUBRID HA until the task succeeds. When specifying errors to be retried, separate each error with a comma (,). The following table shows the default “List of Retry Errors.” If these values exist in <strong>ha_applylogdb_ignore_error_list</strong>, the error will be overridden.</p>
<blockquote>
<div><p><strong>List of Retry Errors</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error Code Name</th>
<th class="head">Error Code</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ER_LK_UNILATERALLY_ABORTED</td>
<td>-72</td>
</tr>
<tr class="row-odd"><td>ER_LK_OBJECT_TIMEOUT_SIMPLE_MSG</td>
<td>-73</td>
</tr>
<tr class="row-even"><td>ER_LK_OBJECT_TIMEOUT_CLASS_MSG</td>
<td>-74</td>
</tr>
<tr class="row-odd"><td>ER_LK_OBJECT_TIMEOUT_CLASSOF_MSG</td>
<td>-75</td>
</tr>
<tr class="row-even"><td>ER_LK_PAGE_TIMEOUT</td>
<td>-76</td>
</tr>
<tr class="row-odd"><td>ER_PAGE_LATCH_TIMEDOUT</td>
<td>-836</td>
</tr>
<tr class="row-even"><td>ER_PAGE_LATCH_ABORTED</td>
<td>-859</td>
</tr>
<tr class="row-odd"><td>ER_LK_OBJECT_DL_TIMEOUT_SIMPLE_MSG</td>
<td>-966</td>
</tr>
<tr class="row-even"><td>ER_LK_OBJECT_DL_TIMEOUT_CLASS_MSG</td>
<td>-967</td>
</tr>
<tr class="row-odd"><td>ER_LK_OBJECT_DL_TIMEOUT_CLASSOF_MSG</td>
<td>-968</td>
</tr>
<tr class="row-even"><td>ER_LK_DEADLOCK_CYCLE_DETECTED</td>
<td>-1021</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>ha_replica_delay</strong></p>
<p>This parameter specifies the term of applying the replicated data between a master node and a replica node. CUBRID intentionally delays replicating by the specified time. You can set a unit as ms, s, min or h, which stands for milliseconds, seconds, minutes or hours respectively. If you omit the unit, milliseconds(ms) will be applied. The default value is 0.</p>
<p><strong>ha_replica_time_bound</strong></p>
<p>In a master node, only the transactions which have been run on the specified time with this parameter are applied to the replica node. The format of this value is “YYYY-MM-DD hh:mi:ss”. There is no default value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following example shows how to configure <strong>cubrid_ha.conf</strong>.</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
<span class="n">ha_apply_max_mem_size</span><span class="o">=</span><span class="mi">500</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following example shows how to configure the value of /etc/hosts (a host name of a member node: nodeA, IP: 192.168.0.1).</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">127.0.0.1</span> <span class="n">localhost</span><span class="o">.</span><span class="n">localdomain</span> <span class="n">localhost</span>
<span class="mf">192.168.0.1</span> <span class="n">nodeA</span>
</pre></div>
</div>
</div>
<p id="ha-delay-limit"><strong>ha_delay_limit</strong></p>
<p><strong>ha_delay_limit</strong> is a standard time for CUBRID itself to measure replication delay status, and <strong>ha_delay_limit_delta</strong> is a value to subtract a time which replication delay is released from a replication delay time. Once a server is measured as a replication delay, it keeps this status until the replication delay time is equal or lower than (<strong>ha_delay_limit</strong> - <strong>ha_delay_limit_delta</strong>).
A slave node or a replica node corresponds to a standby DB server, that is a target server to judge whether replication is delayed or not.</p>
<p>For example, if you want set replication delay time as 10 minutes and replication-delay-releasing time as 8 minutes, the value of <strong>ha_delay_limit</strong> will be 600s(or 10min) and the value of <strong>ha_delay_limit_delta</strong> will be 120s(or 2min).</p>
<p>If it is measured as replication delay, CAS judges that there is a problem for standby DB to process jobs, and attempts to reconnect the other standby DBs.</p>
<p>CAS, which is connected to the DB which has the lower priority because of the replication delay, expects that the replication delay is released when the time by <a class="reference internal" href="admin/config.html#reconnect-time"><span class="std std-ref">RECONNECT_TIME</span></a> in <strong>cubrid_broker.conf</strong> is elapsed, then attempts to reconnect to the standby DB which has higher priority.</p>
<p><strong>ha_delay_limit_delta</strong></p>
<p>See the above description of <strong>ha_delay_limit</strong>.</p>
<p><strong>ha_copy_log_timeout</strong></p>
<p>This is the maximum value of the time in which a node’s database server process (cub_server) waits a response from another node’s replication-log-copy process (copylogdb). The default is 5(seconds). If this value is -1, this means to be infinite wait. It only works with <strong>SYNC</strong> log copy mode(<strong>ha_copy_sync_mode</strong>) parameter.</p>
<p><strong>ha_check_disk_failure_interval</strong></p>
<p>CUBRID judges the disk failure for each time which is set to the value of this parameter. The default is 15, and the unit is second.</p>
<ul class="simple">
<li>If the value of <strong>ha_copy_log_timeout</strong> parameter is -1, the value of <strong>ha_check_disk_failure_interval</strong> parameter is ignored and the disk failure is not judged.</li>
<li>If the value of <strong>ha_check_disk_failure_interval</strong> parameter is smaller than the value of <strong>ha_copy_log_timeout</strong> parameter, the disk failure is judged for each <strong>ha_copy_log_timeout</strong> + 20 seconds.</li>
</ul>
<p><strong>ha_unacceptable_proc_restart_timediff</strong></p>
<p>When the abnormal status of a server process is kept, the server can be restarted infinitely; it is better to remove this kind of node from the HA components. Because the server is restarted within a short time when the abnormal status is continued, specify this term with this parameter to detect this situation. If the server is restarted within the specified term, CUBRID assumes that this server is abnormal and remove(demote) this node from the HA components.
The default is 2min. If the unit is omitted, it is specified as milliseconds(msec).</p>
</div>
<div class="section" id="sql-logging">
<h4>SQL Logging<a class="headerlink" href="#sql-logging" title="Permalink to this headline">¶</a></h4>
<p><strong>ha_enable_sql_logging</strong></p>
<p>If the value of this parameter is <strong>yes</strong>, CUBRID generates the log file of SQL which <strong>applylogdb</strong> process applies to the DB volume. The log file is located under the sql_log of the replication log directory(<strong>ha_copy_log_base</strong>).
The default is <strong>no</strong>.</p>
<p>The format of this log file name is <em>&lt;db name&gt;_&lt;master hostname&gt;</em><strong>.sql.log.</strong><em>&lt;id&gt;</em>, and <em>&lt;id&gt;</em> starts from 0.
If this size is over <strong>ha_sql_log_max_size_in_mbytes</strong>, a new file with “<em>&lt;id&gt;</em> + 1” is created.
For example, if “ha_sql_log_max_size_in_mbytes=100”, demodb_nodeA.sql.log.1 is newly created as the size of demodb_nodeA.sql.log.0 file becomes 100MB.</p>
<p>By default, only two latest SQL log files are maintained, and the maximum number of them can be adjusted through <strong>ha_sql_log_max_count</strong>.</p>
<p>The SQL log format is as follows.</p>
<ul>
<li><p class="first">INSERT/DELETE/UPDATE</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">date</span> <span class="o">|</span> <span class="n">SQL</span> <span class="nb">id</span> <span class="o">|</span> <span class="n">SELECT</span> <span class="n">query</span><span class="s1">&#39;s length for sampling | the length of a transformed query</span>
<span class="o">--</span> <span class="n">SELECT</span> <span class="n">query</span> <span class="k">for</span> <span class="n">sampling</span>
<span class="n">transformed</span> <span class="n">query</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">25</span> <span class="mi">15</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">41</span> <span class="o">|</span> <span class="mi">40083</span> <span class="o">|</span> <span class="mi">33</span> <span class="o">|</span> <span class="mi">114</span>
<span class="o">--</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="p">[</span><span class="n">t1</span><span class="p">]</span> <span class="n">WHERE</span> <span class="s2">&quot;c1&quot;</span><span class="o">=</span><span class="mi">79186</span><span class="p">;</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="p">[</span><span class="n">t1</span><span class="p">](</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">79186</span><span class="p">,</span><span class="s1">&#39;b3beb3decd2a6be974&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">DDL</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">date</span> <span class="o">|</span> <span class="n">SQL</span> <span class="nb">id</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">the</span> <span class="n">length</span> <span class="n">of</span> <span class="n">a</span> <span class="n">transformed</span> <span class="n">query</span>
<span class="n">DDL</span> <span class="n">query</span>
<span class="p">(</span><span class="n">GRANT</span> <span class="n">query</span> <span class="n">will</span> <span class="n">follow</span> <span class="n">when</span> <span class="n">CREATE</span> <span class="n">TABLE</span><span class="p">,</span> <span class="n">to</span> <span class="n">grant</span> <span class="n">the</span> <span class="n">authority</span> <span class="n">to</span> <span class="n">the</span> <span class="n">table</span> <span class="n">created</span> <span class="k">with</span> <span class="n">DBA</span> <span class="n">authority</span><span class="o">.</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">25</span> <span class="mi">14</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">59</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="mi">50</span>
<span class="n">create</span> <span class="k">class</span> <span class="nc">t1</span> <span class="p">(</span> <span class="nb">id</span> <span class="n">integer</span><span class="p">,</span> <span class="n">primary</span> <span class="n">key</span> <span class="p">(</span><span class="nb">id</span><span class="p">)</span>  <span class="p">);</span>
<span class="o">--</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">25</span> <span class="mi">14</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">59</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="mi">38</span>
<span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">PRIVILEGES</span> <span class="n">ON</span> <span class="p">[</span><span class="n">t1</span><span class="p">]</span> <span class="n">TO</span> <span class="n">public</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When you apply this SQL log from a specific point as creating other DB, triggers should be turned off because the jobs performed by triggers from master node are written to the SQL log file.</p>
<ul class="last simple">
<li>See <a class="reference internal" href="admin/config.html#trigger-action"><span class="std std-ref">TRIGGER_ACTION</span></a> for turning off the triggers with a broker configuration.</li>
<li>See <a class="reference internal" href="csql.html#cmdoption-csql-no-trigger-action"><code class="xref std std-option docutils literal notranslate"><span class="pre">csql</span> <span class="pre">--no-trigger-action</span></code></a> for tunning off the triggers when you run CSQL.</li>
</ul>
</div>
<p><strong>ha_sql_log_max_size_in_mbytes</strong></p>
<p>The value of this parameter is the maximum size of the file which is created when SQL applied to DB by <strong>applylogdb</strong> process is logged. The new file is created when the size of a log file is over this value.</p>
<p><strong>ha_sql_log_max_count</strong></p>
<p>The value of this parameter indicates the maximum number of SQL log files to be maintained. The oldest ones are removed when the number of SQL log files exceeds this. This parameter can be set within the range of 2 to 5, and the default is 2. <strong>ha_sql_log_max_count</strong> and <strong>ha_sql_log_max_size_in_mbytes</strong> need to be set properly in order to adjust the amount of SQL log to maintain.</p>
<p><strong>ha_sql_log_path</strong></p>
<p>The value of this parameter indicates the path where the SQL log files will be created. The default value is <strong>NULL</strong>. This parameter can be set to an absolute or relative path. If a relative path is set, it is determined based on the replication log directory described in <strong>ha_enable_sql_logging</strong>. The database server process (cub_server) should have appropriate permissions on the path to create SQL log files. If this parameter is not set, the SQL log files will be created on the path described in <strong>ha_enable_sql_logging</strong></p>
</div>
</div>
<div class="section" id="cubrid-broker-conf">
<span id="ha-cubrid-broker-conf"></span><h3>cubrid_broker.conf<a class="headerlink" href="#cubrid-broker-conf" title="Permalink to this headline">¶</a></h3>
<p>The <strong>cubrid_broker.conf</strong> file that has general information on configuring CUBRID broker is located in the <strong>$CUBRID/conf</strong> directory. This section explains the parameters of <strong>cubrid_broker.conf</strong> that are used by CUBRID HA.</p>
<p>See <a class="reference internal" href="#ha-connect-broker-db"><span class="std std-ref">Connecting a Broker to DB</span></a> for further information regarding the process connecting between a broker and a DB server.</p>
<div class="section" id="access-target">
<h4>Access Target<a class="headerlink" href="#access-target" title="Permalink to this headline">¶</a></h4>
<p><strong>ACCESS_MODE</strong></p>
<p><strong>ACCESS_MODE</strong> is a parameter used to configure the mode of a broker. The default is <strong>RW</strong>.</p>
<p>Its value can be one of the following: <strong>RW</strong> (Read Write), <strong>RO</strong> (Read Only), <strong>SO</strong> (Standby Only), or <strong>PHRO</strong> (Preferred Host Read Only). For details, see <a class="reference internal" href="#broker-mode"><span class="std std-ref">Broker Mode</span></a>.</p>
<p><strong>REPLICA_ONLY</strong></p>
<p>CAS is only accessed to the replica DB if the value of <strong>REPLICA_ONLY</strong> is <strong>ON</strong>. The default is <strong>OFF</strong>. If the value of <strong>REPLICA_ONLY</strong> is <strong>ON</strong> and the value of <strong>ACCESS_MODE</strong> is <strong>RW</strong>, writing job is possible to even replica DB.</p>
</div>
<div class="section" id="access-order">
<h4>Access Order<a class="headerlink" href="#access-order" title="Permalink to this headline">¶</a></h4>
<p><strong>CONNECT_ORDER</strong></p>
<p>This parameter specifies whether the host-connecting order from a CAS is sequential or random. The host is configured from <strong>db-host</strong> of <strong>$CUBRID_DATABASES/databases.txt</strong>.</p>
<p>The default is <strong>SEQ</strong>; CAS tries to connect in the order. When it is <strong>RANDOM</strong>, CAS tries to randomly connect.
If <strong>PREFERRED_HOSTS</strong> parameter is given, CAS tries to connect to the hosts configured in <strong>PREFERRED_HOSTS</strong> with the order, then uses the value of <strong>db-host</strong> only when the connection by <strong>PREFERRED_HOSTS</strong> fails; and <strong>CONNECT_ORDER</strong> does not affects on the order of <strong>PREFERRED_HOSTS</strong>.</p>
<p>If you concern that the connections are centralized into one DB, set this value as <strong>RANDOM</strong>.</p>
<p><strong>PREFERRED_HOSTS</strong></p>
<p>Specify the order to connect by listing host names. The default value is <strong>NULL</strong>.</p>
<p>You can specify multiple nodes by using a colon (:). First, it tries to connect to host in the following order: host specified in the <strong>PREFERRED_HOSTS</strong> parameter first and then host specified in <strong>$CUBRID_DATABASES/databases.txt</strong>.</p>
<p>The following example shows how to configure <strong>cubrid_broker.conf</strong>. To access localhost in a first priority, set <strong>PREFERRED_HOSTS</strong> as <em>localhost</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">%</span><span class="n">PHRO_broker</span><span class="p">]</span>
<span class="n">SERVICE</span>                 <span class="o">=</span><span class="n">ON</span>
<span class="n">BROKER_PORT</span>             <span class="o">=</span><span class="mi">33000</span>
<span class="n">MIN_NUM_APPL_SERVER</span>     <span class="o">=</span><span class="mi">5</span>
<span class="n">MAX_NUM_APPL_SERVER</span>     <span class="o">=</span><span class="mi">40</span>
<span class="n">APPL_SERVER_SHM_ID</span>      <span class="o">=</span><span class="mi">33000</span>
<span class="n">LOG_DIR</span>                 <span class="o">=</span><span class="n">log</span><span class="o">/</span><span class="n">broker</span><span class="o">/</span><span class="n">sql_log</span>
<span class="n">ERROR_LOG_DIR</span>           <span class="o">=</span><span class="n">log</span><span class="o">/</span><span class="n">broker</span><span class="o">/</span><span class="n">error_log</span>
<span class="n">SQL_LOG</span>                 <span class="o">=</span><span class="n">ON</span>
<span class="n">TIME_TO_KILL</span>            <span class="o">=</span><span class="mi">120</span>
<span class="n">SESSION_TIMEOUT</span>         <span class="o">=</span><span class="mi">300</span>
<span class="n">KEEP_CONNECTION</span>         <span class="o">=</span><span class="n">AUTO</span>
<span class="n">CCI_DEFAULT_AUTOCOMMIT</span>  <span class="o">=</span><span class="n">ON</span>

<span class="c1"># Broker mode setting parameter</span>
<span class="n">ACCESS_MODE</span>             <span class="o">=</span><span class="n">RO</span>
<span class="n">PREFERRED_HOSTS</span>         <span class="o">=</span><span class="n">localhost</span>
</pre></div>
</div>
</div>
<div class="section" id="access-limitation">
<h4>Access Limitation<a class="headerlink" href="#access-limitation" title="Permalink to this headline">¶</a></h4>
<p id="max-num-delayed-hosts-lookup"><strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong></p>
<p>When replication is delayed on all DB servers in the HA environment which specified multiple DB servers to <strong>db-host</strong> of <strong>databases.txt</strong>, CUBRID checks the replication-delayed servers until only the specified numbers in the <strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong> parameter and decides the connection(checking the delay of replication is judged for the standby hosts; the delayed time is decided by the <a class="reference internal" href="#ha-delay-limit"><span class="std std-ref">ha_delay_limit</span></a> parameter). Also, <strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong> is not applied to <strong>PREFERRED_HOSTS</strong>.</p>
<p>For example, when <strong>db-host</strong> is specified as “host1:host2:host3:host4:host5” and “MAX_NUM_DELAYED_HOSTS_LOOKUP=2”, if the status of them as follows:</p>
<ul class="simple">
<li><em>host1</em>: active status</li>
<li><em>host2</em>: standby status, replication is delayed</li>
<li><em>host3</em>: unable to access</li>
<li><em>host4</em>: standby status, replication is delayed</li>
<li><em>host5</em>: standby status, replication is not delayed</li>
</ul>
<p>then the broker tries to access the two hosts, <em>host2</em> and <em>host4</em> which their replications are delayed, then decides to access <em>host4</em>.</p>
<p>The reason to behave like the above is that CUBRID assumes that the replication will be delayed to the other hosts if the replication of the number(specified by <strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong>) of hosts are delayed; therefore, CUBRID decides to connect to the last hosts which CUBRID have tried to access, as CUBRID does not try to access for the left hosts. However, if <strong>PREFERRED_HOSTS</strong> is specified together, CUBRID tries to access to them first and then tries to access to the hosts of db-host list from the first.</p>
<p>The step which the broker accesses CUBRID is divided into the primary connection and the secondary connection.</p>
<ul>
<li><p class="first">The primary connection: the step which the broker tries to access DB at first.</p>
<p>It checks the DB status(active/standby) and whether the replication is delayed or not. At this time, the broker checks DB’s status if it’s active or standby based on the <strong>ACCESS_MODE</strong> then decides the connection.</p>
</li>
<li><p class="first">The secondary connection: After the failure of the primary connection, the broker tries to connect from the failed position. At this time, the broker ignores the DB status(active/standby) and the delay of replication. However, <strong>SO</strong> broker always accepts a connection only to a standby DB.</p>
<p>At this time, the connection is decided if the DB is accessible, by ignoring the delay of replication and DB status(active/standby). However, the error can occur during the query execution. For example, If <strong>ACCESS_MODE</strong> of the broker is <strong>RW</strong> but the broker accesses standby DB, it occurs an error during INSERT operation. Regardless of the error, after it is connected to a standby DB and the transaction is executed, the broker retries the primary connection. However, <strong>SO</strong> broker can never connect to the active DB.</p>
</li>
</ul>
<p>Depending on the value of <strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong>, how the number of hosts, attempting to connect is limited as follows:</p>
<ul>
<li><p class="first">MAX_NUM_DELAYED_HOSTS_LOOKUP=-1</p>
<p>The same as you do not specify this parameter, which is the default value. In this case, at the primary step, the delay of replication and the DB status are checked to the end, then the connection is decided. At the second step, even if there is a replication, or even if that is not the expected DB status(active/standby), the broker connects to the last host which was accessible.</p>
</li>
<li><p class="first">MAX_NUM_DELAYED_HOSTS_LOOKUP=0</p>
<p>The secondary connection is processed after the connection is tried only to <strong>PREFERRED_HOSTS</strong> at the primary step; and at the secondary step, the broker tries to connect to a host even it is delayed in replication or it is not an expected DB status(active/standby). That is, because it is the secondary connection, <strong>RW</strong> broker can connect to a standby host and <strong>RO</strong> broker can connect to an active host. However, <strong>SO</strong> broker can never connect to the active DB.</p>
</li>
<li><p class="first">MAX_NUM_DELAYED_HOSTS_LOOKUP=n(&gt;0)</p>
<p>The broker tries to connect until the specified number of replication-delayed hosts. At the primary connection, the broker inspects until the specified number of replication-delayed hosts; at the secondary connection, the broker connects to a host that there is a delay of replication.</p>
</li>
</ul>
</div>
<div class="section" id="reconnection">
<h4>Reconnection<a class="headerlink" href="#reconnection" title="Permalink to this headline">¶</a></h4>
<p><strong>RECONNECT_TIME</strong></p>
<p>When a broker tries to connect a DB server which are not in <strong>PREFERRED_HOSTS</strong>, <strong>RO</strong> broker tries to connect to active DB server, or a broker tries to connect to the replication-delayed DB server, if connecting time is over  <strong>RECONNECT_TIME</strong>(default: 10min), the broker tries to reconnect.</p>
<p>See <a class="reference internal" href="admin/config.html#reconnect-time"><span class="std std-ref">RECONNECT_TIME</span></a> for further information.</p>
</div>
</div>
<div class="section" id="databases-txt">
<h3>databases.txt<a class="headerlink" href="#databases-txt" title="Permalink to this headline">¶</a></h3>
<p>The <strong>databases.txt</strong> file has information on the order of servers for the CAS of a broker to connect. It is located in the <strong>$CUBRID_DATABASES</strong> (if not specified, $CUBRID/databases) directory; the information can be configured by using <strong>db_hosts</strong>. You can specify multiple nodes by using a colon (:). If “<strong>CONNECT_ORDER=RANDOM</strong>”, the connection order is decided as randomly. But if <strong>PREFERRED_HOSTS</strong> is specified, the specified hosts have the first priority of the connection order.</p>
<p>The following example shows how to configure <strong>databases.txt</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name    vol-path        db-host     log-path     lob-base-path</span>
<span class="n">testdb</span>       <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span> <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>  <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
</div>
<div class="section" id="jdbc-configuration">
<span id="ha-jdbc-conf"></span><h3>JDBC Configuration<a class="headerlink" href="#jdbc-configuration" title="Permalink to this headline">¶</a></h3>
<p>To use CUBRID HA in JDBC, you must specify the connection information of another broker (<em>nodeB_broker</em>) to be connected when a failure occurs in broker (<em>nodeA_broker</em>). The attribute configured for CUBRID HA is <strong>altHosts</strong> which represents information of one or more broker nodes to be connected. For details, see <a class="reference internal" href="api/jdbc.html#jdbc-connection-conf"><span class="std std-ref">Configuration Connection</span></a>.</p>
<p>The following example shows how to configure JDBC:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="s">&quot;jdbc:CUBRID:nodeA_broker:33000:testdb:::?charSet=utf-8&amp;altHosts=nodeB_broker:33000&quot;</span><span class="p">,</span> <span class="s">&quot;dba&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="cci-configuration">
<span id="ha-cci-conf"></span><h3>CCI Configuration<a class="headerlink" href="#cci-configuration" title="Permalink to this headline">¶</a></h3>
<p>To use CUBRID HA in CCI, you must use the <a class="reference internal" href="api/cciapi.html#c.cci_connect_with_url" title="cci_connect_with_url"><code class="xref c c-func docutils literal notranslate"><span class="pre">cci_connect_with_url()</span></code></a> function which additionally allows specifying connection information in connection URL; the connection information is used when a failure occurs in broker. The attribute configured for CUBRID HA is <strong>altHosts</strong> which represents information of one or more broker nodes to be connected.</p>
<p>The following example shows how to configure CCI.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">con</span> <span class="o">=</span> <span class="n">cci_connect_with_url</span> <span class="p">(</span><span class="s">&quot;cci:CUBRID:nodeA_broker:33000:testdb:::?altHosts=nodeB_broker:33000&quot;</span><span class="p">,</span> <span class="s">&quot;dba&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">con</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
      <span class="n">printf</span> <span class="p">(</span><span class="s">&quot;cannot connect to database</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="php-configuration">
<span id="ha-php-conf"></span><h3>PHP Configuration<a class="headerlink" href="#php-configuration" title="Permalink to this headline">¶</a></h3>
<p>To use the functions of CUBRID HA in PHP, connect to the broker by using <a class="reference external" href="https://www.php.net/manual/en/function.cubrid-connect-with-url.php">cubrid_connect_with_url</a>, which is used to specify the connection information of the failover broker in the connection URL. The attribute specified for CUBRID HA is <strong>altHosts</strong>, the information on one or more broker nodes to be connected when a failover occurs.</p>
<p>The following example shows how to configure PHP.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$con</span> <span class="o">=</span> <span class="nb">cubrid_connect_with_url</span> <span class="p">(</span><span class="s2">&quot;cci:CUBRID:nodeA_broker:33000:testdb:::?altHosts=nodeB_broker:33000&quot;</span><span class="p">,</span> <span class="s2">&quot;dba&quot;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$con</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
      <span class="nb">printf</span> <span class="p">(</span><span class="s2">&quot;cannot connect to database</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you want to run smoothly the broker’s failover in the environment which the broker’s failover is enabled by setting <strong>altHosts</strong>, you should set the value of <strong>disconnectOnQueryTimeout</strong> in URL as <strong>true</strong>.</p>
<p class="last">If this value is <strong>true</strong>, an application program releases the existing connection from a broker and reconnects to the other broker which is specified on <strong>altHosts</strong>.</p>
</div>
</div>
</div>
<div class="section" id="connecting-a-broker-to-db">
<span id="ha-connect-broker-db"></span><h2>Connecting a Broker to DB<a class="headerlink" href="#connecting-a-broker-to-db" title="Permalink to this headline">¶</a></h2>
<p>A broker in HA environment should decide the one DB server to connect among multiple DB servers. At this time, it is different depending on the setting of the DB server and broker; how to connect to the DB server and what DB server should be chosen. In this chapter, we will look over how a broker choose DB server by the setting of HA environment. See <a class="reference internal" href="#ha-configuration"><span class="std std-ref">Environment Configuration</span></a> for the description about each parameters used in the environment setting.</p>
<p>Here are the main parameters used in the DB connection with the broker.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="16%" />
<col width="23%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Location</th>
<th class="head">Configuration file</th>
<th class="head">Parameter name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3">DB server</td>
<td>cubrid.conf</td>
<td>ha_mode</td>
<td>HA mode(on/off/replica) of DB server. Default: off</td>
</tr>
<tr class="row-odd"><td rowspan="2">cubrid_ha.conf</td>
<td>ha_delay_limit</td>
<td>A period to determine whether the replication-delay</td>
</tr>
<tr class="row-even"><td>ha_delay_limit_delta</td>
<td>Time subtracting the resolution time of replication-delay from
the time of replication-delay</td>
</tr>
<tr class="row-odd"><td rowspan="6">Broker</td>
<td rowspan="6">cubrid_broker.conf</td>
<td>ACCESS_MODE</td>
<td>Broker mode(RW/RO/SO). Default: RW</td>
</tr>
<tr class="row-even"><td>REPLICA_ONLY</td>
<td>Connectible to REPLICA server or not(ON/OFF). Default: OFF</td>
</tr>
<tr class="row-odd"><td>PREFERRED_HOSTS</td>
<td>Connecting to the host that is specified here in priority to the host
that you set in the db-host of databases.txt</td>
</tr>
<tr class="row-even"><td>MAX_NUM_DELAYED_HOSTS_LOOKUP</td>
<td><p class="first">The number of hosts to determine the delay of replication in
databases.txt. If up to the specified number of hosts was determined
as the delay of replication, the broker is connected to the host
checked at last.</p>
<ul class="last simple">
<li><dl class="first docutils">
<dt>-1: check all hosts specified in databases.txt whether replication</dt>
<dd>is delayed or not</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>0: do not check whether replication-delay or not, and process</dt>
<dd>the secondary connection immediately</dd>
</dl>
</li>
<li>n(&gt;0): check up to n hosts whether replication is delayed or not</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>RECONNECT_TIME</td>
<td>Time to try reconnecting after the broker is connected to the
improper DB server. Default: 600s.
If this value is 0, no try for reconnection.</td>
</tr>
<tr class="row-even"><td>CONNECT_ORDER</td>
<td>A parameter specifying the connecting order whether to connect as
or the random order(SEQ/RANDOM). Default: SEQ</td>
</tr>
</tbody>
</table>
<div class="section" id="connection-process">
<h3>Connection Process<a class="headerlink" href="#connection-process" title="Permalink to this headline">¶</a></h3>
<p>When a broker accesses DB server, it tries the primary connection; if it fails, it tries the secondary connection.</p>
<ul class="simple">
<li>The primary connection: Check the DB status(active/standby) and the delay of replication.<ol class="arabic">
<li>A broker tries to connect as the order specified by <strong>PREFERRED_HOSTS</strong>. The broker rejects connecting to the improper DB of which the status does not match with <strong>ACCESS_MODE</strong> or in which the replication is delayed.</li>
<li>By the <strong>CONNECT_ORDER</strong>, a broker tries to connect to the host in the order specified in <strong>databases.txt</strong> or the random order. The broker checks the DB status followed by the <strong>ACCESS_MODE</strong> and checks the replication-delayed host up to the number specified in <strong>MAX_NUM_DELAYED_HOSTS_LOOKUP</strong>.</li>
</ol>
</li>
<li>The secondary connection: Ignore the DB status(active/standby) and the delay of replication. However, <strong>SO</strong> broker always accepts to connect only to standby DB.<ol class="arabic">
<li>A broker tries to connect as the order specified by <strong>PREFERRED_HOSTS</strong>. The broker accepts connecting to the improper DB of which status does not match with <strong>ACCESS_MODE</strong> or in which the replication is delayed. However, <strong>SO</strong> broker can never connect to active DB.</li>
<li>By the <strong>CONNECT_ORDER</strong>, a broker tries to connect to the host in the order specified in <strong>databases.txt</strong> or the random order. The broker ignores the DB status(active/standby) and the delay of replication; it is connected if possible.</li>
</ol>
</li>
</ul>
</div>
<div class="section" id="examples-on-behaviours-by-configuration">
<h3>Examples on Behaviours by Configuration<a class="headerlink" href="#examples-on-behaviours-by-configuration" title="Permalink to this headline">¶</a></h3>
<p>The following shows the example of configuration.</p>
<p><strong>Host DB status</strong></p>
<ul class="simple">
<li><em>host1</em>: active</li>
<li><em>host2</em>: standby, replication is delayed.</li>
<li><em>host3</em>: standby, replica, unable to access.</li>
<li><em>host4</em>: standby, replica, replication is delayed.</li>
<li><em>host5</em>: standby, replica, replication is delayed.</li>
</ul>
<p>When the status of host DBs are as the above, the below shows samples of behaviours by the configuration.</p>
<p><strong>Behaviours by configuration</strong></p>
<ul class="simple">
<li>2-1, 2-2, 2-3: From 2, (+) is addition and (#) is modification.</li>
<li>3-1, 3-2, 3-3: From 3, (+) is addition and (#) is modification.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="29%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No.</th>
<th class="head">Configuration</th>
<th class="head">Behavior</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td><ul class="first last simple">
<li><strong>ACCESS_MODE=RW</strong></li>
<li>PREFERRED_HOSTS=host2:host3</li>
<li>db-host=host1:host2:host3:host4:host5</li>
<li>MAX_NUM_DELAYED_HOSTS_LOOKUP=-1</li>
<li>CONNECT_ORDER=SEQ</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is active.</p>
<ul class="simple">
<li><em>host2</em> of PREFERRED_HOSTS is replication-delay and <em>host3</em> is unable to access;
therefore, it tries to connect to db-host</li>
<li>connection is established because <em>host1</em> is on active status.</li>
</ul>
<p class="last">The broker tries to reconnect after the RECONNECT_TIME because it did not connect to
PREFERRED_HOSTS.</p>
</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><ul class="first last simple">
<li><strong>ACCESS_MODE=RO</strong></li>
<li>db-host=host1:host2:host3:host4:host5</li>
<li>MAX_NUM_DELAYED_HOSTS_LOOKUP=-1</li>
<li>CONNECT_ORDER=SEQ</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>All hosts of which DB status is standby are all replication-delayed or unable to access;
therefore, it will be failed at the primary connection.</li>
</ul>
<p>At the secondary connection try, a broker ignores DB status and replication-delay.</p>
<ul class="simple">
<li>The last accessed host, <em>host5</em> is successful to connect to a broker.</li>
</ul>
<p class="last">Because the broker accessed the replication-delayed server, it tries to reconnect after
RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-even"><td>2-1</td>
<td><ul class="first last simple">
<li>(+)PREFERRED_HOSTS=host1:host3</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active and <em>host3</em> is unable to access;
therefore, the broker tries to connect to db-host.</li>
<li>Because hosts of which DB status is standby are all replication-delayed or unable to access;
therefore, it will be failed at the primary connection.</li>
</ul>
<p>At the secondary connection try, a broker ignores DB status and replication-delay.</p>
<ul class="simple">
<li><em>host1</em> in PREFERRED_HOSTS is active, but it is possible to access;
therefore, it is successful to connect to a broker.</li>
</ul>
<p class="last">Because the broker accessed the active server, it tries to reconnect after RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-odd"><td>2-2</td>
<td><ul class="first last simple">
<li>(+)PREFERRED_HOSTS=host1:host3</li>
<li>(#)MAX_NUM_DELAYED_HOSTS_LOOKUP=0</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active and <em>host3</em> is unable to access.</li>
<li>no tries to connect to db-host.</li>
</ul>
<p>At the secondary connection try, a broker ignores DB status and replication-delay.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active, but it is possible to access;
therefore, it is successful to connect to a broker.</li>
</ul>
<p class="last">Because the broker accessed the active server, it tries to reconnect after RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-even"><td>2-3</td>
<td><ul class="first last simple">
<li>(#)MAX_NUM_DELAYED_HOSTS_LOOKUP=2</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>It fails at the primary connection after checking that <em>host2</em>, <em>host4</em> are replication-delayed
where DB status is standby.</li>
</ul>
<p>At the secondary connection try, a broker ignores DB status and replication-delay.</p>
<ul class="simple">
<li>The lastly accessed <em>host4</em> is successful to connect to a broker.</li>
</ul>
<p class="last">Because the broker accessed the replication-delayed server, it tries to reconnect after
RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-odd"><td>3</td>
<td><ul class="first last simple">
<li><strong>ACCESS_MODE=SO</strong></li>
<li>db-host=host1:host2:host3:host4:host5</li>
<li>MAX_NUM_DELAYED_HOSTS_LOOKUP=-1</li>
<li>CONNECT_ORDER=SEQ</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>It fails at the primary connection because hosts of which status is standby are all
replication-delayed or unable to access.</li>
</ul>
<p>At the secondary connection try, a broker checks if DB status is standby but ignores
replication-delay.</p>
<ul class="simple">
<li>The lastly accessed <em>host4</em> is successful to connect to a broker.</li>
</ul>
<p class="last">Because the broker accessed the replication-delayed server, it tries to reconnect after
RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-even"><td>3-1</td>
<td><ul class="first last simple">
<li>(+)PREFERRED_HOSTS=host1:host3</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active and <em>host3</em> is unable to access; therefore, it tries to
connect to db-host.</li>
<li>It fails at the primary connection because hosts of which status is standby are all
replication-delayed or unable to access.</li>
</ul>
<p>At the secondary connection try, a broker checks if DB status is standby but ignores
replication-delay.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active and <em>host3</em> is unable to access; therefore, it tries
to connect to db-host.</li>
<li>The first host of which DB status is standby is <em>host2</em>; therefore, it connects to <em>host2</em>.</li>
</ul>
<p class="last">Because the broker accessed the replication-delayed server, it tries to reconnect after
RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-odd"><td>3-2</td>
<td><ul class="first last simple">
<li>PREFERRED_HOSTS=host1:host3</li>
<li>(#)MAX_NUM_DELAYED_HOSTS_LOOKUP=0</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active and <em>host3</em> is unable to access.</li>
<li>It does not try to connect to db-host.</li>
</ul>
<p>At the secondary connection try, a broker checks if DB status is standby but ignores
replication-delay.</p>
<ul class="simple">
<li>In PREFERRED_HOSTS, <em>host1</em> is active and <em>host3</em> is unable to access; therefore, it tries
to connect to db-host.</li>
<li>The first host of which DB status is standby is <em>host2</em>; therefore, it connects to <em>host2</em>.</li>
</ul>
<p class="last">Because the broker accessed the replication-delayed server, it tries to reconnect after
RECONNECT_TIME.</p>
</td>
</tr>
<tr class="row-even"><td>3-3</td>
<td><ul class="first last simple">
<li>(#)MAX_NUM_DELAYED_HOSTS_LOOKUP=2</li>
</ul>
</td>
<td><p class="first">At the primary connection try, a broker checks if DB status is standby.</p>
<ul class="simple">
<li>It fails at the primary connection after checking that <em>host2</em>, <em>host4</em> are replication-delayed
where DB status is standby.</li>
</ul>
<p>At the secondary connection try, a broker checks if DB status is standby but ignores
replication-delay.</p>
<ul class="simple">
<li>The lastly accessed <em>host4</em> is successful to connect to a broker.</li>
</ul>
<p class="last">Because the broker accessed the replication-delayed server, it tries to reconnect after
RECONNECT_TIME.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="running-and-monitoring">
<h2>Running and Monitoring<a class="headerlink" href="#running-and-monitoring" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cubrid-heartbeat-utility">
<span id="cubrid-heartbeat"></span><h3>cubrid heartbeat Utility<a class="headerlink" href="#cubrid-heartbeat-utility" title="Permalink to this headline">¶</a></h3>
<p><strong>cubrid heartbeat</strong> command can be run as <strong>cubrid hb</strong>, the abbreviated command.</p>
<div class="section" id="start">
<h4>start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to activate CUBRID HA feature and start all processes of CUBRID HA in the node(database server process, replication log copy process, and replication log reflection process). Note that a master node or a slave node is determined based on the execution order of <strong>cubrid heartbeat start</strong>.</p>
<p>How to execute the command is as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat start
</pre></div>
</div>
<p>The database server process configured in HA mode cannot be started with the <strong>cubrid server start</strong> command.</p>
<p>Specify the database name at the end of the command to run only the HA configuration processes (database server process, replication log copy process, and replication log reflection process) of a specific database in the node. For example, use the following command to run the database <em>testdb</em> only:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat start testdb
</pre></div>
</div>
</div>
<div class="section" id="stop">
<h4>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to disable and stop all components of CUBRID. The node that executes this command stops and a failover occurs to the next slave node according to the CUBRID HA configuration.</p>
<p>How to use this utility is as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat stop
</pre></div>
</div>
<p>The database server process cannot be stopped with the <strong>cubrid server stop</strong> command.</p>
<p>Specify the database name at the end of the command to stop only the HA configuration processes (database server process, replication log copy process, and replication log reflection process) of a specific database in the node. For example, use the following command to run the database <em>testdb</em> only:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat stop testdb
</pre></div>
</div>
<p>If you want to deactivate CUBRID HA feature immediately, add -i option into the “cubrid heartbeat stop” command. This option is used when the speedy quitting is required because the DB server process is working improperly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat stop -i
or
$cubrid heartbeat stop --immediately
</pre></div>
</div>
</div>
<div class="section" id="copylogdb">
<h4>copylogdb<a class="headerlink" href="#copylogdb" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to start or stop the <strong>copylogdb</strong> process that copies the transaction logs for the <em>db_name</em> of a specific peer_node in the CUBRID HA configuration. You can pause log copy for rebuilding replications in the middle of operation and then rerun it whenever you want.</p>
<p>Even though only the <strong>cubrid heartbeat copylogdb start</strong> command has succeeded, the functions of detecting and recovering the failure between the nodes are executed. Since the node is the target of failover, the slave node can be changed to the master node.</p>
<p>How to use this utility is as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat copylogdb &lt;start|stop&gt; [ -h &lt;host-name&gt; ] db_name peer_node
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">host</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">host</span> <span class="n">where</span> <span class="n">copylogdb</span> <span class="n">command</span> <span class="n">will</span> <span class="n">be</span> <span class="n">executed</span>
</pre></div>
</div>
<p>When <em>nodeB</em> is a node to run a command and <em>nodeA</em> is <em>peer_node</em>, you can run the command as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat copylogdb stop testdb nodeA
[nodeB]$ cubrid heartbeat copylogdb start testdb nodeA
</pre></div>
</div>
<p>When the <strong>copylogdb</strong> process is started/stopped, the configuration information of the <strong>cubrid_ha.conf</strong> is used. We recommend that you do not change the configuration as possible after you have set the configuration once. If you need to change it, it is recommended to restart the whole nodes.</p>
</div>
<div class="section" id="applylogdb">
<h4>applylogdb<a class="headerlink" href="#applylogdb" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to start or stop the <strong>copylogdb</strong> process that reflects the transaction logs for the <em>db_name</em> of a specific peer_node in the CUBRID HA configuration. You can pause log copy for rebuilding replications in the middle of operation and then rerun it whenever you want.</p>
<p>Even though only the <strong>cubrid heartbeat copylogdb start</strong> command has succeeded, the functions of detecting and recovering the failure between the nodes are executed. Since the node is the target of failover, the slave node can be changed to the master node.</p>
<p>How to use this utility is as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat applylogdb &lt;start|stop&gt; [ -h &lt;host-name&gt; ] db_name peer_node
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">host</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">host</span> <span class="n">where</span> <span class="n">appplylogdb</span> <span class="n">command</span> <span class="n">will</span> <span class="n">be</span> <span class="n">executed</span>
</pre></div>
</div>
<p>When <em>nodeB</em> is a node to run a command and <em>nodeA</em> is <em>peer_node</em>, you can run the command as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat applylogdb stop testdb nodeA
[nodeB]$ cubrid heartbeat applylogdb start testdb nodeA
</pre></div>
</div>
<p>When the <strong>applylogdb</strong> process is started/stopped, the configuration information of the <strong>cubrid_ha.conf</strong> is used. We recommend that you do not change the configuration as possible after you have set the configuration once. If you need to change it, it is recommended to restart the whole nodes.</p>
</div>
<div class="section" id="reload">
<h4>reload<a class="headerlink" href="#reload" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to retrieve the CUBRID HA information again.
To start/stop HA replication processes of the added/removed nodes at once, you can use “<strong>cubrid heartbeat replication start/stop</strong>” command.</p>
<p>How to use this utility is as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat reload
</pre></div>
</div>
<p>Reconfigurable parameters are <strong>ha_node_list</strong> and <strong>ha_replica_list</strong>. Even if an error occurs on a special node during running this command, the left jobs are continued. After <strong>reload</strong> command is finished, check if the reconfiguration of nodes is applied well or not. If it fails, find the reason and resolve it.</p>
</div>
<div class="section" id="replication-or-repl-start">
<h4>replication(or repl) start<a class="headerlink" href="#replication-or-repl-start" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to run in batch HA processes(copylogdb/applylogdb) related to a specific node; in general, it is used to run in batch HA replication processes of added nodes after running <strong>cubrid heartbeat reload</strong>.</p>
<p><strong>replication</strong> command can be abbreviated by <strong>repl</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">heartbeat</span> <span class="n">repl</span> <span class="n">start</span> <span class="o">&lt;</span><span class="n">node_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>node_name</em>: one of nodes specified in <strong>ha_node_list</strong> of cubrid_ha.conf.</li>
</ul>
</div>
<div class="section" id="replication-or-repl-stop">
<h4>replication(or repl) stop<a class="headerlink" href="#replication-or-repl-stop" title="Permalink to this headline">¶</a></h4>
<p>This utility is used to stop in batch HA processes(copylogdb/applylogdb) related to a specific node; in general, it is used to stop in batch HA replication processes of removed nodes after running <strong>cubrid heartbeat reload</strong>.</p>
<p><strong>replication</strong> command can be abbreviated by <strong>repl</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">heartbeat</span> <span class="n">repl</span> <span class="n">stop</span> <span class="o">&lt;</span><span class="n">node_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>node_name</em>: one of nodes specified in <strong>ha_node_list</strong> of cubrid_ha.conf.</li>
</ul>
</div>
<div class="section" id="status">
<h4>status<a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat status [-v] [ -h &lt;host-name&gt; ]
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">host</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">host</span> <span class="n">where</span> <span class="n">status</span> <span class="n">command</span> <span class="n">will</span> <span class="n">be</span> <span class="n">executed</span>
</pre></div>
</div>
<p>This utility is used to output the information of CUBRID HA group and CUBRID HA components. How to use this utility is as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat status
@ cubrid heartbeat status

 HA-Node Info (current nodeB, state slave)
   Node nodeB (priority 2, state slave)
   Node nodeA (priority 1, state master)


 HA-Process Info (master 2143, state slave)
   Applylogdb testdb@localhost:/home/cubrid/DB/testdb_nodeA (pid 2510, state registered)
   Copylogdb testdb@nodeA:/home/cubrid/DB/testdb_nodeA (pid 2505, state registered)
   Server testdb (pid 2393, state registered_and_standby)
</pre></div>
</div>
<p>The -v option displays detailed information about the node.
* score: Indicates the priority of the node, with a lower score indicating a higher priority.
* missed heartbeat: Indicates the loss rate of heartbeat signals sent between nodes configured in a HA environment. If this value is unusually high, the configuration, network, or firewall settings should be inspected.</p>
<p>The event occurrence times for the Applylogdb, Copylogdb, and Server processes are also displayed. If no event has occurred, it is displayed as “00:00:00.000.”
* registered-time: The time when a process startup request was made via a user command.
* deregistered-time: The time when a remote process stop request was made via a user command (applicable only to copylogdb and applylogdb).
* shutdown-time : The time that HA-manager(cub_master) stopped the process
* start-time : The time that HA-manager(cub_master) restarted the process</p>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat status -v
@ cubrid heartbeat status

HA-Node Info (current cubrid1, state master)
  Node cubrid2 (priority 2, state slave)
    - score 2
    - missed heartbeat 0
  Node cubrid1 (priority 1, state master)
    - score -32767
    - missed heartbeat 0

HA-Process Info (master 7392, state master)
Copylogdb testdb@cubrid2:/home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/databases/testdb_cubrid2 (pid 7841, state registered)
 - exec-path [/home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/bin/cub_admin]
 - argv      [cub_admin copylogdb -L /home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/databases/testdb_cubrid2 -m sync testdb@bagus2 ]
 - registered-time   08/26/24 14:28:37.019
 - deregistered-time 00/00/00 00:00:00.000
 - shutdown-time     08/26/24 14:28:35.010
 - start-time        08/26/24 14:28:36.012
Applylogdb testdb@localhost:/home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/databases/testdb_cubrid2 (pid 7746, state registered)
 - exec-path [/home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/bin/cub_admin]
 - argv      [cub_admin applylogdb -L /home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/databases/testdb_cubrid2 --max-mem-size=300 testdb@localhost ]
  - registered-time   08/26/24 14:27:14.566
  - deregistered-time 00/00/00 00:00:00.000
  - shutdown-time     08/26/24 14:27:12.552
  - start-time        08/26/24 14:27:13.558
 Server testdb (pid 7904, state registered_and_active)
  - exec-path [/home/cubha/CUBRID-11.3.1.1142-bee7aa8-Linux.x86_64/bin/cub_server]
  - argv      [cub_server testdb ]
  - registered-time   08/26/24 14:29:28.955
  - deregistered-time 00/00/00 00:00:00.000
  - shutdown-time     08/26/24 14:29:27.593
  - start-time        08/26/24 14:29:28.594
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>act</strong>, <strong>deact</strong>, and <strong>deregister</strong> commands which were used in versions lower than CUBRID 9.0 are no longer used.</p>
</div>
</div>
</div>
<div class="section" id="registering-ha-to-cubrid-service">
<span id="cubrid-service-util"></span><h3>Registering HA to cubrid service<a class="headerlink" href="#registering-ha-to-cubrid-service" title="Permalink to this headline">¶</a></h3>
<p>If you register heartbeat to CUBRID service, you can use the utilities of <strong>cubrid service</strong> to start, stop or check all the related processes at once. The processes specified by <strong>service</strong> parameter in [<strong>service</strong>] section in <strong>cubrid.conf</strong> file are registered to CUBRID service. If this parameter includes <strong>heartbeat</strong>, you can start/stop all the service processes and the HA-related processes by using <strong>cubrid service start</strong> / <strong>stop</strong> command.</p>
<p>How to configure <strong>cubrid.conf</strong> file is shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cubrid.conf</span>

<span class="o">...</span>

<span class="p">[</span><span class="n">service</span><span class="p">]</span>

<span class="o">...</span>

<span class="n">service</span><span class="o">=</span><span class="n">broker</span><span class="p">,</span><span class="n">heartbeat</span>

<span class="o">...</span>

<span class="p">[</span><span class="n">common</span><span class="p">]</span>

<span class="o">...</span>

<span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</div>
<div class="section" id="applyinfo">
<span id="cubrid-applyinfo"></span><h3>applyinfo<a class="headerlink" href="#applyinfo" title="Permalink to this headline">¶</a></h3>
<p>This utility is used to check the copied and applied status of replication logs by CUBRID HA.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">applyinfo</span> <span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">database</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>database-name</em> : Specifies the name of a server to monitor. A node name is not included.</li>
</ul>
<p>The following shows the [options] used on <strong>cubrid applyinfo</strong>.</p>
<dl class="option">
<dt id="cmdoption-applyinfo-r">
<code class="descname">-r</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--remote-host-name</code><code class="descclassname">=HOSTNAME</code><a class="headerlink" href="#cmdoption-applyinfo-r" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the name of a target node in which transaction logs are copied. Using this option will output the information of active logs (Active Info.) of a target node.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-applyinfo-a">
<code class="descname">-a</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--applied-info</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-applyinfo-a" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs the information of replication reflection of a node executing cubrid applyinfo. The <strong>-L</strong> option is required to use this option.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-applyinfo-l">
<code class="descname">-L</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--copied-log-path</code><code class="descclassname">=PATH</code><a class="headerlink" href="#cmdoption-applyinfo-l" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the location of transaction logs copied from the other node. Using this option will output the information of transaction logs copied (Copied Active Info.) from the other node.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-applyinfo-p">
<code class="descname">-p</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--pageid</code><code class="descclassname">=ID</code><a class="headerlink" href="#cmdoption-applyinfo-p" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs the information of a specific page in the copied logs. This is available only when the  <strong>-L</strong> option is enabled.  The default is 0, it means the active page.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-applyinfo-v">
<code class="descname">-v</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-applyinfo-v" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs detailed information.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-applyinfo-i">
<code class="descname">-i</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--interval</code><code class="descclassname">=SECOND</code><a class="headerlink" href="#cmdoption-applyinfo-i" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs the copied status and applied status of transaction logs per specified seconds. To see the delayed status of the replicated log, this option is mandatory.</p>
</dd></dl>

<p><strong>Example</strong></p>
<p>The following example shows how to check log information (Active Info.) of the master node, the status information of log copy (Copied Active Info.) of the slave node, and the applylogdb info (Applied Info.) of the slave node by executing <strong>applyinfo</strong> in the slave node.</p>
<ul class="simple">
<li>Applied Info.: Shows the status information after the slave node applies the replication log.</li>
<li>Copied Active Info.: Shows the status information after the slave node copies the replication log.</li>
<li>Active Info.: Shows the status information after the master node records the transaction log.</li>
<li>Delay in Copying Active Log: Shows the status information which the transaction logs’ copy is delayed.</li>
<li>Delay in Applying Copied Log: Shows the status information which the transaction logs’ application is delayed.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB] $ cubrid applyinfo -L /home/cubrid/DB/testdb_nodeA -r nodeA -a -i 3 testdb

 *** Applied Info. ***
Insert count                   : 289492
Update count                   : 71192
Delete count                   : 280312
Schema count                   : 20
Commit count                   : 124917
Fail count                     : 0

 *** Copied Active Info. ***
DB name                        : testdb
DB creation time               : 04:29:00.000 PM 11/04/2012 (1352014140)
EOF LSA                        : 27722 | 10088
Append LSA                     : 27722 | 10088
HA server state                : active

 *** Active Info. ***
DB name                        : testdb
DB creation time               : 04:29:00.000 PM 11/04/2012 (1352014140)
EOF LSA                        : 27726 | 2512
Append LSA                     : 27726 | 2512
HA server state                : active

 *** Delay in Copying Active Log ***
Delayed log page count         : 4
Estimated Delay                : 0 second(s)

 *** Delay in Applying Copied Log ***
Delayed log page count         : 1459
Estimated Delay                : 22 second(s)
</pre></div>
</div>
<p>The items shown by each status are as follows:</p>
<ul class="simple">
<li>Applied Info.<ul>
<li>Committed page: The information of committed pageid and offset of a transaction reflected last through replication log reflection process. The difference between this value and the EOF LSA of “Copied Active Info. represents the amount of replication delay.</li>
<li>Insert Count: The number of Insert queries reflected through replication log reflection process.</li>
<li>Update Count: The number of Update queries reflected through replication log reflection process.</li>
<li>Delete Count: The number of Delete queries reflected through replication log reflection process.</li>
<li>Schema Count: The number of DDL statements reflected through replication log reflection process.</li>
<li>Commit Count: The number of transactions reflected through replication log reflection process.</li>
<li>Fail Count: The number of DML and DDL statements in which log reflection through replication log reflection process fails.</li>
</ul>
</li>
<li>Copied Active Info.<ul>
<li>DB name: Name of a target database in which the replication log copy process copies logs</li>
<li>DB creation time: The creation time of a database copied through replication log copy process</li>
<li>EOF LSA: Information of pageid and offset copied at the last time on the target node by the replication log copy process. There will be a delay in copying logs as much as difference with the EOF LSA value of “Active Info.” and with the Append LSA value of “Copied Active Info.”</li>
<li>Append LSA: Information of pageid and offset written at the last time on the disk by the replication log copy process. This value can be less than or equal to EOF LSA. There will be a delay in copying logs as much as difference between the EOF LSA value of “Copied Active Info.” and this value.</li>
<li>HA server state: Status of a database server process which replication log copy process receives logs from. For details on status, see <a class="reference internal" href="#ha-server"><span class="std std-ref">Servers</span></a>.</li>
</ul>
</li>
<li>Active Info.<ul>
<li>DB name: Name of a database whose node was configured in the <strong>-r</strong> option.</li>
<li>DB creation time: Database creation time of a node that is configured in the <strong>-r</strong> option.</li>
<li>EOF LSA: The last information of pageid and offset of a database transaction log of a node that is configured in the <strong>-r</strong> option. There will be a delay in copying logs as much as difference between the EOF LSA value of “Copied Active Info.” and this value.</li>
<li>Append LSA: Information of pageid and offset written at the last time on the disk by the database whose node was configured in the <strong>-r</strong> option.</li>
<li>HA server state: The server status of a database server whose node was configured in the <strong>-r</strong> option.</li>
</ul>
</li>
<li>Delay in Copying Active Log<ul>
<li>Delayed log page count: the count of transaction log pages which the copy is delayed.</li>
<li>Estimated Delay: the expected time which the logs copying is completed.</li>
</ul>
</li>
<li>Delay in Applying Copied Log<ul>
<li>Delayed log page count: the count of transaction log pages which the application is delayed.</li>
<li>Estimated Delay: the expected time which the logs applying is completed.</li>
</ul>
</li>
</ul>
<p>When you run this command in replica node, if “ha_replica_delay=30s” is specified in cubrid.conf, the following information is printed out additionally.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">***</span> <span class="n">Replica</span><span class="o">-</span><span class="n">specific</span> <span class="n">Info</span><span class="o">.</span> <span class="o">***</span>
<span class="n">Deliberate</span> <span class="n">lag</span>                 <span class="p">:</span> <span class="mi">30</span> <span class="n">second</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">Last</span> <span class="n">applied</span> <span class="n">log</span> <span class="n">record</span> <span class="n">time</span>   <span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">20</span> <span class="mi">11</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">10</span>
</pre></div>
</div>
<p>Each item of the status information is as below.</p>
<ul class="simple">
<li>Replica-specific Info.<ul>
<li>Deliberate lag: delayed time a user defined by ha_replica_delay parameter</li>
<li>Last applied log record time: the time where the replication log of being applied in the replica node recently was actually applied in the master node.</li>
</ul>
</li>
</ul>
<p>When you run this command in replica node, if “ha_replica_delay=30s” and “ha_replica_time_bound=2013-06-20 11:31:00” are specified in cubrid.conf, “ha_replica_delay=30s” is ignored and the following information is printed out additionally.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">***</span> <span class="n">Replica</span><span class="o">-</span><span class="n">specific</span> <span class="n">Info</span><span class="o">.</span> <span class="o">***</span>
<span class="n">Last</span> <span class="n">applied</span> <span class="n">log</span> <span class="n">record</span> <span class="n">time</span>   <span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">20</span> <span class="mi">11</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span><span class="mi">17</span>
<span class="n">Will</span> <span class="n">apply</span> <span class="n">log</span> <span class="n">records</span> <span class="n">up</span> <span class="n">to</span>   <span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">20</span> <span class="mi">11</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">00</span>
</pre></div>
</div>
<p>Each item of the status information is as below.</p>
<ul class="simple">
<li>Replica-specific Info.<ul>
<li>Last applied log record time: the time where the replication log of being applied in the replica node recently was actually applied in the master node.</li>
<li>Will apply log records up to: the replica node will apply the master node’s logs replicated up to this time.</li>
</ul>
</li>
</ul>
<p>When applylogdb stops the replication after the time of being specified by <strong>ha_replica_time_bound</strong>,  the error message which is printed out in the file, <strong>$CUBRID/log/</strong><em>db-name</em><strong>&#64;</strong><em>local-node-name</em><strong>_applylogdb_</strong><em>db-name</em><strong>_</strong><em>remote-node-name</em><strong>.err</strong> is as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Time</span><span class="p">:</span> <span class="mi">06</span><span class="o">/</span><span class="mi">20</span><span class="o">/</span><span class="mi">13</span> <span class="mi">11</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mf">05.549</span> <span class="o">-</span> <span class="n">ERROR</span> <span class="o">***</span> <span class="n">file</span> <span class="o">../../</span><span class="n">src</span><span class="o">/</span><span class="n">transaction</span><span class="o">/</span><span class="n">log_applier</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">line</span> <span class="mi">7913</span> <span class="n">ERROR</span> <span class="n">CODE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1040</span> <span class="n">Tran</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EID</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">HA</span> <span class="n">generic</span><span class="p">:</span> <span class="n">applylogdb</span> <span class="n">paused</span> <span class="n">since</span> <span class="n">it</span> <span class="n">reached</span> <span class="n">a</span> <span class="n">log</span> <span class="n">record</span> <span class="n">committed</span> <span class="n">on</span> <span class="n">master</span> <span class="n">at</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">20</span> <span class="mi">11</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">00</span> <span class="ow">or</span> <span class="n">later</span><span class="o">.</span>
<span class="n">Adjust</span> <span class="ow">or</span> <span class="n">remove</span> <span class="n">ha_replica_time_bound</span> <span class="ow">and</span> <span class="n">restart</span> <span class="n">applylogdb</span> <span class="n">to</span> <span class="n">resume</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="cubrid-changemode">
<span id="id6"></span><h3>cubrid changemode<a class="headerlink" href="#cubrid-changemode" title="Permalink to this headline">¶</a></h3>
<p>This utility is used to check and change the server status of CUBRID HA.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">changemode</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">database</span><span class="o">-</span><span class="n">name</span><span class="nd">@node</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>database-name&#64;node-name</em>: Specifies the name of a server to be checked or changed and separates each node name by using &#64;. If [options] is omitted, server status is displayed.</li>
</ul>
<p>The following shows [options] used in <strong>cubrid changemode</strong>.</p>
<dl class="option">
<dt id="cmdoption-changemode-m">
<code class="descname">-m</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--mode</code><code class="descclassname">=MODE</code><a class="headerlink" href="#cmdoption-changemode-m" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the server status. You can enter one of the following:</p>
<p><strong>standby</strong>, <strong>maintenance</strong> or <strong>active</strong>.</p>
<ul class="simple">
<li>You can change a mode as <strong>maintenance</strong> if a server’s status is <strong>standby</strong>.</li>
<li>You can change a mode as <strong>standby</strong> if a server’s status is <strong>maintenance</strong>.</li>
<li>You can change a mode as <strong>active</strong> if a server’s status is <strong>to-be-active</strong>. However, this should be used together with <strong>–force</strong> option. See the below descrioption regarding <strong>–force</strong> option.</li>
</ul>
</dd></dl>

<dl class="option">
<dt id="cmdoption-changemode-f">
<code class="descname">-f</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--force</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-changemode-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures whether or not to forcibly change the server status. This option must be configured if you want to change the server status from to-be-active to active.   |</p>
<p>If it is not configured, the status will not be changed to active.
Forcibly change may cause data inconsistency among replication nodes; so it is not recommended.                                                                       |</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-changemode-t">
<code class="descname">-t</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--timeout</code><code class="descclassname">=SECOND</code><a class="headerlink" href="#cmdoption-changemode-t" title="Permalink to this definition">¶</a></dt>
<dd><p>The default is 5(seconds). Configures the waiting time for the normal completion of the transaction that is being processed when the node status switches from <strong>standby</strong> to <strong>maintenance</strong>.</p>
<p>If the transaction is still in progress beyond the configured time, it will be forced to terminate and switch to <strong>maintenance</strong> status; if all transactions have completed normally within the configured time, it will switch to <strong>maintenance</strong> status immediately.</p>
</dd></dl>

<p><strong>Status Changeable</strong></p>
<p>This table shows changeable modes depending on current status.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td colspan="2" rowspan="2">&#160;</td>
<td colspan="3"><strong>Changeable</strong></td>
</tr>
<tr class="row-even"><td>active</td>
<td>standby</td>
<td>maintenance</td>
</tr>
<tr class="row-odd"><td rowspan="5"><strong>Current Status</strong></td>
<td>standby</td>
<td>X</td>
<td>O</td>
<td>O</td>
</tr>
<tr class="row-even"><td>to-be-standby</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>active</td>
<td>O</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-even"><td>to-be-active</td>
<td>O*</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>maintenance</td>
<td>X</td>
<td>O</td>
<td>O</td>
</tr>
</tbody>
</table>
<p>* When the server status is to-be-active, forcibly change may cause data inconsistency among replication nodes. It is not recommended if you are not skilled enough.</p>
<p><strong>Example</strong></p>
<p>The following example shows how to switch the <em>testdb</em> server status in the localhost node to maintenance. The waiting time for all transactions in progress to complete normally is 5 seconds, which is the default value for the <strong>-t</strong> option. If all transactions are complete within this time limit, the status will be switched immediately. However, if there are transactions still being processed after this time limit, they will be rolled back before changing the status.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid changemode -m maintenance testdb@localhost
The server &#39;testdb@localhost&#39;&#39;s current HA running mode is maintenance.
</pre></div>
</div>
<p>The following example shows how to retrieve status of the <em>testdb</em> server in the localhost node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid changemode testdb@localhost
The server &#39;testdb@localhost&#39;&#39;s current HA running mode is active.
</pre></div>
</div>
</div>
<div class="section" id="monitoring-cubrid-manager-ha">
<h3>Monitoring CUBRID Manager HA<a class="headerlink" href="#monitoring-cubrid-manager-ha" title="Permalink to this headline">¶</a></h3>
<p>CUBRID Manager is a dedicated CUBRID database management tool that provides the CUBRID database management and query features in a GUI environment. CUBRID Manager provides the HA dashboard, which shows the relationship diagram for the CUBRID HA group and server status. For details, see CUBRID Manager manual.</p>
</div>
</div>
<div class="section" id="structures-of-ha">
<h2>Structures of HA<a class="headerlink" href="#structures-of-ha" title="Permalink to this headline">¶</a></h2>
<p>There are four possible structures for CUBRID HA: The default structure, multiple-slave node structure, load balancing structure, and multiple-standby server structure. In the table below, M stands for a master node, S for a slave node, and R for a replica node.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Structure</th>
<th class="head">Node structure (M:S:R)</th>
<th class="head">Characteristic</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Default Structure</td>
<td>1:1:0</td>
<td>The most basic structure of CUBRID HA consists of one master node and one slave node and provides availability
which is a unique feature of CUBRID HA.</td>
</tr>
<tr class="row-odd"><td>Multiple-Slave Node Structure</td>
<td>1:N:0</td>
<td>This is a structure in which availability is increased by several slave nodes. However,
note that there may be a situation in which data is inconsistent in the CUBRID HA group when multiple failures occur.</td>
</tr>
<tr class="row-even"><td>Load Balancing Structure</td>
<td>1:1:N</td>
<td>Several replica nodes are added in the basic structure. Read service load can be distributed, and the HA load is reduced,
comparing to a multiple-slave node structure. Note that replica nodes do not failover.</td>
</tr>
<tr class="row-odd"><td>Multiple-Standby Server Structure</td>
<td>1:1:0</td>
<td>Basically, this structure is the same as the basic structure. However, several slave nodes are installed on a single physical server.</td>
</tr>
</tbody>
</table>
<p>In the following description, it is assumed that there is no data in the testdb database on each node. To build HA feature as replicating database, see <a class="reference internal" href="#building-replication"><span class="std std-ref">Building Replication</span></a> or <a class="reference internal" href="#rebuilding-replication"><span class="std std-ref">Rebuilding Replication Script</span></a>.</p>
<div class="section" id="basic-structure-of-ha">
<h3>Basic Structure of HA<a class="headerlink" href="#basic-structure-of-ha" title="Permalink to this headline">¶</a></h3>
<p>The most basic structure of CUBRID HA consists of one master node and one slave node.</p>
<p>The default configuration is one master node and one slave node. To distribute the write load, a multi-slave node or load-distributed configuration is recommended. In addition, to access a specific node such as a slave node or replica node in read-only mode, configure the Read Only broker or the Preferred Host Read Only broker. For details about broker configuration, see <a class="reference internal" href="#duplexing-brokers"><span class="std std-ref">Duplexing Brokers</span></a>.</p>
<p><strong>An Example of Node Configuration</strong></p>
<img alt="_images/image30.png" src="_images/image30.png" />
<p>You can configure each node in the basic structure of HA as shown below:</p>
<ul>
<li><p class="first"><strong>node A</strong> (master node)</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following example shows how to configure <strong>cubrid_ha.conf</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>node B</strong> (slave node): Configure this node in the same manner as <em>node A</em>.</p>
</li>
</ul>
<p>For the <strong>databases.txt</strong> file of a broker node, it is necessary to configure the list of hosts configured as HA in <strong>db-host</strong> according to their priority. The following example shows the <strong>databases.txt</strong> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name    vol-path                  db-host       log-path                   lob-base-path</span>
<span class="n">testdb</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>     <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p>The <strong>cubrid_broker.conf</strong> file can be set in a variety of ways according to configuration of the broker. It can also be configured as separate equipment with the <strong>databases.txt</strong> file.</p>
<p>The example below shows that the RW broker is set in each node, and <em>node A</em> and <em>node B</em> have the same value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">%</span><span class="n">RW_broker</span><span class="p">]</span>
<span class="o">...</span>

<span class="c1"># Broker mode setting parameter</span>
    <span class="n">ACCESS_MODE</span>             <span class="o">=</span><span class="n">RW</span>
</pre></div>
</div>
<p><strong>Connection Configuration of Applications</strong></p>
<p>See <a class="reference internal" href="#ha-jdbc-conf"><span class="std std-ref">JDBC Configuration</span></a>, <a class="reference internal" href="#ha-cci-conf"><span class="std std-ref">CCI Configuration</span></a>, and <a class="reference internal" href="#ha-php-conf"><span class="std std-ref">PHP Configuration</span></a> in Environment Configuration.</p>
<p><strong>Remark</strong></p>
<p>The moving path of a transaction log in these configurations is as follows:</p>
<img alt="_images/image31.png" src="_images/image31.png" />
</div>
<div class="section" id="multiple-slave-node-structure">
<h3>Multiple-Slave Node Structure<a class="headerlink" href="#multiple-slave-node-structure" title="Permalink to this headline">¶</a></h3>
<p>In multiple-slave node structure, there is one master node and several slave nodes to improve the service availability of CUBRID.</p>
<p>Because replication log copy process and replication log reflection process are running at all nodes in the CUBRID HA group, a load of copying replication log occurs. Therefore, all nodes in the CUBRID HA group have high network and disk usage.</p>
<p>Because there are many nodes with HA enabled, read and write services never fail as long as a single node is alive.</p>
<p>In the multiple-slave node structure, the node becoming a master node when failover occurs is determined by the order specified in <strong>ha_node_list</strong>. If the value of <strong>ha_node_list</strong> is node1:node2:node3 and the master node is <em>node A</em>, <em>node B</em> will become a new master node when the master node fails.</p>
<p><strong>An Example of Node Configuration</strong></p>
<img alt="_images/image32.png" src="_images/image32.png" />
<p>You can configure each node in the basic structure of HA as shown below:</p>
<ul>
<li><p class="first"><strong>node A</strong> (master node)</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following example shows how to configure <strong>cubrid_ha.conf</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span><span class="p">:</span><span class="n">nodeC</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>node B</strong>, <strong>node C</strong> (slave node): Configure this node in the same manner as <em>node A</em>.</p>
</li>
</ul>
<p>You must enter the list of hosts configured in HA in order of priority in the <strong>databases.txt</strong> file of a broker node. The following is an example of the <strong>databases.txt</strong> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name   vol-path                   db-host             log-path                   lob-base-path</span>
<span class="n">testdb</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>     <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span><span class="p">:</span><span class="n">nodeC</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p>The <strong>cubrid_broker.conf</strong> file can be set in a variety of ways according to configuration of the broker. It can also be configured as separate equipment with the <strong>databases.txt</strong> file. In this example, the RW broker is configured in <em>node A</em>, <em>node B</em>, and <em>node C</em>.</p>
<p>The following is an example of the <strong>databases.txt</strong> file in <em>node A</em>, <em>node B</em>, and <em>node C</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">%</span><span class="n">RW_broker</span><span class="p">]</span>
<span class="o">...</span>

<span class="c1"># Broker mode setting parameter</span>
<span class="n">ACCESS_MODE</span>             <span class="o">=</span><span class="n">RW</span>
</pre></div>
</div>
<p><strong>Connection Configuration of Applications</strong></p>
<p>Connect the application to access to the broker of <em>node A</em>, <em>node B</em>, or <em>node C</em>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span>
    <span class="s">&quot;jdbc:CUBRID:nodeA:33000:testdb:::?charSet=utf-8&amp;altHosts=nodeB:33000,nodeC:33000&quot;</span><span class="p">,</span> <span class="s">&quot;dba&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>For details, see <a class="reference internal" href="#ha-jdbc-conf"><span class="std std-ref">JDBC Configuration</span></a>, <a class="reference internal" href="#ha-cci-conf"><span class="std std-ref">CCI Configuration</span></a>, and <a class="reference internal" href="#ha-php-conf"><span class="std std-ref">PHP Configuration</span></a> in Environment Configuration.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The data in the CUBRID HA group may lose integrity when there are multiple failures in this structure and the example is shown below.</p>
<ul class="simple">
<li>n a situation where a failover occurs in the first slave node while replication in the second slave node is being delayed due to restart</li>
<li>In a situation where a failover re-occurs before replication reflection of a new master node is not complete due to frequent failover</li>
</ul>
<p>In addition, if the mode of replication log copy process is ASYNC, the data in the CUBRID HA group may lose integrity.</p>
<p class="last">If the data in the CUBRID HA group loses integrity for any of the reasons above, all data in the CUBRID HA group should be fixed as the same by using <a class="reference internal" href="#building-replication"><span class="std std-ref">Building Replication</span></a> or <a class="reference internal" href="#rebuilding-replication"><span class="std std-ref">Rebuilding Replication Script</span></a>.</p>
</div>
<p><strong>Remark</strong></p>
<p>The moving path of a transaction log in these configurations is as follows:</p>
<img alt="_images/image33.png" src="_images/image33.png" />
</div>
<div class="section" id="load-balancing-structure">
<h3>Load Balancing Structure<a class="headerlink" href="#load-balancing-structure" title="Permalink to this headline">¶</a></h3>
<p>The load balancing structure increases the availability of the CUBRID service by placing several nodes in the HA configuration (one master node and one slave node) and distributes read-load.</p>
<p>Because the replica nodes receive replication logs from the master node in the HA configuration and maintain the same data, and because the master node in the HA configuration does not receive replication logs from the replica nodes, its network and disk usage rate is lower than that of the multiple-slave structure.</p>
<p>Because replica nodes are not included in the HA structure, they provide read service without failover, even when all other nodes in the HA structure fail.</p>
<p><strong>An Example of Node Configuration</strong></p>
<img alt="_images/image34.png" src="_images/image34.png" />
<p>You can configure each node in load balancing structure as shown below:</p>
<ul>
<li><p class="first"><strong>node A</strong> (master node)</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following example shows how to configure <strong>cubrid_ha.conf</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span>
<span class="n">ha_replica_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeC</span><span class="p">:</span><span class="n">nodeD</span><span class="p">:</span><span class="n">nodeE</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>node B</strong> (slave node): Configure this node in the same manner as <em>node A</em>.</p>
</li>
<li><p class="first"><strong>node C</strong>, <strong>node D</strong>, <strong>node E</strong> (replica node)</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>replica</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">replica</span>
</pre></div>
</div>
</li>
<li><p class="first">You can configure the <strong>cubrid_ha.conf</strong> file in the same manner as <em>node A</em>.</p>
</li>
</ul>
</li>
</ul>
<p>The <strong>cubrid_broker.conf</strong> can be set in a variety of ways according to configuration of the broker. It can also be configured as separate equipment with the <strong>databases.txt</strong> file.</p>
<p>In this example, broker and DB server exist on the same machine; the RW broker is configured in <em>node A</em> and <em>node B</em>; the SO broker with “CONNECT_ORDER=RANDOM” and “PREFERRED_HOSTS=localhost” is configured in <em>node C</em>, <em>node D</em> and <em>node E</em>. each of <em>node C</em>, <em>node D</em> or <em>node E</em> tries to connect to local DB server first because they are set as “PREFERRED_HOSTS=localhost”. When it is failed to connect to localhost, it tries to connect to one of <strong>db-hosts</strong> in <strong>databases.txt</strong> randomly because they are set as “CONNECT_ORDER=RANDOM”.</p>
<p>The following is an example of <strong>cubrid_broker.conf</strong> in <em>node A</em> and <em>node B</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">%</span><span class="n">RW_broker</span><span class="p">]</span>
<span class="o">...</span>

<span class="c1"># Broker mode setting parameter</span>
<span class="n">ACCESS_MODE</span>             <span class="o">=</span><span class="n">RW</span>
</pre></div>
</div>
<p>The following is an example <strong>cubrid_broker.conf</strong> in <em>node C</em>, <em>node D</em> and <em>node E</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">%</span><span class="n">PHRO_broker</span><span class="p">]</span>
<span class="o">...</span>

<span class="c1"># Broker mode setting parameter</span>
<span class="n">ACCESS_MODE</span>             <span class="o">=</span><span class="n">SO</span>
<span class="n">PREFERRED_HOSTS</span>         <span class="o">=</span><span class="n">localhost</span>
</pre></div>
</div>
<p>You must enter the list of DB server hosts in the order so that each broker can be connected appropriate HA or load balancing server in the <strong>databases.txt</strong> file of a broker node.</p>
<p>The following is an example of the <strong>databases.txt</strong> file in <em>node A</em> and <em>node B</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name    vol-path                  db-host       log-path             lob-base-path</span>
<span class="n">testdb</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>   <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">CUBRID</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p>The following is an example of the <strong>databases.txt</strong> file in <em>node C</em>, <em>node D</em> and <em>node E</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name    vol-path                db-host             log-path                    lob-base-path</span>
<span class="n">testdb</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>   <span class="n">nodeC</span><span class="p">:</span><span class="n">nodeD</span><span class="p">:</span><span class="n">nodeE</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>  <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">CUBRID</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p><strong>Connection Configuration of Applications</strong></p>
<p>Connect the application to access in read/write mode to the broker of <em>node A</em> or <em>node B</em>. The following is an example of a JDBC application.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span>
    <span class="s">&quot;jdbc:CUBRID:nodeA:33000:testdb:::?charSet=utf-8&amp;altHosts=nodeB:33000&quot;</span><span class="p">,</span> <span class="s">&quot;dba&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Connect the application to access in read-only mode to the broker of <em>node C</em>, <em>node D</em> or <em>node E</em>. The following is an example of a JDBC application. Configure “<strong>loadBalance</strong>=true” on the URL to connect randomly to the main host and hosts which are specified by <strong>altHosts</strong>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span>
    <span class="s">&quot;jdbc:CUBRID:nodeC:33000:testdb:::?charSet=utf-8&amp;loadBalance=true&amp;altHosts=nodeD:33000,nodeE:33000&quot;</span><span class="p">,</span> <span class="s">&quot;dba&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>For details, see <a class="reference internal" href="#ha-jdbc-conf"><span class="std std-ref">JDBC Configuration</span></a>, <a class="reference internal" href="#ha-cci-conf"><span class="std std-ref">CCI Configuration</span></a>, and <a class="reference internal" href="#ha-php-conf"><span class="std std-ref">PHP Configuration</span></a> in Environment Configuration.</p>
<p><strong>Remark</strong></p>
<p>The path of a transaction log in these configurations is as follows:</p>
<img alt="_images/image35.png" src="_images/image35.png" />
</div>
<div class="section" id="multiple-standby-server-structure">
<h3>Multiple-Standby Server Structure<a class="headerlink" href="#multiple-standby-server-structure" title="Permalink to this headline">¶</a></h3>
<p>Although its node structure has a single master node and a single slave node, many slave nodes from different services are physically configured in a single server.</p>
<p>This structure is for very small services in which the reading load of slave nodes is light. It is strictly for the availability of the CUBRID service. For this reason, when a master node that failed after a failover has been restored, the load must be moved back to the original master node to minimize the load of the server with multiple-slave nodes.</p>
<img alt="_images/image36.png" src="_images/image36.png" />
<p><strong>An Example of Node Configuration</strong></p>
<p>You can configure each node in the basic structure of HA as shown below:</p>
<ul>
<li><p class="first"><strong>node AM</strong>, <strong>node AS</strong> : Configure them in the same manner.</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following example shows how to configure <strong>cubrid_ha.conf</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">10000</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubridA</span><span class="nd">@Host1</span><span class="p">:</span><span class="n">Host5</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdbA1</span><span class="p">,</span><span class="n">testdbA2</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>node BM</strong>, <strong>node BS</strong> : Configure them in the same manner.</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following example shows how to configure <strong>cubrid_ha.conf</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">10001</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubridB</span><span class="nd">@Host2</span><span class="p">:</span><span class="n">Host5</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdbB1</span><span class="p">,</span><span class="n">testdbB2</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>node CM</strong>, <strong>node CS</strong> : Configure them in the same manner.</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following example shows how to configure <strong>cubrid_ha.conf</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">10002</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubridC</span><span class="nd">@Host3</span><span class="p">:</span><span class="n">Host5</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdbC1</span><span class="p">,</span><span class="n">testdbC2</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>node DM</strong>, <strong>node DS</strong> : Configure them in the same manner.</p>
<ul>
<li><p class="first">Configure the <strong>ha_mode</strong> of the <strong>cubrid.conf</strong> file to <strong>on</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">The following is an example of the <strong>cubrid_ha.conf</strong> configuration.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_port_id</span><span class="o">=</span><span class="mi">10003</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubridD</span><span class="nd">@Host4</span><span class="p">:</span><span class="n">Host5</span>
<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdbD1</span><span class="p">,</span><span class="n">testdbD2</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="ha-constraints">
<h2>HA Constraints<a class="headerlink" href="#ha-constraints" title="Permalink to this headline">¶</a></h2>
<p><strong>Supported Platforms</strong></p>
<p>Currently, CUBRID HA is supported by Linux only. All nodes within CUBRID HA groups must be configured on the same platforms.</p>
<p><strong>Table Primary Key</strong></p>
<p>CUBRID HA synchronizes data among nodes with the following method (as known as transaction log shipping): It replicates the primary key-based replication logs generated from the server of a master node to a slave node and then reflects the replication logs to the slave node.</p>
<p>If data of the specific table within CUBRID HA groups is not synchronized, you should check whether the appropriate primary key has specified for the table.</p>
<p>On the partitioned table, the table which has promoted some partitions by the <strong>PROMOTE</strong> statement replicates all data to the slave. However, since the table does not have the primary key, the data changes on the table made by the master are not applied to the slave.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The data replication of tables without a primary key is supported by <strong>USE_SBR</strong> hint. For more information, see <a class="reference internal" href="sql/tuning.html#sql-hint"><span class="std std-ref">Using SQL Hint</span></a>.</p>
</div>
<p><strong>Java Stored Procedure</strong></p>
<p>Because using java stored procedures in CUBRID HA cannot be replicated, java stored procedures should be configured to all nodes. For more details, see <a class="reference internal" href="admin/control.html#cubrid-javasp-server-config"><span class="std std-ref">Configuring for CUBRID Java SP Server</span></a>.</p>
<p><strong>Method</strong></p>
<p>CUBRID HA synchronizes data among nodes within CUBRID HA groups based on replication logs, So using method that does not generate replication logs may cause data inconsistency among nodes within CUBRID HA groups.</p>
<p>Therefore, in CUBRID HA environment, it is not recommended to use method. (e.g. CALL login(‘dba’, ‘’) ON CLASS dbuser;)</p>
<p><strong>Standalone Mode</strong></p>
<p>The replication logs are not generated as for tasks performed in standalone mode. For this reason, data inconsistency among nodes within CUBRID HA groups may occur when performing tasks in standalone mode.</p>
<p><strong>Serial Cache</strong></p>
<p>To enhance performance, a serial cache does not access Heap and does not generate replication logs when retrieving or updating serial information. Therefore, if you use a serial cache, the current values of serial caches will be inconsistent among the nodes within CUBRID HA groups.</p>
<p><strong>cubrid backupdb -r</strong></p>
<p>This command is used to back up a specified database. If the <strong>-r</strong> option is used, logs that are not required for recovery will be deleted. This deletion may result in data inconsistency among nodes within CUBRID HA groups. Therefore, you must not use the <strong>-r</strong> option.</p>
<p><strong>On-line backup</strong></p>
<p>If you want to perform on-line backup in HA environment, add &#64;<em>hostname</em>after the database name. <em>hostname</em>is a name defined in $CUBRID_DATABASES/databases.txt. Specify “&#64;localhost” because you generally perform on-line backup on the local database.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">backupdb</span> <span class="o">-</span><span class="n">C</span> <span class="o">-</span><span class="n">D</span> <span class="o">./</span> <span class="o">-</span><span class="n">l</span> <span class="mi">0</span> <span class="o">-</span><span class="n">z</span> <span class="n">testdb</span><span class="nd">@localhost</span>
</pre></div>
</div>
<p>Backup during running database may occur disk I/O load. Therefore, it is recommended to run backup on slave DB than master DB.</p>
<p><strong>INCR/DECR Functions</strong></p>
<p>If you use <strong>INCR</strong> / <strong>DECR</strong> (click counter functions) in a slave node of HA configuration, an error is returned.</p>
<p><strong>LOB (BLOB/CLOB) Type</strong></p>
<p>In a CUBRID HA environment, the meta data (Locator) of a <strong>LOB</strong> column is replicated and <strong>LOB</strong> data is not replicated. Therefore, if storage of a <strong>LOB</strong> type is located on the local machine, no tasks corresponding to columns are allowed in slave nodes or master nodes after failover.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On previous version of CUBRID 9.1, using triggers in CUBRID HA can cause duplicate executions. This may cause data inconsistency among nodes within CUBRID HA groups. Therefore, you should not use triggers on the previous version of 9.1.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>UPDATE STATISTICS</strong></p>
<p>From 10.0, UPDATE STATISTICS statement is replicated.</p>
<p class="last">In the previous version of 10.0, UPDATE STATISTICS statement is not replicated; therefore, as a separated operation, you should run this statement in the slave/replica node.
When you want to apply UPDATE STATISTICS on the slave/replica node in the previous version of 10.0, you should run this in the CSQL with <strong>–sysadm</strong> and <strong>–write_on_slave</strong> options.</p>
</div>
</div>
<div class="section" id="operational-scenarios">
<h2>Operational Scenarios<a class="headerlink" href="#operational-scenarios" title="Permalink to this headline">¶</a></h2>
<div class="section" id="operation-scenario-during-read-write-service">
<h3>Operation Scenario during Read/Write Service<a class="headerlink" href="#operation-scenario-during-read-write-service" title="Permalink to this headline">¶</a></h3>
<p>The operation scenario written in this page is not affected by read/write services. Therefore, its impact on the services caused by CUBRID operation is very limited. There can be two types of operation scenarios in which failover occurs or it does not occur.</p>
<p><strong>When Failover Does Not Occur</strong></p>
<p>You can perform the following operations without stopping and restarting nodes in CUBRID HA groups.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="26%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">General Operation</th>
<th class="head">Scenario</th>
<th class="head">Consideration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Online Backup</td>
<td>Operation task is performed at each master node and
slave node each during operation.</td>
<td>Note that there may be a delay in the transaction of master node due to the operation task.</td>
</tr>
<tr class="row-odd"><td>Schema change (excluding basic key change),
index change, authorization change</td>
<td>When an operation task occurs at a master node, it is
automatically replication reflected to a slave node.</td>
<td>Because replication log is copied and reflected to a slave node after an operation task is completed in a master
node, operation task time is doubled. Changing schema must be processed without any failover.
Index change and authority change other than the schema change can be performed by stopping each node and
executing standalone mode (ex: the <strong>-S</strong> option of the <strong>csql</strong> utility) when the operation time is important.</td>
</tr>
<tr class="row-even"><td>Add volume</td>
<td>Operation task is performed at each DB regardless of
HA structure.</td>
<td>Note that there may be a delay in the transaction of master node due to the operation task.
If operation task time is an issue, operation task can be performed by stopping each node and executing standalone
mode (ex: the <strong>-S</strong>  of the <strong>cubrid addvoldb</strong>  utility).</td>
</tr>
<tr class="row-odd"><td>Failure node server replacement</td>
<td>It can be replaced without restarting the CUBRID HA
group when a failure occurs.</td>
<td>The failure node must be registered in the ha_node_list of CUBRID HA group, and the node name must not be changed
during replacement.</td>
</tr>
<tr class="row-even"><td>Failure broker server replacement</td>
<td>It can be replaced without restarting the broker when
a failure occurs.</td>
<td>The connection to a broker replaced at a client can be made by rcTime which is configured in URL string.</td>
</tr>
<tr class="row-odd"><td>DB server expansion</td>
<td>You can execute <strong>cubrid heartbeat reload</strong> in each
node after configuration change (ha_node_list,
ha_replica_list) without restarting the previously
configured CUBRID HA group.</td>
<td>Starts or stops the <strong>copylogdb/applylogdb</strong>
processes which were added or deleted by loading changed configuration information.</td>
</tr>
<tr class="row-even"><td>Broker server expansion</td>
<td>Run additional brokers without restarting
existing brokers.</td>
<td>Modify the URL string to connect to a broker where a client is added.</td>
</tr>
</tbody>
</table>
<p><strong>When Failover Occurs</strong></p>
<p>You must stop nodes in CUBRID HA group and complete operation before performing the following operations.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="26%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">General Operation</th>
<th class="head">Scenario</th>
<th class="head">Consideration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DB server configuration change</td>
<td>A node whose configuration is changed is restarted when
the configuration in  <strong>cubrid.conf</strong> is changed.</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Change broker configuration, add broker
, and delete broker</td>
<td>A broker whose configuration is changed is restarted
when the configuration in <strong>cubrid_broker.conf</strong>
is changed.</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>DBMS version patch</td>
<td>Restart nodes and brokers in HA group after version
patch.</td>
<td>Version patch means there is no change in the internal protocol, volume, and log of CUBRID.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="operation-scenario-during-read-service">
<h3>Operation Scenario during Read Service<a class="headerlink" href="#operation-scenario-during-read-service" title="Permalink to this headline">¶</a></h3>
<p>The operation scenario written in this page is only applied to read service. It is required to allow read service only or dynamically change mode configuration of broker to Read Only. There can be two types of operation scenarios in which failover occurs or it does not occur.</p>
<p><strong>When Failover Does Not Occur</strong></p>
<p>You can perform the following operations without stopping and restarting nodes in CUBRID HA groups.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="26%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">General Operation</th>
<th class="head">Scenario</th>
<th class="head">Consideration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Schema change (primary key change)</td>
<td>When an operation task is performed at the master node,
it is automatically reflected to the slave node.</td>
<td>In order to change the primary key, the existing key must be deleted and a new one added.  For this reason,
replication reflection may not occur due to the HA internal structure which reflects primary key-based replication
logs. Therefore, operation tasks must be performed during the read service.</td>
</tr>
<tr class="row-odd"><td>Schema change (excluding basic key change),
index change, authorization change</td>
<td>When an operation task is performed at the master node,
it is automatically reflected to the slave node.</td>
<td>Because replication log is copied and reflected to a slave node after an operation task is completed in a master
node, operation task time is doubled. Changing schema must be processed without any failover. Index change
and authority change other than the schema change can be performed by stopping each node and executing
standalone mode(ex: the span class=”nkeyword”&gt;-S option of <strong>csql</strong>) when the operation time is important.</td>
</tr>
</tbody>
</table>
<p><strong>When Failover Occurs</strong></p>
<p>You must stop nodes in CUBRID HA group and complete operation before performing the following operations.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="26%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">General Operation</th>
<th class="head">Scenario</th>
<th class="head">Consideration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DBMS version upgrade</td>
<td>Restart each node and broker in the CUBRID HA group
after they are upgraded.</td>
<td>A version upgrade means that there have been changed in the internal protocol, volume, or log of CUBRID.
Because there are two different versions of the protocols, volumes, and logs of a broker and server during an
upgrade, an operation task must be performed to make sure that each client and broker (before/after upgrade) are
connected to the corresponding counterpart in the same version.</td>
</tr>
<tr class="row-odd"><td>Massive data processing
(INSERT/UPDATE/DELETE)</td>
<td>Stop the node that must be changed, perform an
operation task, and then execute the node.</td>
<td>This processes massive data that cannot be segmented.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="operation-scenario-after-stopping-a-service">
<h3>Operation Scenario after Stopping a Service<a class="headerlink" href="#operation-scenario-after-stopping-a-service" title="Permalink to this headline">¶</a></h3>
<p>You must stop all nodes in CUBRID HA group before performing the following operation.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="26%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">General Operation</th>
<th class="head">Scenario</th>
<th class="head">Consideration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Changing the host name and IP of a DB server</td>
<td>Stop all nodes in the CUBRID HA group, and restart
them after the operation task.</td>
<td>When a host name has been changed, change the <strong>databases.txt</strong> file of each broker and reset the broker
connection with <strong>cubrid broker reset</strong>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="setting-replica-replication-delay">
<h3>Setting Replica Replication Delay<a class="headerlink" href="#setting-replica-replication-delay" title="Permalink to this headline">¶</a></h3>
<p>This scenario delays the replication of the master node data in replica node, and stops the replication of the master node data at the specific time, to detect the case which someone deleted the data by mistake and stop the replication at the specified time.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="26%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">General Operation</th>
<th class="head">Scenario</th>
<th class="head">Consideration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Setting the delay of replication
in replica node</td>
<td>Specify the term of replicated delay to replica node,
and let the replication stop on the specified time</td>
<td>specify <strong>ha_replica_delay</strong> and ha_replica_time_bound in cubrid.conf</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="building-replication">
<span id="id7"></span><h2>Building Replication<a class="headerlink" href="#building-replication" title="Permalink to this headline">¶</a></h2>
<div class="section" id="restoreslave">
<span id="cubrid-restoreslave"></span><h3>restoreslave<a class="headerlink" href="#restoreslave" title="Permalink to this headline">¶</a></h3>
<p><strong>cubrid restoreslave</strong> is the same as <strong>cubrid restoredb</strong> which restores a database from a backup but it includes several convenient features when rebuilding a slave or a replica. With <strong>cubrid restoreslave</strong>, user does not need to manually collect replication-related information from a backup output to create a replication catalog which is stored in <strong>db_ha_apply_info</strong>. It automatically reads any necessary information from a backup image and an active log and then it adds the relevant replication catalog into <strong>db_ha_apply_info</strong>. All you need to do is to provide two mandatory options: the state of the node where the backup image was created, and the hostname of the current master node. Please also refer <a class="reference internal" href="admin/admin_utils.html#restoredb"><span class="std std-ref">restoredb</span></a> for more details.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">restoreslave</span> <span class="p">[</span><span class="n">OPTION</span><span class="p">]</span> <span class="n">database</span><span class="o">-</span><span class="n">name</span>
</pre></div>
</div>
<dl class="option">
<dt id="cmdoption-restoreslave-s">
<code class="descname">-s</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--source-state</code><code class="descclassname">=STATE</code><a class="headerlink" href="#cmdoption-restoreslave-s" title="Permalink to this definition">¶</a></dt>
<dd><p>You need to specify the state of the node where the backup image was created. STATE may be ‘master’, ‘slave’, or ‘replica’</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-restoreslave-m">
<code class="descname">-m</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--master-host-name</code><code class="descclassname">=NAME</code><a class="headerlink" href="#cmdoption-restoreslave-m" title="Permalink to this definition">¶</a></dt>
<dd><p>You need to specify the hostname of the current master node.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-restoreslave-list">
<code class="descname">--list</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-restoreslave-list" title="Permalink to this definition">¶</a></dt>
<dd><p>This option displays information on backup files of a database; restoration procedure is not performed. For further information, see <strong>–list</strong> of <a class="reference internal" href="admin/admin_utils.html#restoredb"><span class="std std-ref">restoredb</span></a></p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-restoreslave-b">
<code class="descname">-B</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--backup-file-path</code><code class="descclassname">=PATH</code><a class="headerlink" href="#cmdoption-restoreslave-b" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify the directory where backup files are to be located by using the -B option. For further information, see -B of <a class="reference internal" href="admin/admin_utils.html#restoredb"><span class="std std-ref">restoredb</span></a></p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-restoreslave-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--output-file</code><code class="descclassname">=FILE</code><a class="headerlink" href="#cmdoption-restoreslave-o" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify a filename to store output messages. For further information, see -o of <a class="reference internal" href="admin/admin_utils.html#restoredb"><span class="std std-ref">restoredb</span></a></p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-restoreslave-u">
<code class="descname">-u</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--use-database-location-path</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-restoreslave-u" title="Permalink to this definition">¶</a></dt>
<dd><p>This option restores a database to the path specified in the database location file(databases.txt). For further information, see -u of <a class="reference internal" href="admin/admin_utils.html#restoredb"><span class="std std-ref">restoredb</span></a></p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-restoreslave-k">
<code class="descname">-k</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--keys-file-path</code><code class="descclassname">=PATH</code><a class="headerlink" href="#cmdoption-restoreslave-k" title="Permalink to this definition">¶</a></dt>
<dd><p>This option specifies the path of the key file required to restore. For more information, see <a class="reference internal" href="admin/admin_utils.html#restoredb"><span class="std std-ref">restoredb</span></a>.</p>
</dd></dl>

</div>
<div class="section" id="example-scenarios-of-building-replication">
<h3>Example Scenarios of Building Replication<a class="headerlink" href="#example-scenarios-of-building-replication" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will see various scenarios regarding adding a new node or removing a node during HA service.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Please note that only tables which have a primary key can be replicated.</li>
<li>Please note that volume paths between a master node and a slave (or replica) node must be the same.</li>
<li>A node includes replication processing information for all other nodes. For example, let’s consider HA architecture with a master <em>nodeA</em>, and two slaves <em>nodeB</em> and <em>nodeC</em>. <em>nodeA</em> has the replication process information for <em>nodeB</em> and <em>nodeC</em>; <em>nodeB</em> has information for <em>nodeB</em> and <em>nodeC</em>; <em>nodeC</em> has information for <em>nodeA</em> and <em>nodeC</em>.</li>
<li>Under the assumption of no failover, add a new node. If failover occurs during building replication, it is recommended to rebuild replication from the beginning.</li>
</ul>
</div>
<ul>
<li><p class="first"><a class="reference internal" href="#build-slave"><span class="std std-ref">Add a Slave after Stopping a Service</span></a></p>
<p>Add a new slave node after the service stops when operating a database with only a machine.</p>
</li>
<li><p class="first"><a class="reference internal" href="#build-another-slave"><span class="std std-ref">Build Another Slave during HA Service</span></a></p>
<p>Add a new slave using the existing slave node in the HA environment which one master and one slave are built.</p>
</li>
<li><p class="first"><a class="reference internal" href="#remove-slave"><span class="std std-ref">Remove a Slave during Service</span></a></p>
<p>Remove a slave when one master and two slaves are built.</p>
</li>
<li><p class="first"><a class="reference internal" href="#add-replica"><span class="std std-ref">Add a Replica during Service</span></a></p>
<p>Add a new replica node using the existing slave in the environment which a master and a slave are built.</p>
</li>
<li><p class="first"><a class="reference internal" href="#rebuild-slave"><span class="std std-ref">Rebuild a Slave during Service</span></a></p>
<p>Rebuild the slave using the existing master in the environment which a master, a slave and a replica are built. A new information should be updated by a user in the db_ha_apply_info catalog table.</p>
</li>
</ul>
<p>Now let’s see in detail about the above scenarios.</p>
<p>When you want to rebuild only the abnormal node in the HA environment, see <a class="reference internal" href="#rebuilding-replication"><span class="std std-ref">Rebuilding Replication Script</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li><p class="first">During building a replication, please note that added or rebuilt node’s replication information and replication logs should be updated or removed when you add, rebuild or remove a certain node.
Replication information is saved on the db_ha_apply_info table, and it has other nodes’ replication process information.</p>
<p>However, because role change does not occur in a replica node, the other node is not required to have replication information and a replication logs about the replica node. On the other hand, the replica node has all information about a master and a slave.</p>
</li>
<li><p class="first">When you run a scenario of <a class="reference internal" href="#rebuild-slave"><span class="std std-ref">Rebuild a Slave during Service</span></a>, you should update db_ha_apply_info’s information directly.</p>
</li>
<li><p class="first">When you run a scenario of <a class="reference internal" href="#build-slave"><span class="std std-ref">Add a Slave after Stopping a Service</span></a>, a slave is newly built; therefore, you can use the automatically added information.</p>
</li>
<li><p class="first">When you run a a scenario of <a class="reference internal" href="#build-another-slave"><span class="std std-ref">Build Another Slave during HA Service</span></a> or <a class="reference internal" href="#add-replica"><span class="std std-ref">Add a Replica during Service</span></a>, backed-up database from the existing slave is used; you can use as it exists because master’s db_ha_apply_info information is included in the existing slave.</p>
</li>
<li><p class="first">When you run a scenario of <a class="reference internal" href="#remove-slave"><span class="std std-ref">Remove a Slave during Service</span></a>, you must remove replication information about a removed slave. However, this information does not make a problem even if this is left.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="add-a-slave-after-stopping-a-service">
<span id="build-slave"></span><h3>Add a Slave after Stopping a Service<a class="headerlink" href="#add-a-slave-after-stopping-a-service" title="Permalink to this headline">¶</a></h3>
<p>Now let’s see the case of building a new slave node with a single master node - making a 1:1 master-slave composition.</p>
<img alt="_images/build_slave.png" src="_images/build_slave.png" />
<ul class="simple">
<li>nodeA: a master node’s host name</li>
<li>nodeB: a slave node’s host name to be added newly</li>
</ul>
<p>This scenario assumes that the database has been created by below commands. When you run createdb, a locale name and a charset should be the same between a master node and a slave node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export CUBRID_DATABASES=/home/cubrid/DB
mkdir $CUBRID_DATABASES/testdb
mkdir $CUBRID_DATABASES/testdb/log
cd $CUBRID_DATABASES/testdb
cubrid createdb testdb -L $CUBRID_DATABASES/testdb/log en_US.utf8
</pre></div>
</div>
<p>The backup file is saved in the $CUBRID_DATABASES/testdb directory by default if the location is not specified.</p>
<p>URL’s change in an application is not required if a broker node is composed of a separated machine and if adding a new broker is not considered.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If a broker’s machine is not separated from a database’s, to prepare a fault of a master node’s machine, broker’s access on a slave machine should be possible, too. To do this, altHosts should be added on an application’s access URL and databases.txt’s configuration should be changed for broker duplexing.</p>
<p class="last">For broker’s configuration on HA environment, see <a class="reference internal" href="#ha-cubrid-broker-conf"><span class="std std-ref">cubrid_broker.conf</span></a>.</p>
</div>
<p>In this scenario, we assume that broker’s node is not installed on a separated machine.</p>
<p>With the above in mind, let’s work as follows.</p>
<ol class="arabic" start="0">
<li><p class="first">Configure HA of master node and slave node.</p>
<ul>
<li><p class="first">Set the <strong>$CUBRID/conf/cubrid.conf</strong> identically on master and slave nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">service</span><span class="p">]</span>
<span class="n">service</span><span class="o">=</span><span class="n">server</span><span class="p">,</span><span class="n">broker</span><span class="p">,</span><span class="n">manager</span>

<span class="c1"># Add the database name to run when starting the service</span>
<span class="n">server</span><span class="o">=</span><span class="n">testdb</span>

<span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="o">...</span>

<span class="c1"># Add when configuring the HA (Logging parameters)</span>
<span class="n">force_remove_log_archives</span><span class="o">=</span><span class="n">no</span>

<span class="c1"># Add when configuring the HA (HA mode)</span>
<span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">Set the <strong>$CUBRID/conf/cubrid_ha.conf</strong> identically on master and slave nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>

<span class="c1"># cubrid is a group name of HA system, nodeA and nodeB are host names.</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span>

<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
<span class="n">ha_apply_max_mem_size</span><span class="o">=</span><span class="mi">500</span>
</pre></div>
</div>
</li>
<li><p class="first">Set the <strong>$CUBRID_DATABASES/databases.txt</strong> identically on master and slave nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name    vol-path                db-host         log-path                    lob-base-path</span>
<span class="n">testdb</span>      <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>  <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>  <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
</li>
<li><p class="first">Set brokers and applications in HA environment.</p>
<p>For broker setting and adding altHosts into URL, see <a class="reference internal" href="#ha-cubrid-broker-conf"><span class="std std-ref">cubrid_broker.conf</span></a>.</p>
</li>
<li><p class="first">Set locale library identically on master and slave nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ scp $CUBRID/conf/cubrid_locales.txt cubrid_usr@nodeB:$CUBRID/conf/.
[nodeB]$ make_locale.sh -t64
</pre></div>
</div>
</li>
<li><p class="first">Create a directory to a slave node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES
[nodeB]$ mkdir testdb
</pre></div>
</div>
</li>
<li><p class="first">Create a log directory to a slave node. (create this on the same path with a master node.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb
[nodeB]$ mkdir log
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Stop a master node, backup a master database.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid service stop
</pre></div>
</div>
<p>Back up the database of the master node and copy the backup file to the slave node.</p>
<p>If the location where the backup file will be saved in the master node is not specified, the location is set as the log directory of <em>testdb</em> by default. Copy the backup file to the same location in the slave node. <em>testdb</em>_bk0v000 is the backup volume file and <em>testdb</em>_bkvinf is the backup volume information file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid backupdb -z -S testdb
Backup Volume Label: Level: 0, Unit: 0, Database testdb, Backup Time: Thu Apr 19 16:05:18 2012
[nodeA]$ cd $CUBRID_DATABASES/testdb/log
[nodeA]$ scp testdb_bk* cubrid_usr@nodeB:$CUBRID_DATABASES/testdb/log
cubrid_usr@nodeB&#39;s password:
testdb_bk0v000                            100% 6157KB   6.0MB/s   00:00
testdb_bkvinf                             100%   66     0.1KB/s   00:00
</pre></div>
</div>
</li>
<li><p class="first">Restore a database from a slave node.</p>
<p>Restore the database in the slave node. At this time, the volume path of the master node must be identical to that of the slave node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid restoredb -B $CUBRID_DATABASES/testdb/log demodb
</pre></div>
</div>
</li>
<li><p class="first">Start a master node, start a slave node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat start
</pre></div>
</div>
<p>After confirming that the master node has been started, start the slave node.</p>
<p>If <em>nodeA</em>’s state is changed from registered_and_to_be_active to registered_and_active, it means that the master node has been successfully started.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat status
@ cubrid heartbeat status

 HA-Node Info (current nodeA, state master)
   Node nodeB (priority 2, state unknown)
   Node nodeA (priority 1, state master)

 HA-Process Info (master 123, state master)

   Applylogdb testdb@localhost:/home1/cubrid/DB/tdb01_nodeB (pid 234, state registered)
   Copylogdb testdb@nodeB:/home1/cubrid/DB/tdb01_nodeB (pid 345, state registered)
   Server tdb01 (pid 456, state registered_and_to_be_active)

[nodeB]$ cubrid heartbeat start
</pre></div>
</div>
<p>Confirm that the HA configurations of the master node and the slave node are successfully running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ csql -u dba testdb@localhost -c&quot;create table tbl(i int primary key);insert into tbl values (1),(2),(3)&quot;

[nodeB]$ csql -u dba testdb@localhost -c&quot;select * from tbl&quot;

            i
=============
            1
            2
            3
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="build-another-slave-during-ha-service">
<span id="build-another-slave"></span><h3>Build Another Slave during HA Service<a class="headerlink" href="#build-another-slave-during-ha-service" title="Permalink to this headline">¶</a></h3>
<p>The following is a scenario to add a new slave from an existing slave during a HA service. “Master:Slave” will be from 1:1 to 1:2.</p>
<img alt="_images/build_another_slave.png" src="_images/build_another_slave.png" />
<ul class="simple">
<li>nodeA: a master node’s host name</li>
<li>nodeB: a slave node’s host name</li>
<li>nodeC: a slave node’s host name to be added</li>
</ul>
<p>You can use an existing master or slave if you want to add a new slave during HA service. In this scenario, let’s add a new slave by using an existing slave because we assume that slave’s disk I/O is less than master’s.</p>
<div class="admonition note" id="build-using-slave-why">
<p class="first admonition-title">Note</p>
<p><strong>Why possible to use a slave instead of a master when adding a node</strong></p>
<p class="last">The reason to use a slave instead of a master is that master’s transaction log (active log + archive log) is replicated to a slave as it is, and master node’s transaction logs and slave node’s replication logs (replicated transaction logs) are the same in format and content.</p>
</div>
<div class="admonition note" id="build-initial-database">
<p class="first admonition-title">Note</p>
<p><strong>Build an initial database</strong></p>
<p>It assumes that the database is already created with the below command. a locale name and a charset should be the same between a master and a slave when you run “createdb”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export CUBRID_DATABASES=/home/cubrid/DB
mkdir $CUBRID_DATABASES/testdb
mkdir $CUBRID_DATABASES/testdb/log
cd $CUBRID_DATABASES/testdb
cubrid createdb testdb -L $CUBRID_DATABASES/testdb/log en_US.utf8
</pre></div>
</div>
<p class="last">At this time, if you don’t specify backup files’ saving path as an option, backup files are saved on the log directory specified in databases.txt.</p>
</div>
<img alt="_images/build_another_slave_process.png" src="_images/build_another_slave_process.png" />
<ol class="arabic" start="0">
<li><p class="first">HA configuration of <em>nodeC</em></p>
<ul>
<li><p class="first">Set <strong>$CUBRID/conf/cubrid.conf</strong> of <em>nodeC</em> identically with <em>nodeB</em>’s.</p>
<p>“force_remove_log_archives=no” should be set not to let no-replicated logs be deleted during HA service.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">service</span><span class="p">]</span>
<span class="n">service</span><span class="o">=</span><span class="n">server</span><span class="p">,</span><span class="n">broker</span><span class="p">,</span><span class="n">manager</span>

<span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="o">...</span>

<span class="c1"># Add when configuring the HA (Logging parameters)</span>
<span class="n">force_remove_log_archives</span><span class="o">=</span><span class="n">no</span>

<span class="c1"># Add when configuring the HA (HA mode)</span>
<span class="n">ha_mode</span><span class="o">=</span><span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">Set <strong>$CUBRID/conf/cubrid_ha.conf</strong> of <em>nodeC</em> identically with <em>nodeB</em>’s.</p>
<p>However, add <em>nodeC</em> into ha_node_list, and  add one more “sync” into ha_copy_sync_mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>

<span class="c1"># cubrid is a group name of HA system, nodeA, nodeB, and nodeC are host names.</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span><span class="p">:</span><span class="n">nodeC</span>

<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
<span class="n">ha_apply_max_mem_size</span><span class="o">=</span><span class="mi">500</span>
</pre></div>
</div>
</li>
<li><p class="first">Set a locale library of <em>nodeC</em> identically with that of <em>nodeA</em> or <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ scp $CUBRID/conf/cubrid_locales.txt cubrid_usr@nodeC:$CUBRID/conf/.
[nodeC]$ make_locale.sh -t64
</pre></div>
</div>
</li>
<li><p class="first">Add <em>nodeA</em>, <em>nodeB</em>, and <em>nodeC</em> into db-host of <strong>$CUBRID_DATABASES/databases.txt</strong> in <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name     vol-path                   db-host             log-path                        lob-base-path</span>
<span class="n">testdb</span>       <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>     <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span><span class="p">:</span><span class="n">nodeC</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>      <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p><strong>db-host</strong> of <strong>databases.txt</strong> is related to the access order to the database server by a broker; therefore, you can change the value as you want. For example, you can write only nodeA:nodeB or localhost into <strong>db-host</strong>. However, by considering the local machine access, (e.g. csql -u dba <a class="reference external" href="mailto:testdb&#37;&#52;&#48;localhost">testdb<span>&#64;</span>localhost</a>) you should add at least localhost or the name of localhost into <strong>db-host</strong>.</p>
</li>
</ul>
</li>
<li><p class="first">Apply configuration for preventing from deleting replication logs of <em>nodeB</em> during restoring after backup</p>
<p>Replication logs of <em>nodeB</em> can be added if service continues after restoring a database from the <em>nodeB</em> backup file to <em>nodeC</em>. By the way, slave’s replication logs can be deleted before being copied to <em>nodeC</em> by configuration. To prevent this case, you can configure system parameters as follows.</p>
<ul>
<li><p class="first">Change the value of <strong>ha_copy_log_max_archives</strong> bigger without restarting <em>nodeB</em>’s database.</p>
<p>From backup of <em>nodeB</em>, transactions which have been executed after backup of <em>nodeB</em> should be kept; then transactions after backup can be applied to <em>nodeC</em>.</p>
<p>Therefore, added replication logs of <em>nodeB</em> after backup should be kept.</p>
<p>Here, let’s assume the number of replication logs as 5, which can sufficiently save executed transactions during building <em>nodeC</em>.</p>
<p>Edit <strong>$CUBRID/conf/cubrid_ha.conf</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_copy_log_max_archives</span><span class="o">=</span><span class="mi">5</span>
</pre></div>
</div>
<p>Apply the change of the parameter <strong>ha_copy_log_max_archives</strong> to the applylogdb process of <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat applylogdb stop testdb nodeA
[nodeB]$ cubrid heartbeat applylogdb start testdb nodeA
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you build <em>nodeC</em> with only <em>nodeA</em>, a master node, to change the value of <strong>ha_copy_log_max_archives</strong> from <em>nodeB</em> is needless because copying replication logs from <em>nodeB</em> is needless.</p>
<p>Instead, you should apply the changed <strong>log_max_archives</strong> to <em>nodeA</em>.</p>
<p>The value of <strong>log_max_archives</strong> parameter of cubrid.conf can be changed during service by using “SET SYSTEM PARAMETERS” syntax.</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ csql -u dba -c &quot;SET SYSTEM PARAMETERS &#39;log_max_archives=5&#39;&quot; testdb@localhost
</pre></div>
</div>
</div>
</li>
</ul>
</li>
<li><p class="first">Backup from <em>nodeB</em>, restore into <em>nodeC</em></p>
<ul>
<li><p class="first">Backup a database from <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb/log
[nodeB]$ cubrid backupdb --sleep-msecs=10 -C -o output.txt testdb@localhost
</pre></div>
</div>
<div class="admonition note" id="sleep-msecs">
<p class="first admonition-title">Note</p>
<p><strong>–sleep-msecs</strong> is an option to set the rest time in each cycle when 1MB is written in a backup file.The unit is millisecond. Consider setting this option if the disk I/O overhead of a machine to back up is severe; however, it is recommended to set this value as small as possible and do backup when backup overhead is small enough because if this value is bigger, backup time takes longer.</p>
<p>If there is no I/O overhead on <em>nodeB</em>, you can omit this option.</p>
<p class="last">On the file specified in -o option, the backup result information is written.</p>
</div>
</li>
<li><p class="first">Copy backup files to <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb/log
[nodeB]$ scp -l 131072 testdb_bk* cubrid_usr@nodeC:$CUBRID_DATABASES/testdb/log
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scp command’s -l option is an option to control the amount of copying file; when you copy files between nodes, use this value properly as considering I/O overhead. The unit is Kbits. 131072 is 16MB.</p>
</div>
</li>
<li><p class="first">Restore the database into <em>nodeC</em>.</p>
<p>At this time, the volume path of the slave must be the same with the master.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid restoredb -B $CUBRID_DATABASES/testdb/log testdb
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Copy the active log of <em>nodeA</em> into <em>nodeC</em></p>
<p>In <em>nodeA</em>’s active log, there exists a number information of the archive log which is recently created.
This information is needed for archive logs, which has been created after the time in which the active log had been copied, to be automatically copied by copylogdb process after the start of HA service of <em>nodeC</em>;
therefore, the user just needs to manually copy archive logs which has been created before copying an active log.</p>
<ul>
<li><p class="first">Start cub_master which manages HA connection in <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cub_master
</pre></div>
</div>
</li>
<li><p class="first">Start copylogdb process for <em>nodeA</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid heartbeat copylogdb start testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">Check if <em>nodeA</em>’s active log was copied.</p>
<p>To copy the current active log means to obtain the number information of the last archive log. Archive logs after this time are automatically copied after the process [5. Start HA server in <em>nodeC</em>].</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cd $CUBRID_DATABASES/testdb_nodeA
[nodeC]$ ls
testdb_lgar_t  testdb_lgat  testdb_lgat__lock
</pre></div>
</div>
</li>
<li><p class="first">Stop copylogdb process for <em>nodeA</em> on <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid heartbeat copylogdb stop testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">Stop cub_master of <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid service stop
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Copy required log files after restoring a database into <em>nodeC</em></p>
<ul>
<li><p class="first">Copy all replicated archive logs of <em>nodeB</em> into <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cd $CUBRID_DATABASES/testdb_nodeA
[nodeC]$ scp -l 131072 cubrid@nodeB:$CUBRID_DATABASES/testdb_nodeA/testdb_lgar0* .
</pre></div>
</div>
<p>In this process, please note that all replicated archive logs which are required for replication should exist.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scp command’s -l option is an option to control the amount of copying file; when you copy files between nodes, use this value properly as considering I/O overhead. The unit is Kbits. 131072 is 16MB.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Copy files of which the names end with a number. Here, we copied with “testdb_lgar0*” because numbers of names of all replication log files are started with 0.</p>
</div>
<div class="admonition note" id="check-replication-log">
<p class="first admonition-title">Note</p>
<p><strong>Preparation plan when the required replication logs are already deleted</strong></p>
<p>Replication logs which are created between backup time and active log creation time can be deleted if the value of <strong>ha_copy_log_max_archives</strong> is not large enough; in this case, an error can occur when running the below process, [5. Start HA service on <em>nodeC</em>].</p>
<p>When an error occurs, start HA service of <em>nodeC</em> by adding archive logs in master if the required logs exist in master node. For example, you can copy an archive log #1 from master if there are archive logs #1, #2, and #3 in master; and there are only replicated archive logs #2, and #3 in slave and #1 is required additionally. However, the case in which master’s archive log files are left more can happen only when the value of <strong>log_max_archives</strong> of master is big enough.</p>
<p class="last">If there is no wanted number’s archive log in master’s archive logs, change the value of <strong>ha_copy_log_max_archives</strong> big enough and do backup-and-restore procedure from the beginning.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Check if required replication logs are deleted</strong></p>
<p>You can check if requried replication logs are deleted or not by watching the testdb_lginf file.</p>
<ol class="arabic simple">
<li>If this is the case of restoring a database from a slave backup file, you can check what pages are required, from the page of master by watching the value of required_lsa_pageid in the db_ha_apply_info catalog table.</li>
<li>Watch the contents of the testdb_lginf file located in $CUBRID_DATABASES/testdb/log directory from  bottom to top.</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">17</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mf">23.767</span> <span class="o">-</span> <span class="n">COMMENT</span><span class="p">:</span> <span class="n">CUBRID</span><span class="o">/</span><span class="n">LogInfo</span> <span class="k">for</span> <span class="n">database</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">testdb</span>
<span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">17</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mf">23.767</span> <span class="o">-</span> <span class="n">ACTIVE</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">testdb_lgat</span> <span class="mi">1280</span> <span class="n">pages</span>
<span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">17</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mf">40.892</span> <span class="o">-</span> <span class="n">ARCHIVE</span><span class="p">:</span> <span class="mi">0</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">testdb_lgar000</span> <span class="mi">0</span> <span class="mi">1277</span>
<span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">17</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">29.451</span> <span class="o">-</span> <span class="n">COMMENT</span><span class="p">:</span> <span class="n">Log</span> <span class="n">archive</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">testdb_lgar000</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">needed</span> <span class="nb">any</span> <span class="n">longer</span> <span class="n">unless</span> <span class="n">a</span> <span class="n">database</span> <span class="n">media</span> <span class="n">crash</span> <span class="n">occurs</span><span class="o">.</span>
<span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">18</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mf">08.166</span> <span class="o">-</span> <span class="n">ARCHIVE</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">testdb_lgar001</span> <span class="mi">1278</span> <span class="mi">2555</span>
<span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">18</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mf">08.167</span> <span class="o">-</span> <span class="n">COMMENT</span><span class="p">:</span> <span class="n">Log</span> <span class="n">archive</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">testdb_lgar000</span><span class="p">,</span> <span class="n">which</span> <span class="n">contains</span> <span class="n">log</span> <span class="n">pages</span> <span class="n">before</span> <span class="mi">2556</span><span class="p">,</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">needed</span> <span class="nb">any</span> <span class="n">longer</span> <span class="n">by</span> <span class="nb">any</span> <span class="n">HA</span> <span class="n">utilities</span><span class="o">.</span>
<span class="n">Time</span><span class="p">:</span> <span class="mi">03</span><span class="o">/</span><span class="mi">16</span><span class="o">/</span><span class="mi">15</span> <span class="mi">18</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mf">29.378</span> <span class="o">-</span> <span class="n">COMMENT</span><span class="p">:</span> <span class="n">Log</span> <span class="n">archive</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">databases</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">testdb_lgar001</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">needed</span> <span class="nb">any</span> <span class="n">longer</span> <span class="n">unless</span> <span class="n">a</span> <span class="n">database</span> <span class="n">media</span> <span class="n">crash</span> <span class="n">occurs</span><span class="o">.</span>
</pre></div>
</div>
<p>When the contents of testdb_lginf is written as the above, the last two numbers in “Time: 03/16/15 17:54:40.892 - ARCHIVE: 0 /home/cubrid/DB/databases/testdb/log/testdb_lgar000 0 1277” are the start and end IDs of pages which this file store.</p>
<p class="last">For example, if the page ID at backup is 2300, we can see this ID is between no. 1278 and no. 2555 by watching “testdb_lgar001 1278 2555”; therefore, we can know that the archive logs of master (or replicated archive logs of slave) are required from no. 1 when restoring a database.</p>
</div>
</li>
</ul>
</li>
<li><p class="first">Start HA service on <em>nodeC</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid heartbeat start
</pre></div>
</div>
</li>
<li><p class="first">Change HA configuration of <em>nodeA</em> and <em>nodeB</em></p>
<ul>
<li><p class="first">Turn back the value of ha_copy_log_max_archive of <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ vi cubrid_ha.conf

ha_copy_log_max_archives=1
</pre></div>
</div>
</li>
<li><p class="first">Apply the changed value of ha_copy_log_max_archives to the applylogdb process of <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat applylogdb stop testdb nodeA
[nodeB]$ cubrid heartbeat applylogdb start testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">In cubrid_ha.conf, add <em>nodeC</em> into ha_node_list, and add one “sync” more to <em>nodeA</em> and <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CUBRID/conf
$ vi cubrid_ha.conf

ha_node_list=cubrid@nodeA:nodeB:nodeC
ha_copy_sync_mode=sync:sync:sync
</pre></div>
</div>
</li>
<li><p class="first">Apply changed ha_node_list.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat reload
[nodeB]$ cubrid heartbeat reload
</pre></div>
</div>
</li>
<li><p class="first">Start coplylogdb and applylogdb for <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat repl start nodeC
[nodeB]$ cubrid heartbeat repl start nodeC
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Add a broker and add this broker’s host name into altHosts of application URL</p>
<p>Add a broker if needed, and add this broker’s host name into altHosts, the property of application URL to access this broker.</p>
<p>If you are not considering to add a broker, you do not need to do this job.</p>
<ul class="simple">
<li>From all of <em>nodeA</em> and <em>nodeB</em>, add <em>nodeC</em> into db-host of  <strong>$CUBRID_DATABASES/databases.txt</strong>.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name     vol-path                   db-host             log-path                        lob-base-path</span>
<span class="n">testdb</span>       <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>     <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span><span class="p">:</span><span class="n">nodeC</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>      <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p><strong>db-host</strong> of <strong>databases.txt</strong> is a configuration parameter related to the order of access from a broker to database servers; therefore, you can change as you want.For example, you can write only “nodeA:nodeB” or “localhost” into <strong>db-host</strong>. However, if you access database from a local machine (e.g. csql -u dba <a class="reference external" href="mailto:testdb&#37;&#52;&#48;localhost">testdb<span>&#64;</span>localhost</a>),  you should include “localhost” or the localhost name into <strong>db-host</strong>.</p>
</li>
</ol>
</div>
<div class="section" id="remove-a-slave-during-service">
<span id="remove-slave"></span><h3>Remove a Slave during Service<a class="headerlink" href="#remove-a-slave-during-service" title="Permalink to this headline">¶</a></h3>
<p>Let’s remove a slave when the HA environment is composed of “master:slave = 1:2”.</p>
<img alt="_images/remove_slave.png" src="_images/remove_slave.png" />
<ul class="simple">
<li>nodeA: a master node’s host name</li>
<li>nodeB: a slave node’s host name</li>
<li>nodeC: a slave node’s host name to be removed</li>
</ul>
<img alt="_images/remove_slave_process.png" src="_images/remove_slave_process.png" />
<ol class="arabic">
<li><p class="first">Stop the service of <em>nodeC</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid heartbeat stop     # Processes related to heartbeat (applylogdb, copylogdb, cub_server) are stopped.
$ cubrid service stop       # Processes such as cub_master, cub_broker, and cub_manager are stopped.
</pre></div>
</div>
</li>
<li><p class="first">Remove <em>nodeC</em> from the configuration of <em>nodeA</em>, and <em>nodeB</em></p>
</li>
</ol>
<blockquote>
<div><ul>
<li><p class="first">Remove <em>nodeC</em> in ha_node_list from cubrid_ha.conf of <em>nodeA</em> and <em>nodeB</em>; remove one “sync” in ha_copy_sync_mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vi cubrid_ha.conf

ha_node_list=cubrid@nodeA:nodeB
ha_copy_sync_mode=sync:sync
</pre></div>
</div>
</li>
<li><p class="first">Apply the changed ha_node_list.</p>
<p>Run “reload” command at the master, <em>nodeA</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat reload
</pre></div>
</div>
<p>Run “stop” and “start” commands at the slave, <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat stop
[nodeB]$ cubrid heartbeat start
</pre></div>
</div>
</li>
<li><p class="first">Stop coplylogdb and applylogdb for <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat repl stop nodeC
[nodeB]$ cubrid heartbeat repl stop nodeC
</pre></div>
</div>
</li>
<li><p class="first">Remove replication logs about <em>nodeC</em> from <em>nodeA</em> and <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CUBRID_DATABASES
$ rm -rf testdb_nodeC
</pre></div>
</div>
</li>
<li><p class="first">Remove replication information about <em>nodeC</em> from <em>nodeA</em> and <em>nodeB</em>.</p>
<p>You can run DELELTE operation from a slave node only if you add <strong>–sysadm</strong> and <strong>–write-on-standby</strong> options on running csql.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ csql -u dba --sysadm --write-on-standby testdb@localhost

sysadm&gt; DELETE FROM db_ha_apply_info WHERE copied_log_path=&#39;/home/cubrid/DB/databases/testdb_nodeC&#39;;
</pre></div>
</div>
<p>copied_log_path is the path in which replication log files are stored.</p>
</li>
</ul>
</div></blockquote>
<ol class="arabic" start="3">
<li><p class="first">Remove <em>nodeC</em> from broker’s configuration</p>
<ul>
<li><p class="first">Remove <em>nodeC</em> if this exists in db-host of databases.txt from <em>nodeA</em> and <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CUBRID_DATABASES
$ vi databases.txt

#db-name     vol-path                   db-host             log-path                        lob-base-path
testdb       /home/cubrid/DB/testdb     nodeA:nodeB         /home/cubrid/DB/testdb/log      file:/home/cubrid/DB/testdb/lob
</pre></div>
</div>
</li>
<li><p class="first">Restart brokers of <em>nodeA</em> and <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid broker restart
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You don’t need to hurry to restart these brokers because <em>nodeC</em> is already stopped and an application will not access the <em>nodeC</em> database. If you restart these brokers, you should consider that the applications connected to these brokers can be disconnected. Moreover, if multiple brokers with the same configuration exist, one broker can substitute others; therefore, restart a broker one by one.</p>
<p class="last">For example, on the above, <em>nodeA</em> and <em>nodeB</em> are the same configuration; therefore, you can restart <em>nodeB</em> first then restart <em>nodeA</em>.</p>
</div>
</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="add-a-replica-during-service">
<span id="add-replica"></span><h3>Add a Replica during Service<a class="headerlink" href="#add-a-replica-during-service" title="Permalink to this headline">¶</a></h3>
<p>Now let’s add a replica when HA environment is set as “master:slave=1:1”. The beginning database setting is the same as the setting in <a class="reference internal" href="#build-initial-database"><span class="std std-ref">Build an initial database</span></a> of <a class="reference internal" href="#build-another-slave"><span class="std std-ref">Build Another Slave during HA Service</span></a>.</p>
<img alt="_images/add_replica.png" src="_images/add_replica.png" />
<ul class="simple">
<li>nodeA: a master node’s host name</li>
<li>nodeB: a slave node’s host name</li>
<li>nodeC: a replica node’s host name to be added newly</li>
</ul>
<img alt="_images/add_replica_process.png" src="_images/add_replica_process.png" />
<ol class="arabic" start="0">
<li><p class="first">Configure HA parameter of <em>nodeC</em></p>
<ul>
<li><p class="first">Set <em>nodeC</em>’s <strong>$CUBRID/conf/cubrid.conf</strong> as the same with <em>nodeB</em> except for ha_mode.</p>
<p>Set “ha_mode=replica”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">service</span><span class="p">]</span>
<span class="n">service</span><span class="o">=</span><span class="n">server</span><span class="p">,</span><span class="n">broker</span><span class="p">,</span><span class="n">manager</span>

<span class="p">[</span><span class="n">common</span><span class="p">]</span>

<span class="c1"># Add this when doing HA configuration (HA mode)</span>
<span class="n">ha_mode</span><span class="o">=</span><span class="n">replica</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Replica node’s transaction logs are not used to replication; therefore, whatever the value of force_remove_log_archives is set to, it works as yes.</p>
</div>
</li>
<li><p class="first">Configure <em>nodeC</em>’s <strong>$CUBRID/conf/cubrid_ha.conf</strong></p>
<p>Add <em>nodeC</em> into ha_replica_list.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">common</span><span class="p">]</span>
<span class="n">ha_port_id</span><span class="o">=</span><span class="mi">59901</span>

<span class="c1"># cubrid is a group name of HA system, nodeA, nodeB, and nodeC are host names.</span>
<span class="n">ha_node_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeA</span><span class="p">:</span><span class="n">nodeB</span>

<span class="n">ha_replica_list</span><span class="o">=</span><span class="n">cubrid</span><span class="nd">@nodeC</span>

<span class="n">ha_db_list</span><span class="o">=</span><span class="n">testdb</span>
<span class="n">ha_copy_sync_mode</span><span class="o">=</span><span class="n">sync</span><span class="p">:</span><span class="n">sync</span>
<span class="n">ha_apply_max_mem_size</span><span class="o">=</span><span class="mi">500</span>
</pre></div>
</div>
</li>
<li><p class="first">Set a locale library of <em>nodeC</em> identically with that of <em>nodeA</em> or <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ scp $CUBRID/conf/cubrid_locales.txt cubrid_usr@nodeC:$CUBRID/conf/.
[nodeC]$ make_locale.sh -t64
</pre></div>
</div>
</li>
<li><p class="first">Add <em>nodeC</em> into db-host of <strong>$CUBRID_DATABASES/databases.txt</strong> in <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name     vol-path                   db-host             log-path                        lob-base-path</span>
<span class="n">testdb</span>       <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>     <span class="n">nodeC</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>      <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p><strong>db-host</strong> of <strong>databases.txt</strong> is related to the access order to the database server by a broker; therefore, you can change the value as you want. For example, you can write only nodeA:nodeB or localhost into <strong>db-host</strong>. However, by considering the local machine access, (e.g. csql -u dba <a class="reference external" href="mailto:testdb&#37;&#52;&#48;localhost">testdb<span>&#64;</span>localhost</a>) you should add at least localhost or the name of localhost into <strong>db-host</strong>.</p>
</li>
</ul>
</li>
<li><p class="first">Apply configuration for preventing from deleting replication logs of <em>nodeB</em> during restoring after backup</p>
<p><em>nodeB</em>’s replication logs can be added after restoring if a service keeps going during restoring on <em>nodeC</em> after backup of <em>nodeB</em>; at this time, some replication logs which are needed for <em>nodeC</em> can be deleted by the configuration. To protect this, configure nodes as following.</p>
<ul>
<li><p class="first">Change the value of <strong>ha_copy_log_max_archives</strong> larger without restarting a database on <em>nodeB</em>.</p>
<p>To apply transactions after backup time to <em>nodeC</em>, transactions should be kept until the <em>nodeC</em>’s data which restore <em>nodeB</em>’s backup data become the same with master(<em>nodeA</em>)’s.</p>
<p>Therefore, <em>nodeB</em>’s replication logs which are added after backup should be kept.</p>
<p>Here, let’s assume the number of replication log files which can sufficiently store transactions executed during <em>nodeC</em>’s building as 5.</p>
<p>Edit <strong>$CUBRID/conf/cubrid_ha.conf</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ha_copy_log_max_archives</span><span class="o">=</span><span class="mi">5</span>
</pre></div>
</div>
<p>Apply the change of ha_copy_log_max_archives to <em>nodeB</em>’s applylogdb process.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat applylogdb stop testdb nodeA
[nodeB]$ cubrid heartbeat applylogdb start testdb nodeA
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you build <em>nodeC</em> with <em>nodeA</em>, a master node only, copying replication logs from <em>nodeB</em> is not needed; therefore, changing the value of <strong>ha_copy_log_max_archives</strong> from <em>nodeB</em> is also needless.</p>
<p>Instead, it requires to apply a changed value of <strong>log_max_archives</strong> to <em>nodeA</em>.</p>
<p>The value of <strong>log_max_archives</strong> parameter in cubrid.conf can be changed during service with the “SET SYSTEM PARAMETERS” syntax.</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ csql -u dba -c &quot;SET SYSTEM PARAMETERS &#39;log_max_archives=5&#39;&quot; testdb@localhost
</pre></div>
</div>
</div>
</li>
</ul>
</li>
<li><p class="first">Backup <em>nocdB</em> and restore on <em>nodeC</em></p>
<ul>
<li><p class="first">Backup a database from <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb/log
[nodeB]$ cubrid backupdb --sleep-msecs=10 -C -o output.txt testdb@localhost
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to the explanation of <a class="reference internal" href="#sleep-msecs"><span class="std std-ref">–sleep-msecs</span></a> within <a class="reference internal" href="#build-another-slave"><span class="std std-ref">Build Another Slave during HA Service</span></a>.</p>
</div>
</li>
<li><p class="first">Copy backup files to <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb/log
[nodeB]$ scp -l 131072 testdb_bk* cubrid_usr@nodeC:$CUBRID_DATABASES/testdb/log
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scp command’s -l option is an option to control the amount of copying file; when you copy files between nodes, use this value properly as considering I/O overhead. The unit is Kbits. 131072 is 16MB.</p>
</div>
</li>
<li><p class="first">Restore the database into <em>nodeC</em>.</p>
<p>At this time, volume paths between a master and a slave should be the same.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid restoredb -B $CUBRID_DATABASES/testdb/log testdb
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Copy <em>nodeA</em>’s active log to <em>nodeC</em></p>
<p>In <em>nodeA</em>’s active log, there exists a number information of the archive log which is recently created.
This information is needed for archive logs, which has been created after the time in which the active log had been copied, to be automatically copied by copylogdb process after the start of HA service of <em>nodeC</em>;
therefore, the user just needs to manually copy archive logs which has been created before copying an active log.</p>
<ul>
<li><p class="first">Start cub_master, which manages HA connections, on <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cub_master
</pre></div>
</div>
</li>
<li><p class="first">Start copylogdb process for <em>nodeA</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid heartbeat copylogdb start testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">Check if <em>nodeA</em>’s active log was copied.</p>
<p>To copy the current active log means to obtain the number information of the last archive log. Archive logs after this time are automatically copied after the process [5. Start HA server in <em>nodeC</em>].</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cd $CUBRID_DATABASES/testdb_nodeA
[nodeC]$ ls
testdb_lgar_t  testdb_lgat  testdb_lgat__lock
</pre></div>
</div>
</li>
<li><p class="first">Stop copylogdb process for <em>nodeA</em> on <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid heartbeat copylogdb stop testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">Stop cub_master of <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid service stop
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Copy required log files after restoring a database into <em>nodeC</em></p>
<ul>
<li><p class="first">Copy all replicated archive logs of <em>nodeB</em> into <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cd $CUBRID_DATABASES/testdb_nodeA
[nodeC]$ scp -l 131072 cubrid@nodeB:$CUBRID_DATABASES/testdb_nodeA/testdb_lgar0* .
</pre></div>
</div>
<p>In this process, please note that all replicated archive logs which are required for replication should exist.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scp command’s -l option is an option to control the amount of copying file; when you copy files between nodes, use this properly as considering I/O overhead. The unit is Kbits. 131072 is 16MB.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Copy files of which the names end with a number. Here, we copied with “testdb_lgar0*” because numbers of the names of all replication log files are started with 0.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Replication logs which are created between backup time and active log creation time can be deleted if the value of <strong>ha_copy_log_max_archives</strong> is not large enough; in this case, an error can occur when running the below process, [5. Start HA service on <em>nodeC</em>].</p>
<p class="last">When an error occurs, take actions by referring to <a class="reference internal" href="#check-replication-log"><span class="std std-ref">Preparation plan when the required replication logs are already deleted</span></a> described on the above.</p>
</div>
</li>
</ul>
</li>
<li><p class="first">Start HA service on <em>nodeC</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeC]$ cubrid heartbeat start
</pre></div>
</div>
</li>
<li><p class="first">Change HA configuration of <em>nodeA</em> and <em>nodeB</em></p>
<ul>
<li><p class="first">Turn back ha_copy_log_max_archive of <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ vi cubrid_ha.conf

ha_copy_log_max_archives=1
</pre></div>
</div>
</li>
<li><p class="first">Apply the changed value of ha_copy_log_max_archives to the applylogdb process of <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat applylogdb stop testdb nodeA
[nodeB]$ cubrid heartbeat applylogdb start testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">In cubrid_ha.conf, add <em>nodeC</em> into ha_node_list, and add one “sync” more to <em>nodeA</em> and <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $CUBRID/conf
$ vi cubrid_ha.conf

ha_replica_list=cubrid@nodeC
</pre></div>
</div>
</li>
<li><p class="first">Apply changed ha_node_list.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat reload
[nodeB]$ cubrid heartbeat reload
</pre></div>
</div>
<p>At this time, coplylogdb and applylogdb processes for <em>nodeC</em> on <em>nodeA</em> and <em>nodeB</em> are needless to start because <em>nodeC</em> is a replica node.</p>
</li>
</ul>
</li>
<li><p class="first">Add a broker and add this broker’s host name into altHosts of application URL</p>
<p>Add a broker if needed, and add this broker’s host name into altHosts, the property of application URL to access this broker.</p>
<p>If you are not considering to add a broker, you do not need to do this job.</p>
<ul class="simple">
<li>From all of <em>nodeA</em> and <em>nodeB</em>, add <em>nodeC</em> into db-host of  <strong>$CUBRID_DATABASES/databases.txt</strong>.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#db-name     vol-path                   db-host             log-path                        lob-base-path</span>
<span class="n">testdb</span>       <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span>     <span class="n">nodeA</span><span class="p">:</span><span class="n">nodeB</span><span class="p">:</span><span class="n">nodeC</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">log</span>      <span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">cubrid</span><span class="o">/</span><span class="n">DB</span><span class="o">/</span><span class="n">testdb</span><span class="o">/</span><span class="n">lob</span>
</pre></div>
</div>
<p><strong>db-host</strong> of <strong>databases.txt</strong> is a configuration parameter related to the order of access from a broker to database servers; therefore, you can change as you want. For example, you can write only “nodeA:nodeB” or “localhost” into <strong>db-host</strong>. However, if you access database from a local machine (e.g. csql -u dba <a class="reference external" href="mailto:testdb&#37;&#52;&#48;localhost">testdb<span>&#64;</span>localhost</a>),  you should include “localhost” or the localhost name into <strong>db-host</strong>.</p>
</li>
</ol>
</div>
<div class="section" id="rebuild-a-slave-during-service">
<span id="rebuild-slave"></span><h3>Rebuild a Slave during Service<a class="headerlink" href="#rebuild-a-slave-during-service" title="Permalink to this headline">¶</a></h3>
<p>Now let’s see the case of rebuilding a existing slave node during a service in a composition of “master:slave:relica = 1:1:1”. The beginning database setting is the same as the setting in <a class="reference internal" href="#build-initial-database"><span class="std std-ref">Build an initial database</span></a> of <a class="reference internal" href="#build-another-slave"><span class="std std-ref">Build Another Slave during HA Service</span></a>.</p>
<img alt="_images/rebuild_slave.png" src="_images/rebuild_slave.png" />
<ul class="simple">
<li>nodeA: a host name of a master node</li>
<li>nodeB: a host name of a slave node to be rebuilt</li>
<li>nodeC: a host name of a replica node</li>
</ul>
<img alt="_images/rebuild_slave_process.png" src="_images/rebuild_slave_process.png" />
<ol class="arabic">
<li><p class="first">Stop <em>nodeB</em>’s service and remove this database</p>
<p>After stopping <em>nodeB</em>’s service, remove <em>nodeB</em>’s database volumes and <em>nodeB</em>’s replication logs located in <em>nodeA</em> and <em>nodeC</em>.</p>
<ul>
<li><p class="first">Stop <em>nodeB</em>’s service.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat stop
[nodeB]$ cubrid service stop
</pre></div>
</div>
</li>
<li><p class="first">Remove <em>nodeB</em>’s database volumes and replication logs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES
[nodeB]$ rm testdb/*
[nodeB]$ rm testdb/log/*

[nodeB]$ rm -rf testdb_nodeA
[nodeB]$ rm $CUBRID/var/APPLYLOGDB/testdb
</pre></div>
</div>
</li>
<li><p class="first">Stop log replication processes of <em>nodeB</em> on <em>nodeA</em> and <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat repl stop nodeB
[nodeC]$ cubrid heartbeat repl stop nodeB
</pre></div>
</div>
</li>
<li><p class="first">Remove replication logs for <em>nodeB</em> from <em>nodeA</em> and <em>nodeC</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ rm -rf $CUBRID_DATABASES/testdb_nodeB
[nodeC]$ rm -rf $CUBRID_DATABASES/testdb_nodeB
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Restore <em>nodeB</em>’s database from <em>nodeA</em>’s backup, and add data to HA catalog table.</p>
<ul class="simple">
<li>Delete db_ha_apply_info data for <em>nodeB</em> from <em>nodeA</em> and <em>nodeC</em>.</li>
</ul>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ csql --sysadm -u dba testdb@localhost
csql&gt; DELETE FROM db_ha_apply_info WHERE copied_log_path=&#39;/home/cubrid/DB/databases/testdb_nodeB&#39;;

[nodeC]$ csql --sysadm --write-on-standby -u dba testdb@localhost
csql&gt; DELETE FROM db_ha_apply_info WHERE copied_log_path=&#39;/home/cubrid/DB/databases/testdb_nodeB&#39;;
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p class="first">Backup a database from <em>nodeA</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cd $CUBRID_DATABASES/testdb/log
[nodeA]$ cubrid backupdb --sleep-msecs=10 -C -o output.txt testdb@localhost
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to <a class="reference internal" href="#sleep-msecs"><span class="std std-ref">–sleep-msecs</span></a> of <a class="reference internal" href="#build-another-slave"><span class="std std-ref">Build Another Slave during HA Service</span></a>.</p>
</div>
</li>
<li><p class="first">Copy backup files to <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$
[nodeA]$ scp testdb_bk* cubrid_usr@nodeB:$CUBRID_DATABASES/testdb/log
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scp command’s -l option is an option to control the amount of copying file; when you copy files between nodes, use this properly as considering I/O overhead. The unit is Kbits. 131072 is 16MB.</p>
</div>
</li>
<li><p class="first">Restore the database into <em>nodeB</em>.</p>
<p>At this time, the volume path of the master node must be identical to that of the slave node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid restoredb -B $CUBRID_DATABASES/testdb/log testdb
</pre></div>
</div>
</li>
<li><p class="first">Add a replication information record for <em>nodeA</em> to <em>nodeB</em>’s db_ha_apply_info.</p>
<p>Get an update information of <strong>db_ha_apply_info</strong> from output.txt file, which has backup result messages in <em>nodeA</em>. output.txt is saved at the directory on which a user ran “cubrid backupdb” command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ vi $CUBRID_DATABASES/testdb/log/output.txt

[ Database(testdb) Full Backup start ]

- num-threads: 2

- compression method: NONE

- sleep 10 millisecond per 1M read.

- backup start time: Fri Mar 20 18:18:53 2015

- number of permanent volumes: 2

- HA apply info: testdb 1426495463 12922 16192

- backup progress status

...
</pre></div>
</div>
<p>Make the below script and run. At “HA apply info” on the above output, put the first number, 1426495463 into $db_creation, the second number, 12922 into $pageid, and the third number, 16192 into $offset; put testdb into db_name, the database name and <em>nodeA</em> into master_host, the master node’s host name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ vi update.sh

#!/bin/sh

db_creation=1426495463
page_id=12922
offset=16192
db_name=testdb
master_host=nodeA

repl_log_home_abs=$CUBRID_DATABASES

repl_log_path=$repl_log_home_abs/${db_name}_${master_host}

local_db_creation=`awk &#39;BEGIN { print strftime(&quot;%m/%d/%Y %H:%M:%S&quot;, &#39;$db_creation&#39;) }&#39;`
    csql_cmd=&quot;\
    INSERT INTO \
            db_ha_apply_info \
    VALUES \
    ( \
            &#39;$db_name&#39;, \
            datetime &#39;$local_db_creation&#39;, \
            &#39;$repl_log_path&#39;, \
            $page_id, $offset, \
            $page_id, $offset, \
            $page_id, $offset, \
            $page_id, $offset, \
            $page_id, $offset, \
            $page_id, $offset, \
            NULL, \
            NULL, \
            NULL, \
            0, \
            0, \
            0, \
            0, \
            0, \
            0, \
            0, \
            NULL \
    )&quot;

# Insert nodeA&#39;s HA info.
csql --sysadm -u dba -c &quot;$csql_cmd&quot; -S testdb
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ sh update.sh
</pre></div>
</div>
<p>Check if the data is successfully inserted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ csql -u dba -S testdb

csql&gt; ;line on
csql&gt; SELECT * FROM db_ha_apply_info;
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Copy <em>nodeA</em>’s active log into <em>nodeB</em></p>
<p>In <em>nodeA</em>’s active log, there exists a number information of the archive log which is recently created.
This information is needed for archive logs, which has been created after the time in which the active log had been copied, to be automatically copied by copylogdb process after the start of HA service of <em>nodeC</em>;
therefore, the user just needs to manually copy archive logs which has been created before copying an active log.</p>
<ul>
<li><p class="first">Start cub_master which manages HA connection in <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cub_master
</pre></div>
</div>
</li>
<li><p class="first">Start copylogdb process for <em>nodeA</em> on <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat copylogdb start testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">Check if an active log of <em>nodeA</em> is copied.</p>
<p>To copy the current active log means to obtain the number information of the last archive log. Archive logs after this time are automatically copied after the process [5. Start HA server in <em>nodeB</em>].</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb_nodeA
[nodeB]$ ls
testdb_lgar_t  testdb_lgat  testdb_lgat__lock
</pre></div>
</div>
</li>
<li><p class="first">Stop copylogdb process for <em>nodeA</em> on <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat copylogdb stop testdb nodeA
</pre></div>
</div>
</li>
<li><p class="first">Stopo <em>nodeB</em>’s cub_master.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid service stop
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Copy required log files after restoring a database into <em>nodeB</em></p>
<ul>
<li><p class="first">Copy all archive logs of <em>nodeA</em> into <em>nodeB</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cd $CUBRID_DATABASES/testdb_nodeA
[nodeB]$ scp -l 131072 cubrid@nodeA:$CUBRID_DATABASES/testdb/log/testdb_lgar0* .
</pre></div>
</div>
<p>In this process, please note that all replicated archive logs which are required for replication should exist.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">scp command’s -l option is an option to control the amount of copying file; when you copy files between nodes, use this properly as considering I/O overhead. The unit is Kbits. 131072 is 16MB.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Copy files of which the names end with a number. Here, we copied with “testdb_lgar0*” because numbers of names of all replication log files are started with 0.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>When required logs are already deleted</strong></p>
<p>Archive logs which are created between backup time and active log creation time can be deleted if the value of <strong>log_max_archives</strong> is not large enough; in this case, an error can occur when running the below process, [5. Start HA service on <em>nodeB</em> …].</p>
<p class="last">When an error occurs, enlarge the value of <strong>log_max_archives</strong> enough and proceed again backup-and-restore from the beginning.</p>
</div>
</li>
</ul>
</li>
<li><p class="first">Start HA service on <em>nodeB</em>; restart copylogdb and applylogdb processes on <em>nodeA</em> and <em>nodeC</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid heartbeat start
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeA]$ cubrid heartbeat applylogdb start testdb nodeB
[nodeA]$ cubrid heartbeat copylogdb start testdb nodeB

[nodeC]$ cubrid heartbeat applylogdb start testdb nodeB
[nodeC]$ cubrid heartbeat copylogdb start testdb nodeB
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="detection-of-replication-mismatch">
<h2>Detection of Replication Mismatch<a class="headerlink" href="#detection-of-replication-mismatch" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-detect-replication-mismatch">
<h3>How to Detect Replication Mismatch<a class="headerlink" href="#how-to-detect-replication-mismatch" title="Permalink to this headline">¶</a></h3>
<p>Replication mismatch between replication nodes, indicating that data of the master node and the slave node (or the replica node) is not identical, can be detected to some degree by the following process. You can also use <a class="reference internal" href="#cubrid-checksumdb"><span class="std std-ref">checksumdb</span></a> utility to detect a replication inconsistency. However, please note that there is no more accurate way to detect a replication mismatch than by directly comparing the data of the master node to the data of the slave node (or the replica node). If it is determined that there has been a replication mismatch, you should rebuild the database of the master node to the slave node (or the replica node) (see <a class="reference internal" href="#rebuilding-replication"><span class="std std-ref">Rebuilding Replication Script</span></a>.)</p>
<ul>
<li><p class="first">Execute <strong>cubrid statdump</strong> command and check <strong>Time_ha_replication_delay</strong>. When this value is bigger, replication latency can be larger; the bigger latency time shows the possibility of the larger replication mismatch.</p>
</li>
<li><p class="first">On the slave node (or the replica node), execute <strong>cubrid applyinfo</strong> to check the “Fail count” value. If the “Fail count” is 0, it can be determined that no transaction has failed in replication (see <a class="reference internal" href="#cubrid-applyinfo"><span class="std std-ref">applyinfo</span></a>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid applyinfo -L /home/cubrid/DB/testdb_nodeA -r nodeA -a testdb

 *** Applied Info. ***
Committed page                 : 1913 | 2904
Insert count                   : 645
Update count                   : 0
Delete count                   : 0
Schema count                   : 60
Commit count                   : 15
Fail count                     : 0
...
</pre></div>
</div>
</li>
<li><p class="first">To check whether copying replication logs has been delayed or not on the slave node (or the replica node), execute <strong>cubrid applyinfo</strong> and compare the “Append LSA” value of “Copied Active Info.” to the “Append LSA” value of “Active Info.”. If there is a big difference between the two values, it means that delay has occurred while copying the replication logs to the slave node (or the replica node) (see <a class="reference internal" href="#cubrid-applyinfo"><span class="std std-ref">applyinfo</span></a>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid applyinfo -L /home/cubrid/DB/testdb_nodeA -r nodeA -a testdb

...

 *** Copied Active Info. ***
DB name                        : testdb
DB creation time               : 11:28:00.000 AM 12/17/2010  (1292552880)
EOF LSA                        : 1913 | 2976
Append LSA                     : 1913 | 2976
HA server state                : active

 ***  Active Info. ***
DB name                        : testdb
DB creation time               : 11:28:00.000 AM 12/17/2010  (1292552880)
EOF LSA                        : 1913 | 2976
Append LSA                     : 1913 | 2976
HA server state                : active
</pre></div>
</div>
</li>
<li><p class="first">If a delay seems to occur when copying the replication logs, check whether the network line speed is slow, whether there is sufficient free disk space, disk I/O is normal, etc.</p>
</li>
<li><p class="first">To check the delay in applying the replication log in the slave node (or the replica node), execute <strong>cubrid applyinfo</strong> and compare the “Committed page” value of “Applied Info.” to the “EOF LSA” value of “Copied Active Info.”. If there is a big difference between the two values, it means that a delay has occurred while applying the replication logs to the slave database (or the replica database) (see <a class="reference internal" href="#cubrid-applyinfo"><span class="std std-ref">applyinfo</span></a>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[nodeB]$ cubrid applyinfo -L /home/cubrid/DB/testdb_nodeA -r nodeA -a testdb

 *** Applied Info. ***
Committed page                 : 1913 | 2904
Insert count                   : 645
Update count                   : 0
Delete count                   : 0
Schema count                   : 60
Commit count                   : 15
Fail count                     : 0

 *** Copied Active Info. ***
DB name                        : testdb
DB creation time               : 11:28:00.000 AM 12/17/2010  (1292552880)
EOF LSA                        : 1913 | 2976
Append LSA                     : 1913 | 2976
HA server state                : active
...
</pre></div>
</div>
</li>
<li><p class="first">If the delay in applying the replication logs is too long, it may be due to a transaction with a long execution time. If the transaction is performed normally, a delay in applying the replication logs may normally occur. To determine whether it is normal or abnormal, continuously execute <strong>cubrid applyinfo</strong> and check whether applylogdb continuously applies replication logs to the slave node (or the replica node) or not.</p>
</li>
<li><p class="first">Check the error log message created by the copylogdb process and the applylogdb process (see the error message).</p>
</li>
<li><p class="first">Compare the number of records on the master database table to that on the slave (or the replica)  database table.</p>
</li>
</ul>
</div>
<div class="section" id="checksumdb">
<span id="cubrid-checksumdb"></span><h3>checksumdb<a class="headerlink" href="#checksumdb" title="Permalink to this headline">¶</a></h3>
<p><strong>checksumdb</strong> provides a simple way to check replication integrity. Basically, it divides each table from a master node into fixed-size chunks and then calculates CRC32 values. The calculation itself, not the calculated value, is then replicated through CUBRID HA. Consequently, by comparing CRC32 values calculated on master and slave nodes (or replica nodes), <strong>checksumdb</strong> can report the replication integrity. Note that <strong>checksumdb</strong> might affect master’s performance even though it is designed to minimize the performance degradation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">checksumdb</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">database</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;@&lt;</span><span class="n">hostname</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>&lt;hostname&gt;</em> : When you initiates checksum calculation, you need to specify the hostname of a master node. When you need to get the result after the calculation is completed, specify the hostname of a node you want to check.</li>
</ul>
<dl class="option">
<dt id="cmdoption-checksumdb-c">
<code class="descname">-c</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--chunk-size</code><code class="descclassname">=NUMBER</code><a class="headerlink" href="#cmdoption-checksumdb-c" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify the number of rows to select for each CRC32 calculation. (default: 500 rows, minimum: 100 rows)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-s">
<code class="descname">-s</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--sleep</code><code class="descclassname">=NUMBER</code><a class="headerlink" href="#cmdoption-checksumdb-s" title="Permalink to this definition">¶</a></dt>
<dd><p>checksumdb sleeps the specified amount of time after calculating each chunk (default: 100 ms)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-i">
<code class="descname">-i</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--include-class-file</code><code class="descclassname">=FILE</code><a class="headerlink" href="#cmdoption-checksumdb-i" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify tables to check the replication mismatch by specifying the -i FILE option. If it is not specified, entire tables will be checked. Empty string, tab, carriage return and comma are separators among table names in the file.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-e">
<code class="descname">-e</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--exclude-class-file</code><code class="descclassname">=FILE</code><a class="headerlink" href="#cmdoption-checksumdb-e" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify tables to exclude from checking the replication mismatch by specifying the -e FILE option. Note that either -i or -e can be used, not both.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-t">
<code class="descname">-t</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--timeout</code><code class="descclassname">=NUMBER</code><a class="headerlink" href="#cmdoption-checksumdb-t" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify a calculation timeout with this option. (default: 1000 ms) If the timeout is reached, the calculation will be cancelled and will be resumed after a short period of time.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-n">
<code class="descname">-n</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--table-name</code><code class="descclassname">=STRING</code><a class="headerlink" href="#cmdoption-checksumdb-n" title="Permalink to this definition">¶</a></dt>
<dd><p>You can specify a table name to save checksum results. The table name must include the owner’s name which can only be dba. (default: dba.db_ha_checksum)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-r">
<code class="descname">-r</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--report-only</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-checksumdb-r" title="Permalink to this definition">¶</a></dt>
<dd><p>After checksum calculation is completed, you can get a report with this option.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-resume">
<code class="descname">--resume</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-checksumdb-resume" title="Permalink to this definition">¶</a></dt>
<dd><p>When checksum calculation is aborted, you can resume the calculation using this option.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-schema-only">
<code class="descname">--schema-only</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-checksumdb-schema-only" title="Permalink to this definition">¶</a></dt>
<dd><p>When this option is given, checksumdb does not calculate CRC32 but only check schema of each table</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-checksumdb-cont-on-error">
<code class="descname">--cont-on-error</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-checksumdb-cont-on-error" title="Permalink to this definition">¶</a></dt>
<dd><p>Without this option, checksumdb halts on errors.</p>
</dd></dl>

<p>The following example shows how to start checksumdb</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cubrid</span> <span class="n">checksumdb</span> <span class="o">-</span><span class="n">c</span> <span class="mi">100</span> <span class="o">-</span><span class="n">s</span> <span class="mi">10</span> <span class="n">testdb</span><span class="nd">@master</span>
</pre></div>
</div>
<p>When no replication mismatch found,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid checksumdb -r testdb@slave
================================================================
 target DB: testdb@slave (state: standby)
 report time: 2016-01-14 16:33:30
 checksum table name: db_ha_checksum, db_ha_checksum_schema
================================================================

------------------------
 different table schema
------------------------
NONE

----------------------------------------------------------------
table name  diff chunk id   chunk lower bound
----------------------------------------------------------------
NONE

--------------------------------------------------------------------------------------
table name  total # of chunks       # of diff chunks        total/avg/min/max time
--------------------------------------------------------------------------------------
t1              7                       0                       88 / 12 / 5 / 14 (ms)
t2              7                       0                       96 / 13 / 11 / 15 (ms)
</pre></div>
</div>
<p>When there is a replication mismatch in table <em>t1</em>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid checksumdb -r testdb@slave
================================================================
 target DB: testdb@slave (state: standby)
 report time: 2016-01-14 16:35:57
 checksum table name: db_ha_checksum, db_ha_checksum_schema
================================================================

------------------------
 different table schema
------------------------
NONE

----------------------------------------------------------------
table name  diff chunk id   chunk lower bound
----------------------------------------------------------------
t1              0               (id&gt;=1)
t1              1               (id&gt;=100)
t1              4               (id&gt;=397)

--------------------------------------------------------------------------------------
table name  total # of chunks       # of diff chunks        total/avg/min/max time
--------------------------------------------------------------------------------------
t1              7                       3                       86 / 12 / 5 / 14 (ms)
t2              7                       0                       93 / 13 / 11 / 15 (ms)
</pre></div>
</div>
<p>When there is a schema mismatch in table <em>t1</em>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cubrid checksumdb -r testdb@slave
================================================================
 target DB: testdb@slave (state: standby)
 report time: 2016-01-14 16:40:56
 checksum table name: db_ha_checksum, db_ha_checksum_schema
================================================================

------------------------
 different table schema
------------------------
&lt;table name&gt;
t1
&lt;current schema - collected at 04:40:53.947 PM 01/14/2016&gt;
CREATE TABLE [t1] ([id] INTEGER NOT NULL, [col1] CHARACTER VARYING(20), [col2] INTEGER, [col3] DATETIME, [col4] INTEGER,  CONSTRAINT [pk_t1_id] PRIMARY KEY  ([id])) COLLATE iso88591_bin
&lt;schema from master&gt;
CREATE TABLE [t1] ([id] INTEGER NOT NULL, [col1] CHARACTER VARYING(20), [col2] INTEGER, [col3] DATETIME,  CONSTRAINT [pk_t1_id] PRIMARY KEY  ([id])) COLLATE iso88591_bin

* Due to schema inconsistency, the checksum difference of the above table(s) may not be reported.
----------------------------------------------------------------
table name  diff chunk id   chunk lower bound
----------------------------------------------------------------
NONE

--------------------------------------------------------------------------------------
table name  total # of chunks       # of diff chunks        total/avg/min/max time
--------------------------------------------------------------------------------------
t1              7                       0                       95 / 13 / 11 / 16 (ms)
t2              7                       0                       94 / 13 / 11 / 15 (ms)
</pre></div>
</div>
</div>
<div class="section" id="ha-error-messages">
<span id="ha-error"></span><h3>HA Error Messages<a class="headerlink" href="#ha-error-messages" title="Permalink to this headline">¶</a></h3>
<p>The following are error messages about the errors which can be reasons for the replication mismatch.</p>
<div class="section" id="cas-process-cub-cas">
<h4>CAS process(cub_cas)<a class="headerlink" href="#cas-process-cub-cas" title="Permalink to this headline">¶</a></h4>
<p>Error messages in CAS process are written to <strong>$CUBRID/log/broker/error_log</strong>/<em>&lt;broker_name&gt;_&lt;app_server_num&gt;</em><strong>.err</strong>. The following table shows connection error messages in the HA environment.</p>
<p><strong>Error messages for handshaking between a broker and a DB server</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-1139</td>
<td>Handshake error (peer host ?): incompatible
read/write mode. (client: ?, server: ?)</td>
<td>error</td>
<td>ACCESS_MODE of broker and the status of server
(active/standby) is not the same
(see <a class="reference internal" href="#broker-mode"><span class="std std-ref">Broker Mode</span></a>).</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>-1140</td>
<td>Handshake error (peer host ?):
HA replication delayed.</td>
<td>error</td>
<td>Replication is delayed in the server which
set <strong>ha_delay_limit</strong>.</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>-1141</td>
<td>Handshake error (peer host ?): replica-only
client to non-replica server.</td>
<td>error</td>
<td>A broker(CAS) which can access only a replica
attempts to connect to the server which is not
a replica(see <a class="reference internal" href="#broker-mode"><span class="std std-ref">Broker Mode</span></a>).</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>-1142</td>
<td>Handshake error (peer host ?): remote access to
server not allowed.</td>
<td>error</td>
<td>It attempts to connect to a server with
HA maintenance mode(see <a class="reference internal" href="#ha-server"><span class="std std-ref">Servers</span></a>).</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>-1143</td>
<td>Handshake error (peer host ?): unidentified
server version.</td>
<td>error</td>
<td>Server version is unidentified.</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p><strong>Connection Error Messages</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-353</td>
<td>Cannot make connection to master server on host ?.</td>
<td>error</td>
<td>cub_master process went down.</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>-1144</td>
<td>Timed out attempting to connect to ?.
(timeout: ? sec(s))</td>
<td>error</td>
<td>The machine went down.</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="replication-log-copy-process-copylogdb">
<h4>Replication Log Copy Process(copylogdb)<a class="headerlink" href="#replication-log-copy-process-copylogdb" title="Permalink to this headline">¶</a></h4>
<p>The error messages from the replication log copy process are stored in <strong>$CUBRID/log/</strong><em>&lt;db-name&gt;</em><strong>&#64;</strong><em>&lt;remote-node-name&gt;</em><strong>_copylogdb.err</strong>. The severity levels of error messages found in the replication log copy process are as follows: fatal, error, and notification. The default level is error. Therefore, to record notification error messages, it is necessary to change the value of <strong>error_log_level</strong> in the <strong>cubrid.conf</strong> file. For details, see <a class="reference internal" href="admin/config.html#error-parameters"><span class="std std-ref">Error Message-Related Parameters</span></a>.</p>
<p><strong>Initialization Error Messages</strong></p>
<p>The error messages that can be found in initialization stage of replication log copy process are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-10</td>
<td>Cannot mount the disk volume ?.</td>
<td>error</td>
<td>Fails to open a replication log file.</td>
<td>Check if replication logs exist. For the location of replication
logs, see <a class="reference external" href="#admin_admin_ha_conf_ha_htm">Default Environment Configuration</a>.</td>
</tr>
<tr class="row-odd"><td>-78</td>
<td>Internal error: an I/O error occurred while
reading logical log page ? (physical page ?) of ?</td>
<td>fatal</td>
<td>Fails to read a replication log.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-even"><td>-81</td>
<td>Internal error: logical log page ? may be
corrupted.</td>
<td>fatal</td>
<td>A replication log page error, in which the
replication log copy process has been copied from
the connected database server process.</td>
<td>Check the error log of the database server process to which the
replication log copy process is connected.
This error log can be found in $CUBRID/log/server.</td>
</tr>
<tr class="row-odd"><td>-1039</td>
<td>log writer: log writer has been started. mode: ?</td>
<td>error</td>
<td>The replication log copy process has been
successfully initialized and started.</td>
<td>No action is required because this error message is recorded to
display the start information of the replication log copy process.
Ignore any error messages which are displayed between the start of
replication log copy process and output of this error message since
there is a possibility that an error message is shown up even in
normal situation.</td>
</tr>
</tbody>
</table>
<p><strong>Replication Log Request and Reception Error Messages</strong></p>
<p>The replication log copy process requests a replication log from the connected database server and receives the corresponding replication log. Error messages that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-89</td>
<td>Log ? is not included in the given database.</td>
<td>error</td>
<td>The previously replicated log and the log to be
replication do not match.</td>
<td>Check information of the database server/host to which the
replication log copy process is connected. If you need to change the
database server/host information, reinitialize it by deleting the
existing replication log and then restarting.</td>
</tr>
<tr class="row-odd"><td>-186</td>
<td>Data receiver error from the server</td>
<td>error</td>
<td>Incorrect information has been received from the
database server to which the replication log copy
process is connected.</td>
<td>It will be internally recovered.</td>
</tr>
<tr class="row-even"><td>-199</td>
<td>The server is not responding.</td>
<td>error</td>
<td>The connection to the database server has been
terminated.</td>
<td>It will be internally recovered.</td>
</tr>
</tbody>
</table>
<p><strong>Replication Log Write Error Messages</strong></p>
<p>The replication log copy process copies the replication log that was received from the connected database server process to the location (<strong>ha_copy_log_base</strong>) specified in the <strong>cubrid_ha.conf</strong> file. Error messages that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-10</td>
<td>Cannot mount the disk volume ?.</td>
<td>error</td>
<td>Fails to open a replication log file.</td>
<td>Check if replication logs exist.</td>
</tr>
<tr class="row-odd"><td>-79</td>
<td>Internal error: an I/O error occurred while
writing logical log page ? (physical page ?)
of ?.</td>
<td>fatal</td>
<td>Fails to write a replication log.</td>
<td>It will be internally recovered.</td>
</tr>
<tr class="row-even"><td>-80</td>
<td>An error occurred due to insufficient space in
operating system device while writing logical
log page ?(physical page ?) of ?.
Up to ? bytes in size are allowed.</td>
<td>fatal</td>
<td>Fails to write a replication log due to
insufficient file system space.</td>
<td>Check if there is sufficient space left in the disk partition.</td>
</tr>
</tbody>
</table>
<p><strong>Replication Log Archive Error Messages</strong></p>
<p>The replication log copy process periodically archives the replication logs that have been received from the connected database server process. Error messages that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-78</td>
<td>Internal error: an I/O error occurred while
reading logical log page ?
(physical page ?) of ?.</td>
<td>fatal</td>
<td>Fails to read a replication log during archiving.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-odd"><td>-79</td>
<td>Internal error: an I/O error occurred while
writing logical log page ?
(physical page ?) of ?.</td>
<td>fatal</td>
<td>Fails to write an archive log.</td>
<td>It will be internally recovered.</td>
</tr>
<tr class="row-even"><td>-81</td>
<td>Internal error: logical log page ? may be
corrupted.</td>
<td>fatal</td>
<td>Found an error on the replication log during
archiving.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-odd"><td>-98</td>
<td>Cannot create an archive log ? to archive pages
from ? to ?.</td>
<td>fatal</td>
<td>Fails to create an archive log file.</td>
<td>Check if there is sufficient space left in the disk partition.</td>
</tr>
<tr class="row-even"><td>-974</td>
<td>An archive log ? to archive pages from ? to ? has
been created.</td>
<td>notification</td>
<td>Information on an archive log file</td>
<td>No action is required because this error message is recorded to keep
information on newly created archive.</td>
</tr>
</tbody>
</table>
<p><strong>Stop and Restart Error Messages</strong></p>
<p>Error messages that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-1037</td>
<td>log writer: log writer is terminated by signal.</td>
<td>error</td>
<td>The copylogdb process has been terminated by a
specified signal.</td>
<td>It will be internally recovered.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="replication-log-reflection-process-applylogdb">
<h4>Replication Log Reflection Process(applylogdb)<a class="headerlink" href="#replication-log-reflection-process-applylogdb" title="Permalink to this headline">¶</a></h4>
<p>The error messages from the replication log reflection process are stored in <strong>$CUBRID/log/</strong><em>db-name</em><strong>&#64;</strong><em>local-node-name</em><strong>_applylogdb_</strong><em>db-name</em><strong>_</strong><em>remote-node-name</em><strong>.err</strong>. The severity levels of error message found in the replication log reflection process are as follow: fatal, error, and notification. The default level is error. Therefore, to record notification error messages, it is necessary to change the value of <strong>error_log_level</strong> in the <strong>cubrid.conf</strong> file. For details, see <a class="reference internal" href="admin/config.html#error-parameters"><span class="std std-ref">Error Message-Related Parameters</span></a>.</p>
<p><strong>Initialization Error Messages</strong></p>
<p>The error messages that can be found in initialization stage of replication log reflection process are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-10</td>
<td>Cannot mount the disk volume ?.</td>
<td>error</td>
<td>An applylogdb that is trying to reflect the same
replication log is already running.</td>
<td>Check if there is an applylogdb process that is trying to reflect
the same replication log.</td>
</tr>
<tr class="row-odd"><td>-1038</td>
<td>log applier: log applier has been started.
required LSA: ?|?. last committed LSA: ?|?.
last committed repl LSA: ?|?</td>
<td>error</td>
<td>It will be started normally after initialization of
applylogdb succeeds.</td>
<td>No action is required because this error is recorded to display the
start information of  the replication log reflection process.</td>
</tr>
</tbody>
</table>
<p><strong>Log Analysis Error Messages</strong></p>
<p>The replication log reflection process reads, analyzes, and reflects the replications logs that have been copied by the replication log copy process. The error message that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-13</td>
<td>An I/O error occurred while reading page ?
in volume ?.</td>
<td>error</td>
<td>Fails to read a log page to be reflected.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-odd"><td>-17</td>
<td>Internal error: Trying to read page ? of the
volume ? which has been already released.</td>
<td>fatal</td>
<td>Trying to read a log page that does not exist in
the replication log.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-even"><td>-81</td>
<td>Internal error: logical log page ? may be
corrupted.</td>
<td>fatal</td>
<td>There is an inconsistency between an old log under
replication reflection and the current log, or
there is a replication log record error.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-odd"><td>-82</td>
<td>Cannot mount the disk volume/file ?.</td>
<td>error</td>
<td>No replication log file exists.</td>
<td>Check if replication logs exist.
Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-even"><td>-97</td>
<td>Internal error: unable to find log page ? in
log archives.</td>
<td>error</td>
<td>No log page exists in the replication log.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-odd"><td>-897</td>
<td>Decompression failure</td>
<td>error</td>
<td>Fails to decompress the log record.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-even"><td>-1028</td>
<td>log applier: Unexpected EOF log record exists
in the Archive log. LSA: ?|?.</td>
<td>error</td>
<td>Incorrect log record exists in the archive log.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-odd"><td>-1029</td>
<td>log applier: Incorrect log page/offset. page
HDR: ?|?, final: ?|?, append LSA: ?|?, EOF LSA:
?|?, ha file status: ?, is end-of-log: ?.</td>
<td>error</td>
<td>Incorrect log record exists.</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
<tr class="row-even"><td>-1030</td>
<td>log applier: Incorrect log record. LSA: ?|?,
forw LSA: ?|?, backw LSA: ?|?, Trid: ?, prev
tran LSA: ?|?, type: ?.</td>
<td>error</td>
<td>Log record header error</td>
<td>Check the replication log by using the cubrid applyinfo utility.</td>
</tr>
</tbody>
</table>
<p><strong>Replication Log Reflection Error Messages</strong></p>
<p>The replication log reflection process reads, analyzes, and reflects the replication logs that have been copied by the replication log copy process. Error messages that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-72</td>
<td>The transaction (index ?, ?&#64;?|?) has been
cancelled by system.</td>
<td>error</td>
<td>Fails to reflect replication due to deadlock, etc.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-odd"><td>-111</td>
<td>Your transaction has been cancelled due to
server failure or a mode change.</td>
<td>error</td>
<td>Fails to reflect replication because the database
server process in which replication is supposed
to be reflected has been terminated or its mode
has been changed.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-even"><td>-191</td>
<td>Cannot connect to server ? on ?.</td>
<td>error</td>
<td>The connection to the database server process in
which replication is supposed to be reflected has
been terminated.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-odd"><td>-195</td>
<td>Server communication error: ?.</td>
<td>error</td>
<td>The connection to the database server process in
which replication is supposed to be reflected has
been terminated.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-even"><td>-224</td>
<td>The database has not been resumed.</td>
<td>error</td>
<td>The connection to the database server process in
which replication is supposed to be reflected has
been terminated.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-odd"><td>-1027</td>
<td>log applier: Failed to change the reflection
status from ? to ?.</td>
<td>error</td>
<td>Fails to change of replication reflection.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-even"><td>-1031</td>
<td>log applier: Failed to reflect the Schema
replication log. class: ?, schema: ?, internal
error: ?.</td>
<td>error</td>
<td>Fails to reflect SCHEMA replication.</td>
<td>Check the consistency of the replication. If it is inconsistent,
reconfigure the HA replication.</td>
</tr>
<tr class="row-odd"><td>-1032</td>
<td>log applier: Failed to reflect the Insert
replication log. class: ?, key: ?, internal
error: ?.</td>
<td>error</td>
<td>Fails to reflect INSERT replication.</td>
<td>Check the consistency of the replication. If it is inconsistent,
reconfigure the HA replication.</td>
</tr>
<tr class="row-even"><td>-1033</td>
<td>log applier: Failed to reflect the Update
replication log. class: ?, key: ?, internal
error: ?.</td>
<td>error</td>
<td>Fails to reflect UPDATE replication.</td>
<td>Check the consistency of the replication. If it is inconsistent,
reconfigure the HA replication.</td>
</tr>
<tr class="row-odd"><td>-1034</td>
<td>log applier: Failed to reflect the Delete
replication log. class: ?, key: ?, internal
error: ?.</td>
<td>error</td>
<td>Fails to reflect DELETE replication.</td>
<td>Check the consistency of the replication. If it is inconsistent,
reconfigure the HA replication.</td>
</tr>
<tr class="row-even"><td>-1040</td>
<td>HA generic: ?.</td>
<td>notification</td>
<td>Changes the last record of the archive log or
replication reflection status.</td>
<td>No action is required because this error message is recorded to
provide general information.</td>
</tr>
</tbody>
</table>
<p><strong>Stop and Restart Error Messages</strong></p>
<p>The error messages that can be found in this stage are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="27%" />
<col width="7%" />
<col width="27%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error
Code</th>
<th class="head">Error Message</th>
<th class="head">Severity</th>
<th class="head">Description</th>
<th class="head">Solution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-1035</td>
<td>log applier: The memory size (? MB) of the log
applier is larger than the maximum memory size
(? MB), or is doubled the starting memory size
(? MB) or more. required LSA: ?|?. last
committed LSA: ?|?.</td>
<td>error</td>
<td>The replication log reflection process has been
restarted due to reaching the maximum memory size
limit.</td>
<td>It will be recovered internally.</td>
</tr>
<tr class="row-odd"><td>-1036</td>
<td>log applier: log applier is terminated by signal.</td>
<td>error</td>
<td>The replication log reflection process has been
terminated by a specified signal.</td>
<td>It will be recovered internally.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="rebuilding-replication-script">
<span id="rebuilding-replication"></span><h2>Rebuilding Replication Script<a class="headerlink" href="#rebuilding-replication-script" title="Permalink to this headline">¶</a></h2>
<p>Replication rebuilding is required in CUBRID HA when data in the CUBRID HA group is inconsistent because of multiple failures in multiple-slave node structure, or because of a generic error. Rebuilding replications in CUBRID HA is perform done through a <strong>ha_make_slavedb.sh</strong> script. With the <strong>cubrid applyinfo</strong> utility, you can check the replication progress; however replication inconsistency is not detected. If you want to determine whether replication is inconsistent correctly, you must examine data of the master and slave nodes yourself.</p>
<p>When you rebuild only a slave because the slave is abnormal in the environment of master-slave composition, the process is as follows.</p>
<ol class="arabic simple">
<li>Backup the master database.</li>
<li>Restore the database from slave.</li>
<li>Save backup time into the slave’s HA meta table (db_ha_apply_info).</li>
<li>Start HA service from slave. (cubrid hb start)</li>
</ol>
<p>For rebuilding replications, the following environment must be the same in master, slave and replica nodes.</p>
<ul class="simple">
<li>CUBRID version</li>
<li>Environmental variable (<strong>$CUBRID</strong>, <strong>$CUBRID_DATABASES</strong>, <strong>$LD_LIBRARY_PATH</strong>, <strong>$PATH</strong>, <strong>$CUBRID_TMP</strong>, <strong>$TMPDIR</strong>)</li>
<li>The paths of database volume, log, and replication</li>
<li>Username and password of the Linux server</li>
<li>HA-related parameters except for <strong>ha_mode</strong>, <strong>ha_copy_sync_mode</strong>, <strong>ha_ping_hosts</strong> and <strong>ha_tcp_ping_hosts</strong></li>
</ul>
<p>You can rebuild replication by running <strong>ha_make_slavedb.sh</strong> script only in these cases.</p>
<ul class="simple">
<li><cite>from-master-to-slave</cite></li>
<li><cite>from-slave-to-replica</cite></li>
<li><cite>from-replica-to-replica</cite></li>
<li><cite>from-replica-to-slave</cite></li>
</ul>
<p>For the other cases, you should build manually. For the manual building scenarios, see <a class="reference internal" href="#building-replication"><span class="std std-ref">Building Replication</span></a>.</p>
<p>If the case is not for rebuilding but for newly building, configure cubrid.conf, cubrid_ha.conf, and databases.txt files as the same with master’s.</p>
<p>In the below description, first, we will look over the cases to use <strong>ha_make_slavedb.sh</strong> script, which is used to rebuilding replication.</p>
<p>As a reference, you cannot use <strong>ha_make_slavedb.sh</strong> script when you want to build multiple slave nodes.</p>
<div class="section" id="ha-make-slavedb-sh-script">
<h3>ha_make_slavedb.sh Script<a class="headerlink" href="#ha-make-slavedb-sh-script" title="Permalink to this headline">¶</a></h3>
<p>To rebuild replications, use the <strong>ha_make_slavedb.sh</strong> script. This script is located in <strong>$CUBRID/share/scripts/ha</strong>. Before rebuilding replications, the following items must be configured for the environment of the user. This script is supported since the version 2008 R2.2 Patch 9 and its configuration is different from 2008 R4.1 Patch 2 or earlier. This document describes it in CUBRID 2008 R4.1 Patch 2 or later.</p>
<ul class="simple">
<li><strong>target_host</strong> : The host name of the source node (master node in general) for rebuilding replication. It should be registered in <strong>/etc/hosts</strong>. A slave node can rebuild replication by using the master node or the replica node as the source. A replica node can rebuild replication by using the slave node or another replica node as the source.</li>
<li><strong>repl_log_home</strong> : Specifies the home directory of the replication log of the master node. It is usually the same as <strong>$CUBRID_DATABASES</strong>. You must enter an absolute path and should not use a symbolic link. You also cannot use a slash (/) after the path.</li>
</ul>
<p>The following are optional items:</p>
<ul class="simple">
<li><strong>db_name</strong> : Specifies the name of the database to be replicated. If not specified, the first name that appears in <strong>ha_db_list</strong> in <strong>$CUBRID/conf/cubrid_ha.conf</strong> is used.</li>
<li><strong>backup_dest_path</strong> : Specifies the path in which the backup volume is created when executing <strong>backupdb</strong> in source node for rebuilding replication.</li>
<li><strong>backup_option</strong> : Specifies necessary options when executing <strong>backupdb</strong> in the source node in which replication will be rebuilt.</li>
<li><strong>restore_option</strong> : Specifies necessary options when executing <strong>restoredb</strong> in the target node in which replication will be rebuilt.</li>
<li><strong>scp_option</strong> : Specifies the <strong>scp</strong> option which enables backup of source node in which replication is rebuilt to copy into the target node. The default option is <strong>-l 131072</strong>, which does not impose an overload on network (limits the transfer rate to 16 MB).</li>
<li><strong>ssh_port</strong>  : Specifies the <strong>port</strong> number of the ssh and scp used in the script. This option also applies to <strong>expect</strong> run from the script. The default port number is <strong>22</strong>.</li>
</ul>
<p>Once the script has been configured, execute the <strong>ha_make_slavedb.sh</strong> script in the target node in which replication will be rebuilt. When the script is executed, rebuilding replication happens in a number of phases. To move to the next stage, the user must enter an appropriate value. The following are the descriptions of available values.</p>
<ul class="simple">
<li><strong>yes</strong> : Keeps going.</li>
<li><strong>no</strong> : Does not move forward with any stages from now on.</li>
<li><strong>skip</strong>: Skips to the next stage. This input value is used to ignore a stage that has not necessarily been executed when retrying the script after it has failed.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>ha_make_slavedb.sh script executes the connection command into the remote node by <strong>expect</strong> and <strong>ssh</strong>; therefore, <strong>expect</strong> command should be installed(‘yum install expect’ in root account) and <strong>ssh</strong> should be possible in remote connection.</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li><p class="first">Backup volumes are required for rebuilding replication</p>
<p>To replicate, you must copy the physical image of the database volume in the target node to the database of the node to be replicated. However, <strong>cubrid unloaddb</strong> backs up only logical images so replication using <strong>cubrid unloaddb</strong> and <strong>cubrid loaddb</strong> is unavailable. Because <strong>cubrid backupdb</strong> backs up physical images, replication is possible by using this utility. The <strong>ha_make_slavedb.sh</strong> script performs replication by using <strong>cubrid backupdb</strong>.</p>
</li>
<li><p class="first">Online-backup of a source node and restoration of a rebuilding node during rebuilding replication.</p>
<p><strong>ha_make_slavedb.sh</strong> script executes online backup about a source node during DB operation, and restore to the being-rebuilt node. To apply added transactions after backup to the being-rebuilt node, <strong>ha_make_slavedb.sh</strong> script use the archive logs of “master” node by copying(in all cases, archive logs of “master” are used; all cases include how to build slave from master, how to build replica from slave and how to build replica from replica).</p>
<p>Therefore, so as not to remove archive logs which have been added to the source node during the execution of the online backup, there is a need to properly set <strong>force_remove_log_max_archives</strong> and <strong>log_max_archives</strong> in cubrid.conf from the master node. For details, see the below building examples.</p>
</li>
<li><p class="first"><strong>Error while executing the rebuilding replication script</strong></p>
<p>The rebuilding replication script is not automatically rolled back to its previous stage even when an error occurs during the execution. This is because the slave node cannot provide normal service before rebuilding replication script is executed. To return to the phase before rebuilding replication script is executed, you must back up the existing replication logs and <strong>db_ha_apply_info</strong> information which is internal catalog of the master and slave nodes before building replication is executed.</p>
</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="security.html" class="btn btn-neutral float-right" title="CUBRID Security" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="admin/ddl_audit.html" class="btn btn-neutral float-left" title="DDL Audit Log" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016, CUBRID Corparation..
      <span class="lastupdated">
        Last updated on Nov 22, 2024.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>